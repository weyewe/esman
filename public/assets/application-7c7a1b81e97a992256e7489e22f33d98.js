Ext.define("AM.model.AdvancedPayment",{extend:"Ext.data.Model",fields:[{name:"id",type:"int"},{name:"home_name",type:"string"},{name:"home_id",type:"int"},{name:"code",type:"string"},{name:"amount",type:"string"},{name:"description",type:"string"},{name:"duration",type:"string"},{name:"start_date",type:"string"},{name:"confirmed_at",type:"string"},{name:"is_confirmed",type:"boolean"}],idProperty:"id",proxy:{url:"api/advanced_payments",type:"rest",format:"json",reader:{root:"advanced_payments",successProperty:"success",totalProperty:"total"},writer:{getRecordData:function(e){return{advanced_payment:e.data}}}}}),Ext.define("AM.model.CashBank",{extend:"Ext.data.Model",fields:[{name:"id",type:"int"},{name:"name",type:"string"},{name:"description",type:"string"},{name:"is_bank",type:"boolean"},{name:"amount",type:"string"}],idProperty:"id",proxy:{url:"api/cash_banks",type:"rest",format:"json",reader:{root:"cash_banks",successProperty:"success",totalProperty:"total"},writer:{getRecordData:function(e){return{cash_bank:e.data}}}}}),Ext.define("AM.model.CashBankAdjustment",{extend:"Ext.data.Model",fields:[{name:"id",type:"int"},{name:"cash_bank_id",type:"int"},{name:"cash_bank_name",type:"string"},{name:"code",type:"string"},{name:"status",type:"int"},{name:"status_text",type:"string"},{name:"description",type:"string"},{name:"adjustment_date",type:"string"},{name:"confirmed_at",type:"string"},{name:"is_confirmed",type:"boolean"},{name:"amount",type:"string"}],idProperty:"id",proxy:{url:"api/cash_bank_adjustments",type:"rest",format:"json",reader:{root:"cash_bank_adjustments",successProperty:"success",totalProperty:"total"},writer:{getRecordData:function(e){return{cash_bank_adjustment:e.data}}}}}),Ext.define("AM.model.CashBankMutation",{extend:"Ext.data.Model",fields:[{name:"id",type:"int"},{name:"source_cash_bank_id",type:"int"},{name:"source_cash_bank_name",type:"string"},{name:"target_cash_bank_id",type:"int"},{name:"target_cash_bank_name",type:"string"},{name:"code",type:"string"},{name:"description",type:"string"},{name:"mutation_date",type:"string"},{name:"confirmed_at",type:"string"},{name:"is_confirmed",type:"boolean"},{name:"amount",type:"string"}],idProperty:"id",proxy:{url:"api/cash_bank_mutations",type:"rest",format:"json",reader:{root:"cash_bank_mutations",successProperty:"success",totalProperty:"total"},writer:{getRecordData:function(e){return{cash_bank_mutation:e.data}}}}}),Ext.define("AM.model.CashMutation",{extend:"Ext.data.Model",fields:[{name:"id",type:"int"},{name:"source_class",type:"string"},{name:"source_id",type:"int"},{name:"source_code",type:"string"},{name:"amount",type:"string"},{name:"mutation_date",type:"string"},{name:"status",type:"int"},{name:"status_text",type:"string"},{name:"cash_bank_name",type:"string"},{name:"cash_bank_id",type:"int"}],idProperty:"id",proxy:{url:"api/cash_mutations",type:"rest",format:"json",reader:{root:"cash_mutations",successProperty:"success",totalProperty:"total"},writer:{getRecordData:function(e){return{cash_mutation:e.data}}}}}),Ext.define("AM.model.Contract",{extend:"Ext.data.Model",fields:[{name:"id",type:"int"},{name:"customer_id",type:"int"},{name:"customer_name",type:"string"},{name:"contract_maintenance_id",type:"string"},{name:"code",type:"string"},{name:"name",type:"string"},{name:"description",type:"string"},{name:"started_at",type:"string"},{name:"finished_at",type:"string"}],idProperty:"id",proxy:{url:"api/contract_maintenances",type:"rest",format:"json",reader:{root:"contracts",successProperty:"success",totalProperty:"total"},writer:{getRecordData:function(e){return{contract:e.data}}}}}),Ext.define("AM.model.ContractItem",{extend:"Ext.data.Model",fields:[{name:"id",type:"int"},{name:"item_id",type:"int"},{name:"customer_id",type:"int"},{name:"item_code",type:"string"},{name:"item_type_name",type:"string"},{name:"customer_name",type:"string"},{name:"contract_maintenance_id",type:"int"}],idProperty:"id",proxy:{url:"api/contract_items",type:"rest",format:"json",reader:{root:"contract_items",successProperty:"success",totalProperty:"total"},writer:{getRecordData:function(e){return{contract_item:e.data}}}}}),Ext.define("AM.model.Customer",{extend:"Ext.data.Model",fields:[{name:"id",type:"int"},{name:"name",type:"string"},{name:"address",type:"string"},{name:"pic",type:"string"},{name:"contact",type:"string"},{name:"email",type:"string"}],idProperty:"id",proxy:{url:"api/customers",type:"rest",format:"json",reader:{root:"customers",successProperty:"success",totalProperty:"total"},writer:{getRecordData:function(e){return{customer:e.data}}}}}),Ext.define("AM.model.DepositDocument",{extend:"Ext.data.Model",fields:[{name:"id",type:"int"},{name:"user_id",type:"int"},{name:"user_name",type:"string"},{name:"home_id",type:"int"},{name:"home_name",type:"string"},{name:"code",type:"string"},{name:"description",type:"string"},{name:"deposit_date",type:"string"},{name:"confirmed_at",type:"string"},{name:"is_confirmed",type:"boolean"},{name:"finished_at",type:"string"},{name:"is_finished",type:"boolean"},{name:"amount_deposit",type:"string"},{name:"amount_charge",type:"string"}],idProperty:"id",proxy:{url:"api/deposit_documents",type:"rest",format:"json",reader:{root:"deposit_documents",successProperty:"success",totalProperty:"total"},writer:{getRecordData:function(e){return{deposit_document:e.data}}}}}),Ext.define("AM.model.Home",{extend:"Ext.data.Model",fields:[{name:"id",type:"int"},{name:"name",type:"string"},{name:"address",type:"string"},{name:"home_type_id",type:"int"},{name:"home_type_name",type:"string"},{name:"home_type_description",type:"string"}],idProperty:"id",proxy:{url:"api/homes",type:"rest",format:"json",reader:{root:"homes",successProperty:"success",totalProperty:"total"},writer:{getRecordData:function(e){return{home:e.data}}}}}),Ext.define("AM.model.HomeAssignment",{extend:"Ext.data.Model",fields:[{name:"id",type:"int"},{name:"user_id",type:"int"},{name:"user_name",type:"string"},{name:"home_name",type:"string"},{name:"home_id",type:"int"},{name:"assignment_date",type:"string"}],idProperty:"id",proxy:{url:"api/home_assignments",type:"rest",format:"json",reader:{root:"home_assignments",successProperty:"success",totalProperty:"total"},writer:{getRecordData:function(e){return{home_assignment:e.data}}}}}),Ext.define("AM.model.HomeType",{extend:"Ext.data.Model",fields:[{name:"id",type:"int"},{name:"name",type:"string"},{name:"description",type:"string"},{name:"amount",type:"string"}],idProperty:"id",proxy:{url:"api/home_types",type:"rest",format:"json",reader:{root:"home_types",successProperty:"success",totalProperty:"total"},writer:{getRecordData:function(e){return{home_type:e.data}}}}}),Ext.define("AM.model.Invoice",{extend:"Ext.data.Model",fields:[{name:"id",type:"int"},{name:"source_class",type:"string"},{name:"source_id",type:"int"},{name:"home_id",type:"int"},{name:"home_name",type:"string"},{name:"code",type:"string"},{name:"source_code",type:"string"},{name:"amount",type:"string"},{name:"invoice_date",type:"string"},{name:"due_date",type:"string"},{name:"confirmed_at",type:"string"},{name:"is_confirmed",type:"boolean"}],idProperty:"id",proxy:{url:"api/invoices",type:"rest",format:"json",reader:{root:"invoices",successProperty:"success",totalProperty:"total"},writer:{getRecordData:function(e){return{invoice:e.data}}}}}),Ext.define("AM.model.Item",{extend:"Ext.data.Model",fields:[{name:"id",type:"int"},{name:"customer_id",type:"int"},{name:"item_type_id",type:"int"},{name:"code",type:"string"},{name:"description",type:"string"},{name:"manufactured_at",type:"string"},{name:"warranty_expiry_date",type:"string"}],idProperty:"id",proxy:{url:"api/items",type:"rest",format:"json",reader:{root:"items",successProperty:"success",totalProperty:"total"},writer:{getRecordData:function(e){return{item:e.data}}}}}),Ext.define("AM.model.ItemType",{extend:"Ext.data.Model",fields:[{name:"id",type:"int"},{name:"name",type:"string"},{name:"description",type:"string"}],idProperty:"id",proxy:{url:"api/item_types",type:"rest",format:"json",reader:{root:"item_types",successProperty:"success",totalProperty:"total"},writer:{getRecordData:function(e){return{item_type:e.data}}}}}),Ext.define("AM.model.Maintenance",{extend:"Ext.data.Model",fields:[{name:"id",type:"int"},{name:"code",type:"string"},{name:"item_code",type:"string"},{name:"item_id",type:"int"},{name:"customer_name",type:"string"},{name:"customer_id",type:"int"},{name:"user_name",type:"string"},{name:"user_id",type:"int"},{name:"complaint_date",type:"string"},{name:"complaint",type:"string"},{name:"complaint_case",type:"int"},{name:"complaint_case_text",type:"string"},{name:"diagnosis_date",type:"string"},{name:"diagnosis",type:"string"},{name:"diagnosis_case",type:"int"},{name:"diagnosis_case_text",type:"string"},{name:"is_diagnosed",type:"boolean"},{name:"solution_date",type:"string"},{name:"solution",type:"string"},{name:"solution_case",type:"int"},{name:"solution_case_text",type:"string"},{name:"is_solved",type:"boolean"},{name:"is_confirmed",type:"boolean"},{name:"is_deleted",type:"boolean"}],idProperty:"id",proxy:{url:"api/maintenances",type:"rest",format:"json",reader:{root:"maintenances",successProperty:"success",totalProperty:"total"},writer:{getRecordData:function(e){return{maintenance:e.data}}}}}),Ext.define("AM.model.MonthlyGenerator",{extend:"Ext.data.Model",fields:[{name:"id",type:"int"},{name:"code",type:"string"},{name:"description",type:"string"},{name:"generated_date",type:"string"},{name:"confirmed_at",type:"string"},{name:"is_confirmed",type:"boolean"}],idProperty:"id",proxy:{url:"api/monthly_generators",type:"rest",format:"json",reader:{root:"monthly_generators",successProperty:"success",totalProperty:"total"},writer:{getRecordData:function(e){return{monthly_generator:e.data}}}}}),Ext.define("AM.model.MonthlyGeneratorInvoice",{extend:"Ext.data.Model",fields:[{name:"id",type:"int"},{name:"source_class",type:"string"},{name:"source_id",type:"int"},{name:"home_id",type:"int"},{name:"home_name",type:"string"},{name:"code",type:"string"},{name:"source_code",type:"string"},{name:"amount",type:"string"},{name:"invoice_date",type:"string"},{name:"due_date",type:"string"},{name:"confirmed_at",type:"string"},{name:"is_confirmed",type:"boolean"}],idProperty:"id",proxy:{url:"api/monthly_generator_invoices",type:"rest",format:"json",reader:{root:"monthly_generator_invoices",successProperty:"success",totalProperty:"total"},writer:{getRecordData:function(e){return{invoice:e.data}}}}}),Ext.define("AM.model.NavigationProcess",{extend:"Ext.data.Model",fields:[{name:"text",type:"string"},{name:"viewClass",type:"string"}],proxy:{type:"memory"}}),Ext.define("AM.model.PaymentRequest",{extend:"Ext.data.Model",fields:[{name:"id",type:"int"},{name:"vendor_name",type:"string"},{name:"vendor_id",type:"int"},{name:"code",type:"string"},{name:"amount",type:"string"},{name:"description",type:"string"},{name:"request_date",type:"string"},{name:"confirmed_at",type:"string"},{name:"is_confirmed",type:"boolean"}],idProperty:"id",proxy:{url:"api/payment_requests",type:"rest",format:"json",reader:{root:"payment_requests",successProperty:"success",totalProperty:"total"},writer:{getRecordData:function(e){return{payment_request:e.data}}}}}),Ext.define("AM.model.PaymentVoucher",{extend:"Ext.data.Model",fields:[{name:"id",type:"int"},{name:"vendor_id",type:"int"},{name:"vendor_name",type:"string"},{name:"cash_bank_id",type:"int"},{name:"cash_bank_name",type:"string"},{name:"amount",type:"string"},{name:"payment_date",type:"string"},{name:"description",type:"string"},{name:"is_confirmed",type:"boolean"},{name:"confirmed_at",type:"string"},{name:"code",type:"string"},{name:"is_deleted",type:"boolean"},{name:"deleted_at",type:"string"}],idProperty:"id",proxy:{url:"api/payment_vouchers",type:"rest",format:"json",reader:{root:"payment_vouchers",successProperty:"success",totalProperty:"total"},writer:{getRecordData:function(e){return{payment_voucher:e.data}}}}}),Ext.define("AM.model.PaymentVoucherDetail",{extend:"Ext.data.Model",fields:[{name:"id",type:"int"},{name:"amount",type:"string"},{name:"payment_voucher_id",type:"int"},{name:"payable_id",type:"int"},{name:"payable_source_code",type:"string"}],idProperty:"id",proxy:{url:"api/payment_voucher_details",type:"rest",format:"json",reader:{root:"payment_voucher_details",successProperty:"success",totalProperty:"total"},writer:{getRecordData:function(e){return{payment_voucher_detail:e.data}}}}}),Ext.define("AM.model.ReceiptVoucher",{extend:"Ext.data.Model",fields:[{name:"id",type:"int"},{name:"user_name",type:"string"},{name:"user_id",type:"int"},{name:"cash_bank_name",type:"string"},{name:"cash_bank_id",type:"int"},{name:"receivable_id",type:"int"},{name:"receivable_source_code",type:"string"},{name:"code",type:"string"},{name:"amount",type:"string"},{name:"description",type:"string"},{name:"receipt_date",type:"string"},{name:"confirmed_at",type:"string"},{name:"is_confirmed",type:"boolean"}],idProperty:"id",proxy:{url:"api/receipt_vouchers",type:"rest",format:"json",reader:{root:"receipt_vouchers",successProperty:"success",totalProperty:"total"},writer:{getRecordData:function(e){return{receipt_voucher:e.data}}}}}),Ext.define("AM.model.User",{extend:"Ext.data.Model",fields:[{name:"id",type:"int"},{name:"role_id",type:"int"},{name:"role_name",type:"string"},{name:"name",type:"string"},"email"],idProperty:"id",proxy:{url:"api/app_users",type:"rest",format:"json",reader:{root:"users",successProperty:"success",totalProperty:"total"},writer:{getRecordData:function(e){return{user:e.data}}}}}),Ext.define("AM.model.Vendor",{extend:"Ext.data.Model",fields:[{name:"id",type:"int"},{name:"name",type:"string"},{name:"address",type:"string"},{name:"description",type:"string"}],idProperty:"id",proxy:{url:"api/vendors",type:"rest",format:"json",reader:{root:"vendors",successProperty:"success",totalProperty:"total"},writer:{getRecordData:function(e){return{vendor:e.data}}}}}),Ext.define("AM.store.AdvancedPayments",{extend:"Ext.data.Store",require:["AM.model.AdvancedPayment"],model:"AM.model.AdvancedPayment",autoLoad:!1,autoSync:!1,pageSize:10,sorters:[{property:"id",direction:"DESC"}],listeners:{}}),Ext.define("AM.store.CashBankAdjustments",{extend:"Ext.data.Store",require:["AM.model.CashBankAdjustment"],model:"AM.model.CashBankAdjustment",autoLoad:!1,autoSync:!1,pageSize:10,sorters:[{property:"id",direction:"DESC"}],listeners:{}}),Ext.define("AM.store.CashBankMutations",{extend:"Ext.data.Store",require:["AM.model.CashBankMutation"],model:"AM.model.CashBankMutation",autoLoad:!1,autoSync:!1,pageSize:10,sorters:[{property:"id",direction:"DESC"}],listeners:{}}),Ext.define("AM.store.CashBanks",{extend:"Ext.data.Store",require:["AM.model.CashBank"],model:"AM.model.CashBank",autoLoad:!1,autoSync:!1,pageSize:10,sorters:[{property:"id",direction:"DESC"}],listeners:{}}),Ext.define("AM.store.CashMutations",{extend:"Ext.data.Store",require:["AM.model.CashMutation"],model:"AM.model.CashMutation",autoLoad:!1,autoSync:!1,pageSize:10,sorters:[{property:"id",direction:"DESC"}],listeners:{}}),Ext.define("AM.store.ContractItems",{extend:"Ext.data.Store",require:["AM.model.ContractItem"],model:"AM.model.ContractItem",autoLoad:!1,autoSync:!1,pageSize:10,sorters:[{property:"id",direction:"DESC"}],listeners:{}}),Ext.define("AM.store.Contracts",{extend:"Ext.data.Store",require:["AM.model.Contract"],model:"AM.model.Contract",autoLoad:!1,autoSync:!1,pageSize:10,sorters:[{property:"id",direction:"DESC"}],listeners:{}}),Ext.define("AM.store.Customers",{extend:"Ext.data.Store",require:["AM.model.Customer"],model:"AM.model.Customer",autoLoad:!1,autoSync:!1,pageSize:10,sorters:[{property:"id",direction:"DESC"}],listeners:{}}),Ext.define("AM.store.DepositDocuments",{extend:"Ext.data.Store",require:["AM.model.DepositDocument"],model:"AM.model.DepositDocument",autoLoad:!1,autoSync:!1,pageSize:10,sorters:[{property:"id",direction:"DESC"}],listeners:{}}),Ext.define("AM.store.HomeAssignments",{extend:"Ext.data.Store",require:["AM.model.HomeAssignment"],model:"AM.model.HomeAssignment",autoLoad:!1,autoSync:!1,pageSize:10,sorters:[{property:"id",direction:"DESC"}],listeners:{}}),Ext.define("AM.store.HomeTypes",{extend:"Ext.data.Store",require:["AM.model.HomeType"],model:"AM.model.HomeType",autoLoad:!1,autoSync:!1,pageSize:10,sorters:[{property:"id",direction:"DESC"}],listeners:{}}),Ext.define("AM.store.Homes",{extend:"Ext.data.Store",require:["AM.model.Home"],model:"AM.model.Home",autoLoad:!1,autoSync:!1,pageSize:10,sorters:[{property:"id",direction:"DESC"}],listeners:{}}),Ext.define("AM.store.Invoices",{extend:"Ext.data.Store",require:["AM.model.Invoice"],model:"AM.model.Invoice",autoLoad:!1,autoSync:!1,pageSize:10,sorters:[{property:"id",direction:"DESC"}],listeners:{}}),Ext.define("AM.store.ItemTypes",{extend:"Ext.data.Store",require:["AM.model.ItemType"],model:"AM.model.ItemType",autoLoad:!1,autoSync:!1,pageSize:10,sorters:[{property:"id",direction:"DESC"}],listeners:{}}),Ext.define("AM.store.Items",{extend:"Ext.data.Store",require:["AM.model.Item"],model:"AM.model.Item",autoLoad:!1,autoSync:!1,pageSize:10,sorters:[{property:"id",direction:"DESC"}],listeners:{}}),Ext.define("AM.store.Maintenances",{extend:"Ext.data.Store",require:["AM.model.Maintenance"],model:"AM.model.Maintenance",autoLoad:!1,autoSync:!1,pageSize:10,sorters:[{property:"id",direction:"DESC"}],listeners:{}}),Ext.define("AM.store.MonthlyGeneratorInvoices",{extend:"Ext.data.Store",require:["AM.model.MonthlyGeneratorInvoice"],model:"AM.model.MonthlyGeneratorInvoice",autoLoad:!1,autoSync:!1,pageSize:10,sorters:[{property:"id",direction:"DESC"}],listeners:{}}),Ext.define("AM.store.MonthlyGenerators",{extend:"Ext.data.Store",require:["AM.model.MonthlyGenerator"],model:"AM.model.MonthlyGenerator",autoLoad:!1,autoSync:!1,pageSize:10,sorters:[{property:"id",direction:"DESC"}],listeners:{}}),Ext.define("AM.store.Navigations",{extend:"Ext.data.TreeStore",model:"AM.model.NavigationProcess",proxy:{type:"memory"},folderSort:!0}),Ext.define("AM.store.PaymentRequests",{extend:"Ext.data.Store",require:["AM.model.PaymentRequest"],model:"AM.model.PaymentRequest",autoLoad:!1,autoSync:!1,pageSize:10,sorters:[{property:"id",direction:"DESC"}],listeners:{}}),Ext.define("AM.store.PaymentVoucherDetails",{extend:"Ext.data.Store",require:["AM.model.PaymentVoucherDetail"],model:"AM.model.PaymentVoucherDetail",autoLoad:!1,autoSync:!1,pageSize:20,sorters:[{property:"id",direction:"DESC"}],listeners:{}}),Ext.define("AM.store.PaymentVouchers",{extend:"Ext.data.Store",require:["AM.model.PaymentVoucher"],model:"AM.model.PaymentVoucher",autoLoad:!1,autoSync:!1,pageSize:20,sorters:[{property:"id",direction:"DESC"}],listeners:{}}),Ext.define("AM.store.ReceiptVouchers",{extend:"Ext.data.Store",require:["AM.model.ReceiptVoucher"],model:"AM.model.ReceiptVoucher",autoLoad:!1,autoSync:!1,pageSize:10,sorters:[{property:"id",direction:"DESC"}],listeners:{}}),Ext.define("AM.store.Users",{extend:"Ext.data.Store",require:["AM.model.User"],model:"AM.model.User",autoLoad:!1,autoSync:!1,pageSize:10,sorters:[{property:"id",direction:"DESC"}],listeners:{}}),Ext.define("AM.store.Vendors",{extend:"Ext.data.Store",require:["AM.model.Vendor"],model:"AM.model.Vendor",autoLoad:!1,autoSync:!1,pageSize:10,sorters:[{property:"id",direction:"DESC"}],listeners:{}}),Ext.define("AM.view.AuthenticationForm",{extend:"Ext.form.Panel",alias:"widget.authform",layout:{align:"center",pack:"center",type:"hbox"},items:[{xtype:"fieldset",width:300,title:"Log in",items:[{xtype:"textfield",anchor:"100%",fieldLabel:"Email Anda",name:"email"},{xtype:"textfield",anchor:"100%",inputType:"password",fieldLabel:"Password",name:"password"},{xtype:"button",anchor:"100%",itemId:"loginBtn",text:"Log in"}]}]}),Ext.define("AM.view.ChartInspect",{extend:"Ext.panel.Panel",alias:"widget.chartInspect",layout:{type:"hbox",align:"stretch"},currentFocusDate:new Date,currentViewType:"week",chartStoreFields:["name","data1","id"],chartStoreUrl:"api/work_project_reports",listXType:"workprojectList",xAxisLabel:"Project",yAxisLabel:"Time Spent (mins)",panelTitle:"Project",chartListWrapperXType:"container",worksheetId:"#worksheetPanel",autoChartLoad:!0,selectedParentRecordId:null,parentRecordType:"user",viewer:"personal",buildChart:function(){var e=this;e.store1=Ext.create(Ext.data.JsonStore,{fields:e.chartStoreFields,proxy:{type:"ajax",url:e.chartStoreUrl,reader:{type:"json",root:"records",totalProperty:"total"}},autoLoad:!1}),e.autoChartLoad&&e.loadStore();var t={xtype:"chart",flex:5,animate:!0,store:e.store1,shadow:!0,axes:[{type:"Numeric",position:"left",fields:["data1"],label:{renderer:Ext.util.Format.numberRenderer("0,0")},title:e.yAxisLabel,grid:!0,minimum:0},{type:"Category",position:"bottom",fields:["name"],title:e.xAxisLabel}],series:[{type:"column",axis:"bottom",highlight:!0,xField:"name",yField:"data1",listeners:{itemmousedown:function(t){e.fireEvent("seriesClicked",t,e.currentViewType,e)}}}]};return t},loadStore:function(){var e=this,t=e.currentFocusDate,i=e.currentViewType;e.setLoading(!0);var a=0;"month"===i?a=1:"year"===i&&(a=2),e.store1.load({params:{viewValue:a,focusDate:Ext.Date.format(t,"Y-m-d H:i:s"),selectedParentRecordId:e.selectedParentRecordId,parentRecordType:e.parentRecordType,viewer:e.viewer},callback:function(){e.setLoading(!1),e.fireEvent("chartLoaded",Ext.Date.format(t,"Y-m-d H:i:s"));var i=e.up(e.worksheetId);i&&i.setTitle&&i.setTitle("By "+e.panelTitle+": "+e.getDurationText())}})},getDurationText:function(){var e=this;if(console.log("Inside getDurationText"),console.log("current focus date: "),console.log(e.currentFocusDate),console.log(e.currentFocusDate.getMonth()),e.currentFocusDate&&e.currentViewType){if("week"===e.currentViewType){console.log("currentViewType : week");var t=e.currentFocusDate.getDay(),i=e.currentFocusDate.getDate()-t,a=i+6;console.log("month: "),console.log(e.currentFocusDate.getMonth());var n=new Date(e.currentFocusDate.getFullYear(),e.currentFocusDate.getMonth(),i),o=new Date(e.currentFocusDate.getFullYear(),e.currentFocusDate.getMonth(),a);return Ext.Date.format(n,"Y-m-d  ")+" to "+Ext.Date.format(o,"Y-m-d  ")}if("month"===e.currentViewType){console.log("currentViewType : month");var s=new Date(e.currentFocusDate.getFullYear(),e.currentFocusDate.getMonth(),1),r=new Date(e.currentFocusDate.getFullYear(),e.currentFocusDate.getMonth()+1,0);return Ext.Date.format(s,"Y-m-d  ")+" to "+Ext.Date.format(r,"Y-m-d  ")}}},buildList:function(){var e=this,t={xtype:e.listXType,flex:2};return t},thisWeekText:"Minggu Ini",goText:"Go",jumpToText:"Lihat",weekText:"Week",monthText:"Month",yearText:"Year",buildToolbar:function(){this.tbar={cls:"ext-cal-toolbar",border:!0,items:[]},this.tbar.items.push({id:this.id+"-sr-tb-today",text:this.thisWeekText,handler:this.onThisWeekClick,scope:this}),this.tbar.items.push({id:this.id+"-tb-prev",handler:this.onPrevClick,scope:this,iconCls:"x-tbar-page-prev"}),this.tbar.items.push({id:this.id+"-tb-next",handler:this.onNextClick,scope:this,iconCls:"x-tbar-page-next"}),this.tbar.items.push(this.jumpToText),this.tbar.items.push({id:this.id+"-tb-jump-dt",xtype:"datefield",width:120,showToday:!1}),this.tbar.items.push({id:this.id+"-tb-jump",text:this.goText,handler:this.onJumpClick,scope:this}),this.tbar.items.push("->"),this.tbar.items.push({id:this.id+"-tb-week",text:this.weekText,handler:this.onWeekNavClick,scope:this,toggleGroup:this.id+"-sr-tb-views",pressed:!0}),this.tbar.items.push({id:this.id+"-tb-month",text:this.monthText,handler:this.onMonthNavClick,scope:this,toggleGroup:this.id+"-sr-tb-views"})},initComponent:function(){var e=this;e.buildToolbar(),this.items=[e.buildChart(),e.buildList()],this.callParent(arguments)},onThisWeekClick:function(){var e=this;e.currentFocusDate=new Date,e.loadStore()},onJumpClick:function(){var e=Ext.getCmp(this.id+"-tb-jump-dt").getValue(),t=this;null===e||""===e||(t.currentFocusDate=e,t.loadStore())},onPrevClick:function(){var e=this;"week"===e.currentViewType?e.currentFocusDate.setDate(e.currentFocusDate.getDate()-7):"month"===e.currentViewType?e.currentFocusDate.setMonth(e.currentFocusDate.getMonth()-1):"year"===e.currentViewType&&e.currentFocusDate.setYear(e.currentFocusDate.getYear()-1),e.loadStore()},onNextClick:function(){var e=this;"week"===e.currentViewType?e.currentFocusDate.setDate(e.currentFocusDate.getDate()+7):"month"===e.currentViewType?e.currentFocusDate.setMonth(e.currentFocusDate.getMonth()+1):"year"===e.currentViewType&&e.currentFocusDate.setYear(e.currentFocusDate.getYear()+1),e.loadStore()},onWeekNavClick:function(){var e=this;"week"!==e.currentViewType&&(e.currentViewType="week",e.loadStore())},onMonthNavClick:function(){var e=this;"month"!==e.currentViewType&&(e.currentViewType="month",e.loadStore())},onYearNavClick:function(){var e=this;"year"!==e.currentViewType&&(e.currentViewType="year",e.loadStore())}}),Ext.define("AM.view.Content",{extend:"Ext.panel.Panel",alias:"widget.content",border:!1,activeItem:1,layout:{type:"card",align:"stretch"},items:[{html:"Personal",xtype:"container"},{xtype:"operationProcessPanel"},{xtype:"masterProcessPanel"}]}),Ext.define("AM.view.CustomDateTimeField",{extend:"Ext.form.FieldContainer",mixins:{field:"Ext.form.field.Field"},alias:"widget.customdatetimefield",layout:"hbox",width:200,height:22,combineErrors:!0,msgTarget:"side",submitFormat:"Y-m-d H:i:s",dateCfg:null,timeCfg:null,initComponent:function(){var e=this;e.dateCfg||(e.dateCfg={}),e.timeCfg||(e.timeCfg={}),e.buildField(),e.callParent(),e.dateField=e.down("datefield"),e.timeField=e.down("timefield"),e.initField()},buildField:function(){var e=this;e.items=[Ext.apply({xtype:"datefield",submitValue:!1,format:"d.m.Y",width:100,flex:2},e.dateCfg),Ext.apply({xtype:"timefield",submitValue:!1,format:"H:i",width:80,flex:1},e.timeCfg)]},markInvalid:function(e){var t=this.down("datefield"),i=this.down("timefield");t.markInvalid(e),i.markInvalid(e)},getValue:function(){{var e,t=this,i=t.dateField.getSubmitValue(),a=(t.dateField.format,t.timeField.getSubmitValue());t.timeField.format}return i&&(e=a?Ext.Date.parse(i+" "+a,t.getFormat()):t.dateField.getValue()),e},parseDate:function(e){return void 0===e?new Date:(date_array=e.split(" ")[0],time_array=e.split(" ")[1],date_array=date_array.split("-"),time_array=time_array.split(":"),new Date(parseInt(date_array[0]),parseInt(date_array[1])-1,parseInt(date_array[2]),parseInt(time_array[0]),parseInt(time_array[1]),parseInt(time_array[2])))},setValue:function(e){{var t=this;new Date}e=t.parseDate(e),t.timeField.setValue(e),t.dateField.setValue(e)},getSubmitData:function(){var e=this,t=null;return e.disabled||!e.submitValue||e.isFileUpload()||(t={},value=e.getValue(),t[e.getName()]=""+value?Ext.Date.format(value,e.submitFormat):null),t},getFormat:function(){var e=this;return(e.dateField.submitFormat||e.dateField.format)+" "+(e.timeField.submitFormat||e.timeField.format)}}),Ext.define("AM.view.MasterProcessPanel",{extend:"Ext.panel.Panel",alias:"widget.masterProcessPanel",layout:{type:"hbox",align:"stretch"},items:[{bodyPadding:5,xtype:"masterProcessList",flex:1},{flex:6,id:"worksheetPanel",bodyPadding:0,layout:{type:"fit"},items:[{xtype:"masterDefault"}]}]}),Ext.define("AM.view.Navigation",{extend:"Ext.toolbar.Toolbar",alias:"widget.navigation",addPersonalReportButton:function(){this.items.push({iconCls:"tasks-delete-task",disabled:!1,tooltip:"Personal Report",xtype:"button",text:"Report",action:"switchPersonalReport",pressed:!1,toggleGroup:this.id+"-nav-views"})},addOperationButton:function(){this.items.push({iconCls:"tasks-mark-complete",disabled:!1,tooltip:"Operation",xtype:"button",text:"Operation",action:"switchOperation",pressed:!0,toggleGroup:this.id+"-nav-views"})},addMasterButton:function(){this.items.push({iconCls:"tasks-mark-complete",disabled:!1,tooltip:"Master Data",xtype:"button",text:"Master",action:"switchMaster",pressed:!1,toggleGroup:this.id+"-nav-views",hidden:!0})},addCommonButton:function(){this.items.push("->"),this.items.push({text:"Options",itemId:"optionsMenu",text:"The email",menu:[{action:"editPassword",text:"Ganti Password",listeners:{click:function(){var e=Ext.widget("editPassword");e.show()}}}]}),this.items.push("-"),this.items.push({text:"Logout",action:"logoutUser"})},initComponent:function(){this.items=[],this.addPersonalReportButton(),this.addOperationButton(),this.addMasterButton(),this.addCommonButton(),this.callParent(arguments)}}),Ext.define("AM.view.OperationProcessPanel",{extend:"Ext.panel.Panel",alias:"widget.operationProcessPanel",layout:{type:"hbox",align:"stretch"},items:[{bodyPadding:5,xtype:"operationProcessList",flex:1},{flex:6,id:"operationWorksheetPanel",bodyPadding:0,layout:{type:"fit"},items:[{xtype:"operationDefault"}]}]}),Ext.define("AM.view.ProtectedContent",{extend:"Ext.panel.Panel",alias:"widget.protectedcontent",layout:{type:"vbox",align:"stretch"},items:[{xtype:"navigation"},{xtype:"content",flex:1}]}),Ext.define("AM.view.Viewport",{extend:"Ext.container.Viewport",alias:"widget.vp",layout:{type:"card"},items:[{xtype:"authform"},{xtype:"protectedcontent"}]}),Ext.define("AM.view.Worksheet",{extend:"Ext.Container",alias:"widget.worksheet",layout:{type:"fit"}}),Ext.define("AM.view.header.EditPassword",{extend:"Ext.window.Window",alias:"widget.editPassword",title:"Edit Password",modal:!0,layout:"fit",height:200,width:500,initComponent:function(){var e=this;Ext.apply(Ext.form.field.VTypes,{password:function(e,t){if(t.initialPassField){var i=t.up("form").down("#"+t.initialPassField);return e==i.getValue()}return!0},passwordText:"Passwords tidak sama."}),Ext.applyIf(e,{items:[{xtype:"form",url:"api/update_password",border:!1,bodyPadding:10,fieldDefaults:{msgTarget:"side",labelWidth:165},items:[{xtype:"textfield",allowBlank:!1,inputType:"password",fieldLabel:"Password Lama",name:"user[current_password]",anchor:"100%"},{xtype:"textfield",allowBlank:!1,inputType:"password",fieldLabel:"Password Baru",name:"user[password]",anchor:"100%"},{xtype:"textfield",inputType:"password",fieldLabel:"Ketik Ulang Password Baru",name:"user[password_confirmation]",vtype:"password",allowBlank:!1,anchor:"100%"},{xtype:"container",height:10},{xtype:"container",height:20,layout:{align:"stretch",type:"hbox"},items:[{xtype:"container",flex:1},{xtype:"button",text:"Simpan",action:"updatePassword",listeners:{click:function(){var t=e.down("form");t.getForm().isValid()&&(t.getForm().waitMsgTarget=e.getEl(),t.getForm().submit({method:"PUT",waitMsg:"Updating Password..",success:function(e,i){Ext.Msg.alert("Success",i.result.message,function(){t.getForm().reset()})},failure:function(e,t){Ext.MessageBox.show({title:"Fail",msg:t.result?t.result.message:"Kesalahan sistem, ulangi lagi.",buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR})}}))}}},{xtype:"container",width:5},{xtype:"button",height:20,width:60,text:"Batal",scope:this,handler:this.close}]}]}]}),e.callParent(arguments)}}),Ext.define("AM.view.master.CashBank",{extend:"AM.view.Worksheet",alias:"widget.cashbankProcess",items:[{xtype:"cashbanklist",flex:1}]}),Ext.define("AM.view.master.CashBankAdjustment",{extend:"AM.view.Worksheet",alias:"widget.cashbankadjustmentProcess",items:[{xtype:"cashbankadjustmentlist",flex:1}]}),Ext.define("AM.view.master.CashBankMutation",{extend:"AM.view.Worksheet",alias:"widget.cashbankmutationProcess",items:[{xtype:"cashbankmutationlist",flex:1}]}),Ext.define("AM.view.master.CashMutation",{extend:"AM.view.Worksheet",alias:"widget.cashmutationProcess",items:[{xtype:"cashmutationlist",flex:1}]}),Ext.define("AM.view.master.Contract",{extend:"AM.view.Worksheet",alias:"widget.contractProcess",layout:{type:"vbox",align:"stretch"},header:!1,headerAsText:!1,selectedParentId:null,items:[{xtype:"container",flex:3,layout:{type:"hbox",align:"stretch"},items:[{xtype:"mastercustomerList",flex:1},{xtype:"contractlist",flex:2}]},{xtype:"contractitemlist",flex:2}]}),Ext.define("AM.view.master.Customer",{extend:"AM.view.Worksheet",alias:"widget.customerProcess",items:[{xtype:"customerlist",flex:1}]}),Ext.define("AM.view.master.CustomerList",{extend:"Ext.grid.Panel",alias:"widget.mastercustomerList",store:"Customers",initComponent:function(){this.columns=[{xtype:"templatecolumn",text:"Customer",flex:1,tpl:"<b>{name}</b>"}],this.searchField=new Ext.form.field.Text({name:"searchField",hideLabel:!0,width:200,emptyText:"Search",checkChangeBuffer:300}),this.tbar=[this.searchField],this.bbar=Ext.create("Ext.PagingToolbar",{store:this.store,displayInfo:!0,displayMsg:"Displaying topics {0} - {1} of {2}",emptyMsg:"No topics to display"}),this.callParent(arguments)},loadMask:!0,getSelectedObject:function(){return this.getSelectionModel().getSelection()[0]},enableRecordButtons:function(){this.editObjectButton.enable(),this.deleteObjectButton.enable()},disableRecordButtons:function(){this.editObjectButton.disable(),this.deleteObjectButton.disable()
}}),Ext.define("AM.view.master.Default",{extend:"Ext.Container",alias:"widget.masterDefault",html:"Ini adalah tampilan master. Anda dapat Setup User dan JobCode"}),Ext.define("AM.view.master.Home",{extend:"AM.view.Worksheet",alias:"widget.homeProcess",items:[{xtype:"homelist",flex:1}]}),Ext.define("AM.view.master.HomeAssignment",{extend:"AM.view.Worksheet",alias:"widget.homeassignmentProcess",layout:{type:"hbox",align:"stretch"},header:!1,headerAsText:!1,selectedParentId:null,items:[{xtype:"masterhomeList",flex:1},{xtype:"homeassignmentlist",flex:2}]}),Ext.define("AM.view.master.HomeList",{extend:"Ext.grid.Panel",alias:"widget.masterhomeList",store:"Homes",initComponent:function(){this.columns=[{xtype:"templatecolumn",text:"Home",flex:1,tpl:"<b>{name}</b>"},{xtype:"templatecolumn",text:"Alamat",flex:1,tpl:"<b>{address}</b>"}],this.searchField=new Ext.form.field.Text({name:"searchField",hideLabel:!0,width:200,emptyText:"Search",checkChangeBuffer:300}),this.tbar=[this.searchField],this.bbar=Ext.create("Ext.PagingToolbar",{store:this.store,displayInfo:!0,displayMsg:"Displaying topics {0} - {1} of {2}",emptyMsg:"No topics to display"}),this.callParent(arguments)},loadMask:!0,getSelectedObject:function(){return this.getSelectionModel().getSelection()[0]},enableRecordButtons:function(){this.editObjectButton.enable(),this.deleteObjectButton.enable()},disableRecordButtons:function(){this.editObjectButton.disable(),this.deleteObjectButton.disable()}}),Ext.define("AM.view.master.HomeType",{extend:"AM.view.Worksheet",alias:"widget.hometypeProcess",items:[{xtype:"hometypelist",flex:1}]}),Ext.define("AM.view.master.Item",{extend:"AM.view.Worksheet",alias:"widget.itemProcess",layout:{type:"hbox",align:"stretch"},header:!1,headerAsText:!1,selectedParentId:null,items:[{xtype:"mastercustomerList",flex:1},{xtype:"itemlist",flex:2}]}),Ext.define("AM.view.master.ItemType",{extend:"AM.view.Worksheet",alias:"widget.typeProcess",items:[{xtype:"itemtypelist",flex:1}]}),Ext.define("AM.view.master.MasterProcessList",{extend:"Ext.tree.Panel",alias:"widget.masterProcessList",rootVisible:!1,cls:"examples-list",lines:!1,useArrows:!0,store:"Navigations"}),Ext.define("AM.view.master.User",{extend:"AM.view.Worksheet",alias:"widget.userProcess",items:[{xtype:"userlist",flex:1}]}),Ext.define("AM.view.master.Vendor",{extend:"AM.view.Worksheet",alias:"widget.vendorProcess",items:[{xtype:"vendorlist",flex:1}]}),Ext.define("AM.view.master.cashbank.Form",{extend:"Ext.window.Window",alias:"widget.cashbankform",title:"Add / Edit CashBank",layout:"fit",width:500,autoShow:!0,modal:!0,initComponent:function(){this.items=[{xtype:"form",msgTarget:"side",border:!1,bodyPadding:10,fieldDefaults:{labelWidth:165,anchor:"100%"},items:[{xtype:"hidden",name:"id",fieldLabel:"id"},{xtype:"textfield",name:"name",fieldLabel:"CashBank name"},{xtype:"textarea",name:"description",fieldLabel:"Deskripsi"},{xtype:"displayfield",name:"amount",fieldLabel:"Amount"},{fieldLabel:"Is Bank?",name:"is_bank",xtype:"checkbox"}]}],this.buttons=[{text:"Save",action:"save"},{text:"Cancel",scope:this,handler:this.close}],this.callParent(arguments)},setComboBoxData:function(){}}),Ext.define("AM.view.master.cashbank.List",{extend:"Ext.grid.Panel",alias:"widget.cashbanklist",store:"CashBanks",initComponent:function(){this.columns=[{header:"ID",dataIndex:"id"},{header:"Nama",dataIndex:"name",flex:1},{header:"Amount",dataIndex:"amount",flex:1},{header:"Deskripsi",dataIndex:"description",flex:1},{header:"Is Bank",dataIndex:"is_bank",flex:1}],this.addObjectButton=new Ext.Button({text:"Add CashBank",action:"addObject"}),this.editObjectButton=new Ext.Button({text:"Edit CashBank",action:"editObject",disabled:!0}),this.deleteObjectButton=new Ext.Button({text:"Delete CashBank",action:"deleteObject",disabled:!0}),this.searchField=new Ext.form.field.Text({name:"searchField",hideLabel:!0,width:200,emptyText:"Search",checkChangeBuffer:300}),this.tbar=[this.addObjectButton,this.editObjectButton,this.deleteObjectButton,this.searchField],this.bbar=Ext.create("Ext.PagingToolbar",{store:this.store,displayInfo:!0,displayMsg:"Displaying topics {0} - {1} of {2}",emptyMsg:"No topics to display"}),this.callParent(arguments)},loadMask:!0,getSelectedObject:function(){return this.getSelectionModel().getSelection()[0]},enableRecordButtons:function(){this.editObjectButton.enable(),this.deleteObjectButton.enable()},disableRecordButtons:function(){this.editObjectButton.disable(),this.deleteObjectButton.disable()}}),Ext.define("AM.view.master.cashbankadjustment.ConfirmForm",{extend:"Ext.window.Window",alias:"widget.confirmcashbankadjustmentform",title:"Confirm",layout:"fit",width:500,autoShow:!0,modal:!0,initComponent:function(){this.items=[{xtype:"form",msgTarget:"side",border:!1,bodyPadding:10,fieldDefaults:{labelWidth:165,anchor:"100%"},items:[{xtype:"hidden",name:"id",fieldLabel:"id"},{xtype:"displayfield",fieldLabel:"Code ",name:"code"},{xtype:"datefield",name:"confirmed_at",fieldLabel:"Tanggal Konfirmasi",format:"Y-m-d"}]}],this.buttons=[{text:"Confirm",action:"confirm"},{text:"Cancel",scope:this,handler:this.close}],this.callParent(arguments)},setParentData:function(e){this.down("form").getForm().findField("code").setValue(e.get("code"))}}),Ext.define("AM.view.master.cashbankadjustment.Form",{extend:"Ext.window.Window",alias:"widget.cashbankadjustmentform",title:"Add / Edit CashBankAdjustment",layout:"fit",width:500,autoShow:!0,modal:!0,initComponent:function(){var e=Ext.create(Ext.data.Store,{type:"array",storeId:"status_selector",fields:[{name:"status"},{name:"status_text"}],data:[{status:1,status_text:"Penambahan"},{status:2,status_text:"Pengurangan"}]}),t=Ext.create(Ext.data.JsonStore,{storeId:"type_search",fields:[{name:"cash_bank_name",mapping:"name"},{name:"cash_bank_id",mapping:"id"},{name:"cash_bank_amount",mapping:"amount"}],proxy:{type:"ajax",url:"api/search_cash_bank",reader:{type:"json",root:"records",totalProperty:"total"}},autoLoad:!1});this.items=[{xtype:"form",msgTarget:"side",border:!1,bodyPadding:10,fieldDefaults:{labelWidth:165,anchor:"100%"},items:[{xtype:"hidden",name:"id",fieldLabel:"id"},{fieldLabel:"CashBank",xtype:"combo",queryMode:"remote",forceSelection:!0,displayField:"cash_bank_name",valueField:"cash_bank_id",pageSize:5,minChars:1,allowBlank:!1,triggerAction:"all",store:t,listConfig:{getInnerTpl:function(){return'<div data-qtip="{cash_bank_name}"><div class="combo-name">{cash_bank_name}</div><div class="combo-name">{cash_bank_amount}</div>'}},name:"cash_bank_id"},{xtype:"numberfield",name:"amount",fieldLabel:"Amount"},{fieldLabel:"Status",xtype:"combo",queryMode:"remote",forceSelection:!0,displayField:"status_text",valueField:"status",pageSize:5,minChars:1,allowBlank:!1,triggerAction:"all",store:e,listConfig:{getInnerTpl:function(){return'<div data-qtip="{status_text}"><div class="combo-name">{status_text}</div></div>'}},name:"status"},{xtype:"datefield",name:"adjustment_date",fieldLabel:"Tanggal Adjust",format:"Y-m-d"},{xtype:"textarea",name:"description",fieldLabel:"Deskripsi"}]}],this.buttons=[{text:"Save",action:"save"},{text:"Cancel",scope:this,handler:this.close}],this.callParent(arguments)},setSelectedType:function(e){var t=this.down("form").getForm().findField("cash_bank_id"),i=this,a=t.store;a.load({params:{selected_id:e},callback:function(){i.setLoading(!1),t.setValue(e)}})},setSelectedStatus:function(e){var t=this.down("form").getForm().findField("status"),i=this,a=t.store;a.load({params:{selected_id:e},callback:function(){i.setLoading(!1),t.setValue(e)}})},setComboBoxData:function(e){var t=this;t.setLoading(!0),console.log(e.get("status")),t.setSelectedStatus(e.get("status")),t.setSelectedType(e.get("cash_bank_id"))}}),Ext.define("AM.view.master.cashbankadjustment.List",{extend:"Ext.grid.Panel",alias:"widget.cashbankadjustmentlist",store:"CashBankAdjustments",initComponent:function(){this.columns=[{header:"ID",dataIndex:"id"},{header:"Code",dataIndex:"code",flex:1},{header:"CashBank",dataIndex:"cash_bank_name",flex:1},{header:"Amount",dataIndex:"amount",flex:1},{header:"Status",dataIndex:"status_text",flex:1},{header:"Deskripsi",dataIndex:"description",flex:1},{header:"Konfirmasi",dataIndex:"is_confirmed",flex:1},{header:"Tanggal Konfirmasi",dataIndex:"confirmed_at",flex:1}],this.addObjectButton=new Ext.Button({text:"Add CashBankAdjustment",action:"addObject"}),this.editObjectButton=new Ext.Button({text:"Edit CashBankAdjustment",action:"editObject",disabled:!0}),this.deleteObjectButton=new Ext.Button({text:"Delete Payment Request",action:"deleteObject",disabled:!0}),this.confirmObjectButton=new Ext.Button({text:"Confirm CashBankAdjustment",action:"confirmObject",disabled:!0}),this.unconfirmObjectButton=new Ext.Button({text:"Unconfirm CashBankAdjustment",action:"unconfirmObject",disabled:!0,hidden:!0}),this.searchField=new Ext.form.field.Text({name:"searchField",hideLabel:!0,width:200,emptyText:"Search",checkChangeBuffer:300}),this.tbar=[this.addObjectButton,this.editObjectButton,this.confirmObjectButton,this.unconfirmObjectButton,this.deleteObjectButton,this.searchField],this.bbar=Ext.create("Ext.PagingToolbar",{store:this.store,displayInfo:!0,displayMsg:"Displaying topics {0} - {1} of {2}",emptyMsg:"No topics to display"}),this.callParent(arguments)},loadMask:!0,getSelectedObject:function(){return this.getSelectionModel().getSelection()[0]},enableRecordButtons:function(){this.editObjectButton.enable(),this.deleteObjectButton.enable(),this.confirmObjectButton.enable(),this.unconfirmObjectButton.enable(),selectedObject=this.getSelectedObject(),selectedObject&&1==selectedObject.get("is_confirmed")?(this.confirmObjectButton.hide(),this.unconfirmObjectButton.show()):(this.confirmObjectButton.show(),this.unconfirmObjectButton.hide())},disableRecordButtons:function(){this.editObjectButton.disable(),this.deleteObjectButton.disable(),this.confirmObjectButton.disable(),this.unconfirmObjectButton.disable()}}),Ext.define("AM.view.master.cashbankadjustment.UnconfirmForm",{extend:"Ext.window.Window",alias:"widget.unconfirmcashbankadjustmentform",title:"Unconfirm",layout:"fit",width:500,autoShow:!0,modal:!0,initComponent:function(){this.items=[{xtype:"form",msgTarget:"side",border:!1,bodyPadding:10,fieldDefaults:{labelWidth:165,anchor:"100%"},items:[{xtype:"hidden",name:"id",fieldLabel:"id"},{xtype:"displayfield",fieldLabel:"Code ",name:"code"}]}],this.buttons=[{text:"Unconfirm",action:"unconfirm"},{text:"Cancel",scope:this,handler:this.close}],this.callParent(arguments)},setParentData:function(e){this.down("form").getForm().findField("code").setValue(e.get("code"))}}),Ext.define("AM.view.master.cashbankmutation.ConfirmForm",{extend:"Ext.window.Window",alias:"widget.confirmcashbankmutationform",title:"Confirm",layout:"fit",width:500,autoShow:!0,modal:!0,initComponent:function(){this.items=[{xtype:"form",msgTarget:"side",border:!1,bodyPadding:10,fieldDefaults:{labelWidth:165,anchor:"100%"},items:[{xtype:"hidden",name:"id",fieldLabel:"id"},{xtype:"displayfield",fieldLabel:"Code ",name:"code"},{xtype:"datefield",name:"confirmed_at",fieldLabel:"Tanggal Konfirmasi",format:"Y-m-d"}]}],this.buttons=[{text:"Confirm",action:"confirm"},{text:"Cancel",scope:this,handler:this.close}],this.callParent(arguments)},setParentData:function(e){this.down("form").getForm().findField("code").setValue(e.get("code"))}}),Ext.define("AM.view.master.cashbankmutation.Form",{extend:"Ext.window.Window",alias:"widget.cashbankmutationform",title:"Add / Edit CashBankMutation",layout:"fit",width:500,autoShow:!0,modal:!0,initComponent:function(){var e=Ext.create(Ext.data.JsonStore,{storeId:"type_search",fields:[{name:"cash_bank_name",mapping:"name"},{name:"cash_bank_id",mapping:"id"},{name:"cash_bank_amount",mapping:"amount"}],proxy:{type:"ajax",url:"api/search_cash_bank",reader:{type:"json",root:"records",totalProperty:"total"}},autoLoad:!1}),t=Ext.create(Ext.data.JsonStore,{storeId:"type_search",fields:[{name:"cash_bank_name",mapping:"name"},{name:"cash_bank_id",mapping:"id"},{name:"cash_bank_amount",mapping:"amount"}],proxy:{type:"ajax",url:"api/search_cash_bank",reader:{type:"json",root:"records",totalProperty:"total"}},autoLoad:!1});this.items=[{xtype:"form",msgTarget:"side",border:!1,bodyPadding:10,fieldDefaults:{labelWidth:165,anchor:"100%"},items:[{xtype:"hidden",name:"id",fieldLabel:"id"},{xtype:"displayfield",name:"code",fieldLabel:"Code"},{fieldLabel:"Source CashBank",xtype:"combo",queryMode:"remote",forceSelection:!0,displayField:"cash_bank_name",valueField:"cash_bank_id",pageSize:5,minChars:1,allowBlank:!1,triggerAction:"all",store:t,listConfig:{getInnerTpl:function(){return'<div data-qtip="{cash_bank_name}"><div class="combo-name">{cash_bank_name}</div><div class="combo-name">{cash_bank_amount}</div>'}},name:"source_cash_bank_id"},{fieldLabel:"Target CashBank",xtype:"combo",queryMode:"remote",forceSelection:!0,displayField:"cash_bank_name",valueField:"cash_bank_id",pageSize:5,minChars:1,allowBlank:!1,triggerAction:"all",store:e,listConfig:{getInnerTpl:function(){return'<div data-qtip="{cash_bank_name}"><div class="combo-name">{cash_bank_name}</div><div class="combo-name">{cash_bank_amount}</div>'}},name:"target_cash_bank_id"},,{xtype:"numberfield",name:"amount",fieldLabel:"Amount"},{xtype:"datefield",name:"mutation_date",fieldLabel:"Tanggal Adjust",format:"Y-m-d"},{xtype:"textarea",name:"description",fieldLabel:"Deskripsi"}]}],this.buttons=[{text:"Save",action:"save"},{text:"Cancel",scope:this,handler:this.close}],this.callParent(arguments)},setSelectedType:function(e){var t=this.down("form").getForm().findField("source_cash_bank_id"),i=this,a=t.store;a.load({params:{selected_id:e},callback:function(){i.setLoading(!1),t.setValue(e)}})},setSelectedStatus:function(e){var t=this.down("form").getForm().findField("target_cash_bank_id"),i=this,a=t.store;a.load({params:{selected_id:e},callback:function(){i.setLoading(!1),t.setValue(e)}})},setComboBoxData:function(e){var t=this;t.setLoading(!0),console.log(e.get("status")),t.setSelectedStatus(e.get("target_cash_bank_id")),t.setSelectedType(e.get("source_cash_bank_id"))}}),Ext.define("AM.view.master.cashbankmutation.List",{extend:"Ext.grid.Panel",alias:"widget.cashbankmutationlist",store:"CashBankMutations",initComponent:function(){this.columns=[{header:"ID",dataIndex:"id"},{header:"Code",dataIndex:"code",flex:1},{header:"Source CashBank",dataIndex:"source_cash_bank_name",flex:1},{header:"Target CashBank",dataIndex:"target_cash_bank_name",flex:1},{header:"Amount",dataIndex:"amount",flex:1},{header:"Deskripsi",dataIndex:"description",flex:1},{header:"Konfirmasi",dataIndex:"is_confirmed",flex:1},{header:"Tanggal Konfirmasi",dataIndex:"confirmed_at",flex:1}],this.addObjectButton=new Ext.Button({text:"Add CashBankMutation",action:"addObject"}),this.editObjectButton=new Ext.Button({text:"Edit CashBankMutation",action:"editObject",disabled:!0}),this.deleteObjectButton=new Ext.Button({text:"Delete Payment Request",action:"deleteObject",disabled:!0}),this.confirmObjectButton=new Ext.Button({text:"Confirm CashBankMutation",action:"confirmObject",disabled:!0}),this.unconfirmObjectButton=new Ext.Button({text:"Unconfirm CashBankMutation",action:"unconfirmObject",disabled:!0,hidden:!0}),this.searchField=new Ext.form.field.Text({name:"searchField",hideLabel:!0,width:200,emptyText:"Search",checkChangeBuffer:300}),this.tbar=[this.addObjectButton,this.editObjectButton,this.confirmObjectButton,this.unconfirmObjectButton,this.deleteObjectButton,this.searchField],this.bbar=Ext.create("Ext.PagingToolbar",{store:this.store,displayInfo:!0,displayMsg:"Displaying topics {0} - {1} of {2}",emptyMsg:"No topics to display"}),this.callParent(arguments)},loadMask:!0,getSelectedObject:function(){return this.getSelectionModel().getSelection()[0]},enableRecordButtons:function(){this.editObjectButton.enable(),this.deleteObjectButton.enable(),this.confirmObjectButton.enable(),this.unconfirmObjectButton.enable(),selectedObject=this.getSelectedObject(),selectedObject&&1==selectedObject.get("is_confirmed")?(this.confirmObjectButton.hide(),this.unconfirmObjectButton.show()):(this.confirmObjectButton.show(),this.unconfirmObjectButton.hide())},disableRecordButtons:function(){this.editObjectButton.disable(),this.deleteObjectButton.disable(),this.confirmObjectButton.disable(),this.unconfirmObjectButton.disable()}}),Ext.define("AM.view.master.cashbankmutation.UnconfirmForm",{extend:"Ext.window.Window",alias:"widget.unconfirmcashbankmutationform",title:"Unconfirm",layout:"fit",width:500,autoShow:!0,modal:!0,initComponent:function(){this.items=[{xtype:"form",msgTarget:"side",border:!1,bodyPadding:10,fieldDefaults:{labelWidth:165,anchor:"100%"},items:[{xtype:"hidden",name:"id",fieldLabel:"id"},{xtype:"displayfield",fieldLabel:"Code ",name:"code"}]}],this.buttons=[{text:"Unconfirm",action:"unconfirm"},{text:"Cancel",scope:this,handler:this.close}],this.callParent(arguments)},setParentData:function(e){this.down("form").getForm().findField("code").setValue(e.get("code"))}}),Ext.define("AM.view.master.cashmutation.List",{extend:"Ext.grid.Panel",alias:"widget.cashmutationlist",store:"CashMutations",initComponent:function(){this.columns=[{header:"ID",dataIndex:"id"},{header:"Source",dataIndex:"source_class",flex:1},{header:"Source Code",dataIndex:"source_code",flex:1},{header:"CashBank",dataIndex:"cash_bank_name",flex:1},{header:"Amount",dataIndex:"amount",flex:1},{header:"status",dataIndex:"status_text",flex:1},{header:"Tanggal mutasi",dataIndex:"mutation_date",flex:1}],this.searchField=new Ext.form.field.Text({name:"searchField",hideLabel:!0,width:200,emptyText:"Search",checkChangeBuffer:300}),this.tbar=[this.searchField],this.bbar=Ext.create("Ext.PagingToolbar",{store:this.store,displayInfo:!0,displayMsg:"Displaying topics {0} - {1} of {2}",emptyMsg:"No topics to display"}),this.callParent(arguments)},loadMask:!0,getSelectedObject:function(){return this.getSelectionModel().getSelection()[0]},enableRecordButtons:function(){},disableRecordButtons:function(){}}),Ext.define("AM.view.master.contract.Form",{extend:"Ext.window.Window",alias:"widget.contractform",title:"Add / Edit Contract",layout:"fit",width:500,autoShow:!0,modal:!0,initComponent:function(){this.items=[{xtype:"form",msgTarget:"side",border:!1,bodyPadding:10,fieldDefaults:{labelWidth:165,anchor:"100%"},items:[{xtype:"hidden",name:"id",fieldLabel:"id"},{xtype:"hidden",name:"customer_id",fieldLabel:"Customer ID"},{xtype:"displayfield",fieldLabel:"Customer",name:"customer_name",value:"10"},{xtype:"displayfield",fieldLabel:"Code",name:"code",value:""},{xtype:"textfield",name:"name",fieldLabel:"Judul Kontrak"},{xtype:"textarea",name:"description",fieldLabel:"Deskripsi"},{xtype:"datefield",name:"started_at",fieldLabel:"Kontrak Mulai",format:"Y-m-d"},{xtype:"datefield",name:"finished_at",fieldLabel:"Kontrak Selesai",format:"Y-m-d"}]}],this.buttons=[{text:"Save",action:"save"},{text:"Cancel",scope:this,handler:this.close}],this.callParent(arguments)},setComboBoxData:function(){},setParentData:function(e){this.down("form").getForm().findField("customer_name").setValue(e.get("name")),this.down("form").getForm().findField("customer_id").setValue(e.get("id"))}}),Ext.define("AM.view.master.contract.List",{extend:"Ext.grid.Panel",alias:"widget.contractlist",store:"Contracts",initComponent:function(){this.columns=[{header:"Code",dataIndex:"code",flex:1},{header:"Name",dataIndex:"name",flex:1},{header:"Description",dataIndex:"description",flex:1},{header:"Start Date",dataIndex:"started_at",flex:1},{header:"Finish Date",dataIndex:"finished_at",flex:1}],this.addObjectButton=new Ext.Button({text:"Add",action:"addObject",disabled:!0}),this.editObjectButton=new Ext.Button({text:"Edit",action:"editObject",disabled:!0}),this.deleteObjectButton=new Ext.Button({text:"Delete",action:"deleteObject",disabled:!0}),this.deactivateObjectButton=new Ext.Button({text:"Deactivate",action:"deactivateObject",disabled:!0}),this.searchField=new Ext.form.field.Text({name:"searchField",hideLabel:!0,width:200,emptyText:"Search",checkChangeBuffer:300}),this.tbar=[this.addObjectButton,this.editObjectButton,this.deleteObjectButton,"-",this.deactivateObjectButton],this.bbar=Ext.create("Ext.PagingToolbar",{store:this.store,displayInfo:!0,displayMsg:"Displaying topics {0} - {1} of {2}",emptyMsg:"No topics to display"}),this.callParent(arguments)},loadMask:!0,getSelectedObject:function(){return this.getSelectionModel().getSelection()[0]},enableAddButton:function(){this.addObjectButton.enable()},disableAddButton:function(){this.addObjectButton.disable()},enableRecordButtons:function(){this.editObjectButton.enable(),this.deleteObjectButton.enable(),this.deactivateObjectButton.enable()},disableRecordButtons:function(){this.editObjectButton.disable(),this.deleteObjectButton.disable(),this.deactivateObjectButton.disable()}}),Ext.define("AM.view.master.contract.contractitem.Form",{extend:"Ext.window.Window",alias:"widget.contractitemform",title:"Add / Edit Contract",layout:"fit",width:500,autoShow:!0,modal:!0,initComponent:function(){var e=Ext.create(Ext.data.JsonStore,{storeId:"item_search",fields:[{name:"item_type_name",mapping:"type_name"},{name:"item_code",mapping:"code"},{name:"item_id",mapping:"id"}],proxy:{type:"ajax",url:"api/search_item",reader:{type:"json",root:"records",totalProperty:"total"}},autoLoad:!1});this.items=[{xtype:"form",msgTarget:"side",border:!1,bodyPadding:10,fieldDefaults:{labelWidth:165,anchor:"100%"},items:[{xtype:"hidden",name:"id",fieldLabel:"id"},{xtype:"hidden",name:"customer_id",fieldLabel:"Customer ID"},{xtype:"hidden",name:"contract_maintenance_id",fieldLabel:"Contract ID"},{xtype:"displayfield",fieldLabel:"Customer",name:"customer_name",value:"10"},{xtype:"displayfield",fieldLabel:"Contract",name:"contract_maintenance_code",value:"10"},{fieldLabel:"Item",xtype:"combo",queryMode:"remote",forceSelection:!0,displayField:"item_code",valueField:"item_id",pageSize:5,minChars:1,allowBlank:!1,triggerAction:"all",store:e,listConfig:{getInnerTpl:function(){return'<div data-qtip="{item_code}"><div class="combo-name">{item_type_name}</div><span>{item_code}</span></div>'}},name:"item_id"}]}],this.buttons=[{text:"Save",action:"save"},{text:"Cancel",scope:this,handler:this.close}],this.callParent(arguments)},setSelectedItem:function(e){var t=this.down("form").getForm().findField("item_id"),i=this,a=t.store;a.load({params:{selected_id:e},callback:function(){i.setLoading(!1),t.setValue(e)}})},setComboBoxData:function(e){var t=this;t.setLoading(!0),t.setSelectedItem(e.get("item_id"))},setParentData:function(e){this.down("form").getForm().findField("customer_id").setValue(e.get("customer_id")),this.down("form").getForm().findField("contract_maintenance_id").setValue(e.get("id")),this.down("form").getForm().findField("customer_name").setValue(e.get("customer_name")),this.down("form").getForm().findField("contract_maintenance_code").setValue(e.get("code"))}}),Ext.define("AM.view.master.contract.contractitem.List",{extend:"Ext.grid.Panel",alias:"widget.contractitemlist",store:"ContractItems",initComponent:function(){this.columns=[{header:"ID",dataIndex:"id"},{header:"Type",dataIndex:"item_type_name"},{header:"Item",dataIndex:"item_code"}],this.addObjectButton=new Ext.Button({text:"Add",action:"addObject",disabled:!0}),this.editObjectButton=new Ext.Button({text:"Edit",action:"editObject",disabled:!0}),this.deleteObjectButton=new Ext.Button({text:"Delete",action:"deleteObject",disabled:!0}),this.tbar=[this.addObjectButton,this.editObjectButton,this.deleteObjectButton],this.bbar=Ext.create("Ext.PagingToolbar",{store:this.store,displayInfo:!0,displayMsg:"{0} - {1} of {2}",emptyMsg:"0"}),this.callParent(arguments)},loadMask:!0,getSelectedObject:function(){return this.getSelectionModel().getSelection()[0]},enableRecordButtons:function(){this.editObjectButton.enable(),this.deleteObjectButton.enable()},disableRecordButtons:function(){this.editObjectButton.disable(),this.deleteObjectButton.disable()}}),Ext.define("AM.view.master.customer.Form",{extend:"Ext.window.Window",alias:"widget.customerform",title:"Add / Edit Customer",layout:"fit",width:500,autoShow:!0,modal:!0,initComponent:function(){this.items=[{xtype:"form",msgTarget:"side",border:!1,bodyPadding:10,fieldDefaults:{labelWidth:165,anchor:"100%"},items:[{xtype:"hidden",name:"id",fieldLabel:"id"},{xtype:"textfield",name:"name",fieldLabel:" Name PT Customer"},{xtype:"textfield",name:"address",fieldLabel:"Alamat"},{xtype:"textfield",name:"pic",fieldLabel:"Nama PIC"},{xtype:"textfield",name:"contact",fieldLabel:"Kontak PIC"},{xtype:"textfield",name:"email",fieldLabel:"Email PIC"}]}],this.buttons=[{text:"Save",action:"save"},{text:"Cancel",scope:this,handler:this.close}],this.callParent(arguments)},setComboBoxData:function(){}}),Ext.define("AM.view.master.customer.List",{extend:"Ext.grid.Panel",alias:"widget.customerlist",store:"Customers",initComponent:function(){this.columns=[{header:"ID",dataIndex:"id"},{header:"Nama",dataIndex:"name",flex:1},{header:"Email",dataIndex:"email",flex:1},{header:"Alamat",dataIndex:"address",flex:1},{header:"Contact",dataIndex:"contact",flex:1}],this.addObjectButton=new Ext.Button({text:"Add Customer",action:"addObject"}),this.editObjectButton=new Ext.Button({text:"Edit Customer",action:"editObject",disabled:!0}),this.deleteObjectButton=new Ext.Button({text:"Delete Customer",action:"deleteObject",disabled:!0}),this.searchField=new Ext.form.field.Text({name:"searchField",hideLabel:!0,width:200,emptyText:"Search",checkChangeBuffer:300}),this.tbar=[this.addObjectButton,this.editObjectButton,this.deleteObjectButton,this.searchField],this.bbar=Ext.create("Ext.PagingToolbar",{store:this.store,displayInfo:!0,displayMsg:"Displaying topics {0} - {1} of {2}",emptyMsg:"No topics to display"}),this.callParent(arguments)},loadMask:!0,getSelectedObject:function(){return this.getSelectionModel().getSelection()[0]},enableRecordButtons:function(){this.editObjectButton.enable(),this.deleteObjectButton.enable()},disableRecordButtons:function(){this.editObjectButton.disable(),this.deleteObjectButton.disable()}}),Ext.define("AM.view.master.home.Form",{extend:"Ext.window.Window",alias:"widget.homeform",title:"Add / Edit Home ",layout:"fit",width:500,autoShow:!0,modal:!0,initComponent:function(){var e=Ext.create(Ext.data.JsonStore,{storeId:"type_search",fields:[{name:"home_type_name",mapping:"name"},{name:"home_type_id",mapping:"id"}],proxy:{type:"ajax",url:"api/search_home_type",reader:{type:"json",root:"records",totalProperty:"total"}},autoLoad:!1});this.items=[{xtype:"form",msgTarget:"side",border:!1,bodyPadding:10,fieldDefaults:{labelWidth:165,anchor:"100%"},items:[{xtype:"hidden",name:"id",fieldLabel:"id"},{xtype:"textfield",name:"name",fieldLabel:"Home Name"},{xtype:"textarea",name:"address",fieldLabel:"Address"},{fieldLabel:"Home Type",xtype:"combo",queryMode:"remote",forceSelection:!0,displayField:"home_type_name",valueField:"home_type_id",pageSize:5,minChars:1,allowBlank:!1,triggerAction:"all",store:e,listConfig:{getInnerTpl:function(){return'<div data-qtip="{home_type_name}"><div class="combo-name">{home_type_name}</div></div>'}},name:"home_type_id"}]}],this.buttons=[{text:"Save",action:"save"},{text:"Cancel",scope:this,handler:this.close}],this.callParent(arguments)},setSelectedType:function(e){var t=this.down("form").getForm().findField("home_type_id"),i=this,a=t.store;a.load({params:{selected_id:e},callback:function(){i.setLoading(!1),t.setValue(e)}})},setComboBoxData:function(e){console.log("gonna set combo box data");var t=this;t.setLoading(!0),console.log(e.get("home_type_id")),t.setSelectedType(e.get("home_type_id"))}}),Ext.define("AM.view.master.home.List",{extend:"Ext.grid.Panel",alias:"widget.homelist",store:"Homes",initComponent:function(){this.columns=[{header:"ID",dataIndex:"id"},{header:"Nama",dataIndex:"name",flex:1},{header:"Alamat",dataIndex:"address",flex:1},{header:"Tipe",dataIndex:"home_type_name",flex:1},{header:"Deskripsi Tipe",dataIndex:"home_type_description",flex:1}],this.addObjectButton=new Ext.Button({text:"Add Home",action:"addObject"}),this.editObjectButton=new Ext.Button({text:"Edit Home",action:"editObject",disabled:!0}),this.deleteObjectButton=new Ext.Button({text:"Delete Home",action:"deleteObject",disabled:!0}),this.searchField=new Ext.form.field.Text({name:"searchField",hideLabel:!0,width:200,emptyText:"Search",checkChangeBuffer:300}),this.tbar=[this.addObjectButton,this.editObjectButton,this.deleteObjectButton,this.searchField],this.bbar=Ext.create("Ext.PagingToolbar",{store:this.store,displayInfo:!0,displayMsg:"Displaying topics {0} - {1} of {2}",emptyMsg:"No topics to display"}),this.callParent(arguments)},loadMask:!0,getSelectedObject:function(){return this.getSelectionModel().getSelection()[0]},enableRecordButtons:function(){this.editObjectButton.enable(),this.deleteObjectButton.enable()},disableRecordButtons:function(){this.editObjectButton.disable(),this.deleteObjectButton.disable()}}),Ext.define("AM.view.master.homeassignment.Form",{extend:"Ext.window.Window",alias:"widget.homeassignmentform",title:"Add / Edit Home ",layout:"fit",width:500,autoShow:!0,modal:!0,initComponent:function(){var e=Ext.create(Ext.data.JsonStore,{storeId:"type_search",fields:[{name:"user_name",mapping:"name"},{name:"user_id",mapping:"id"}],proxy:{type:"ajax",url:"api/search_user",reader:{type:"json",root:"records",totalProperty:"total"}},autoLoad:!1});this.items=[{xtype:"form",msgTarget:"side",border:!1,bodyPadding:10,fieldDefaults:{labelWidth:165,anchor:"100%"},items:[{xtype:"hidden",name:"id",fieldLabel:"id"},{xtype:"hidden",name:"home_id",fieldLabel:"Home ID"},{xtype:"displayfield",fieldLabel:"Home",name:"home_name",value:"10"},{fieldLabel:"User",xtype:"combo",queryMode:"remote",forceSelection:!0,displayField:"user_name",valueField:"user_id",pageSize:5,minChars:1,allowBlank:!1,triggerAction:"all",store:e,listConfig:{getInnerTpl:function(){return'<div data-qtip="{user_name}"><div class="combo-name">{user_name}</div></div>'}},name:"user_id"},{xtype:"datefield",name:"assignment_date",fieldLabel:"Tanggal Assignment",format:"Y-m-d"}]}],this.buttons=[{text:"Save",action:"save"},{text:"Cancel",scope:this,handler:this.close}],this.callParent(arguments)},setSelectedType:function(e){var t=this.down("form").getForm().findField("user_id"),i=this,a=t.store;a.load({params:{selected_id:e},callback:function(){i.setLoading(!1),t.setValue(e)}})},setComboBoxData:function(e){console.log("gonna set combo box data");var t=this;t.setLoading(!0),console.log(e.get("user_id")),t.setSelectedType(e.get("user_id"))},setParentData:function(e){this.down("form").getForm().findField("home_name").setValue(e.get("name")),this.down("form").getForm().findField("home_id").setValue(e.get("id"))}}),Ext.define("AM.view.master.homeassignment.List",{extend:"Ext.grid.Panel",alias:"widget.homeassignmentlist",store:"HomeAssignments",initComponent:function(){this.columns=[{header:"User Name",dataIndex:"user_name",flex:1},{header:"Assignment Date",dataIndex:"assignment_date",flex:1}],this.addObjectButton=new Ext.Button({text:"Add",action:"addObject",disabled:!0}),this.editObjectButton=new Ext.Button({text:"Edit",action:"editObject",disabled:!0}),this.deleteObjectButton=new Ext.Button({text:"Delete",action:"deleteObject",disabled:!0}),this.deactivateObjectButton=new Ext.Button({text:"Deactivate",action:"deactivateObject",disabled:!0}),this.searchField=new Ext.form.field.Text({name:"searchField",hideLabel:!0,width:200,emptyText:"Search",checkChangeBuffer:300}),this.tbar=[this.addObjectButton,this.editObjectButton,this.deleteObjectButton],this.bbar=Ext.create("Ext.PagingToolbar",{store:this.store,displayInfo:!0,displayMsg:"Displaying topics {0} - {1} of {2}",emptyMsg:"No topics to display"}),this.callParent(arguments)},loadMask:!0,getSelectedObject:function(){return this.getSelectionModel().getSelection()[0]},enableAddButton:function(){this.addObjectButton.enable()},disableAddButton:function(){this.addObjectButton.disable()},enableRecordButtons:function(){this.editObjectButton.enable(),this.deleteObjectButton.enable(),this.deactivateObjectButton.enable()},disableRecordButtons:function(){this.editObjectButton.disable(),this.deleteObjectButton.disable(),this.deactivateObjectButton.disable()}}),Ext.define("AM.view.master.hometype.Form",{extend:"Ext.window.Window",alias:"widget.hometypeform",title:"Add / Edit Home Type",layout:"fit",width:500,autoShow:!0,modal:!0,initComponent:function(){this.items=[{xtype:"form",msgTarget:"side",border:!1,bodyPadding:10,fieldDefaults:{labelWidth:165,anchor:"100%"},items:[{xtype:"hidden",name:"id",fieldLabel:"id"},{xtype:"textfield",name:"name",fieldLabel:"Tipe Home"},{xtype:"textarea",name:"description",fieldLabel:"Deskripsi"},{xtype:"textfield",name:"amount",fieldLabel:"Harga IPL bulanan"}]}],this.buttons=[{text:"Save",action:"save"},{text:"Cancel",scope:this,handler:this.close}],this.callParent(arguments)
},setComboBoxData:function(){}}),Ext.define("AM.view.master.hometype.List",{extend:"Ext.grid.Panel",alias:"widget.hometypelist",store:"HomeTypes",initComponent:function(){this.columns=[{header:"ID",dataIndex:"id"},{header:"Nama",dataIndex:"name",flex:1},{header:"Deskripsi",dataIndex:"description",flex:1},{header:"Harga",dataIndex:"amount",flex:1}],this.addObjectButton=new Ext.Button({text:"Add Type",action:"addObject"}),this.editObjectButton=new Ext.Button({text:"Edit Type",action:"editObject",disabled:!0}),this.deleteObjectButton=new Ext.Button({text:"Delete Type",action:"deleteObject",disabled:!0}),this.searchField=new Ext.form.field.Text({name:"searchField",hideLabel:!0,width:200,emptyText:"Search",checkChangeBuffer:300}),this.tbar=[this.addObjectButton,this.editObjectButton,this.deleteObjectButton,this.searchField],this.bbar=Ext.create("Ext.PagingToolbar",{store:this.store,displayInfo:!0,displayMsg:"Displaying topics {0} - {1} of {2}",emptyMsg:"No topics to display"}),this.callParent(arguments)},loadMask:!0,getSelectedObject:function(){return this.getSelectionModel().getSelection()[0]},enableRecordButtons:function(){this.editObjectButton.enable(),this.deleteObjectButton.enable()},disableRecordButtons:function(){this.editObjectButton.disable(),this.deleteObjectButton.disable()}}),Ext.define("AM.view.master.item.Form",{extend:"Ext.window.Window",alias:"widget.itemform",title:"Add / Edit Item",layout:"fit",width:500,autoShow:!0,modal:!0,initComponent:function(){var e=Ext.create(Ext.data.JsonStore,{storeId:"type_search",fields:[{name:"item_type_name",mapping:"name"},{name:"item_type_id",mapping:"id"}],proxy:{type:"ajax",url:"api/search_item_type",reader:{type:"json",root:"records",totalProperty:"total"}},autoLoad:!1});this.items=[{xtype:"form",msgTarget:"side",border:!1,bodyPadding:10,fieldDefaults:{labelWidth:165,anchor:"100%"},items:[{xtype:"hidden",name:"id",fieldLabel:"id"},{xtype:"hidden",name:"customer_id",fieldLabel:"Customer ID"},{xtype:"displayfield",fieldLabel:"Customer",name:"customer_name",value:"10"},{xtype:"displayfield",fieldLabel:"Code",name:"code",value:""},{fieldLabel:"Support Item Category",xtype:"combo",queryMode:"remote",forceSelection:!0,displayField:"item_type_name",valueField:"item_type_id",pageSize:5,minChars:1,allowBlank:!1,triggerAction:"all",store:e,listConfig:{getInnerTpl:function(){return'<div data-qtip="{item_type_name}"><div class="combo-name">{item_type_name}</div></div>'}},name:"item_type_id"},{xtype:"datefield",name:"manufactured_at",fieldLabel:"Tanggal Pembuatan",format:"Y-m-d"},{xtype:"datefield",name:"warranty_expiry_date",fieldLabel:"Tanggal Garansi Berakhir",format:"Y-m-d"},{xtype:"textarea",name:"description",fieldLabel:"Deskripsi"}]}],this.buttons=[{text:"Save",action:"save"},{text:"Cancel",scope:this,handler:this.close}],this.callParent(arguments)},setSelectedType:function(e){var t=this.down("form").getForm().findField("item_type_id"),i=this,a=t.store;a.load({params:{selected_id:e},callback:function(){i.setLoading(!1),t.setValue(e)}})},setComboBoxData:function(e){console.log("gonna set combo box data");var t=this;t.setLoading(!0),t.setSelectedType(e.get("item_type_id"))},setParentData:function(e){this.down("form").getForm().findField("customer_name").setValue(e.get("name")),this.down("form").getForm().findField("customer_id").setValue(e.get("id"))}}),Ext.define("AM.view.master.item.List",{extend:"Ext.grid.Panel",alias:"widget.itemlist",store:"Items",initComponent:function(){this.columns=[{header:"Code",dataIndex:"code",flex:1},{header:"Description",dataIndex:"description",flex:1},{header:"Manufactured",dataIndex:"manufactured_at",flex:1},{header:"Warranty Expiration Date",dataIndex:"warranty_expiry_date",flex:1}],this.addObjectButton=new Ext.Button({text:"Add",action:"addObject",disabled:!0}),this.editObjectButton=new Ext.Button({text:"Edit",action:"editObject",disabled:!0}),this.deleteObjectButton=new Ext.Button({text:"Delete",action:"deleteObject",disabled:!0}),this.deactivateObjectButton=new Ext.Button({text:"Deactivate",action:"deactivateObject",disabled:!0}),this.searchField=new Ext.form.field.Text({name:"searchField",hideLabel:!0,width:200,emptyText:"Search",checkChangeBuffer:300}),this.tbar=[this.addObjectButton,this.editObjectButton,this.deleteObjectButton,"-",this.deactivateObjectButton],this.bbar=Ext.create("Ext.PagingToolbar",{store:this.store,displayInfo:!0,displayMsg:"Displaying topics {0} - {1} of {2}",emptyMsg:"No topics to display"}),this.callParent(arguments)},loadMask:!0,getSelectedObject:function(){return this.getSelectionModel().getSelection()[0]},enableAddButton:function(){this.addObjectButton.enable()},disableAddButton:function(){this.addObjectButton.disable()},enableRecordButtons:function(){this.editObjectButton.enable(),this.deleteObjectButton.enable(),this.deactivateObjectButton.enable()},disableRecordButtons:function(){this.editObjectButton.disable(),this.deleteObjectButton.disable(),this.deactivateObjectButton.disable()}}),Ext.define("AM.view.master.itemtype.Form",{extend:"Ext.window.Window",alias:"widget.itemtypeform",title:"Add / Edit Type",layout:"fit",width:500,autoShow:!0,modal:!0,initComponent:function(){this.items=[{xtype:"form",msgTarget:"side",border:!1,bodyPadding:10,fieldDefaults:{labelWidth:165,anchor:"100%"},items:[{xtype:"hidden",name:"id",fieldLabel:"id"},{xtype:"textfield",name:"name",fieldLabel:"Tipe Item Support"},{xtype:"textfield",name:"description",fieldLabel:"Deskripsi"}]}],this.buttons=[{text:"Save",action:"save"},{text:"Cancel",scope:this,handler:this.close}],this.callParent(arguments)},setComboBoxData:function(){}}),Ext.define("AM.view.master.itemtype.List",{extend:"Ext.grid.Panel",alias:"widget.itemtypelist",store:"ItemTypes",initComponent:function(){this.columns=[{header:"ID",dataIndex:"id"},{header:"Nama",dataIndex:"name",flex:1},{header:"Deskripsi",dataIndex:"description",flex:1}],this.addObjectButton=new Ext.Button({text:"Add Type",action:"addObject"}),this.editObjectButton=new Ext.Button({text:"Edit Type",action:"editObject",disabled:!0}),this.deleteObjectButton=new Ext.Button({text:"Delete Type",action:"deleteObject",disabled:!0}),this.searchField=new Ext.form.field.Text({name:"searchField",hideLabel:!0,width:200,emptyText:"Search",checkChangeBuffer:300}),this.tbar=[this.addObjectButton,this.editObjectButton,this.deleteObjectButton,this.searchField],this.bbar=Ext.create("Ext.PagingToolbar",{store:this.store,displayInfo:!0,displayMsg:"Displaying topics {0} - {1} of {2}",emptyMsg:"No topics to display"}),this.callParent(arguments)},loadMask:!0,getSelectedObject:function(){return this.getSelectionModel().getSelection()[0]},enableRecordButtons:function(){this.editObjectButton.enable(),this.deleteObjectButton.enable()},disableRecordButtons:function(){this.editObjectButton.disable(),this.deleteObjectButton.disable()}}),Ext.define("AM.view.master.report.UserList",{extend:"Ext.grid.Panel",alias:"widget.masterreportuserList",store:"Users",initComponent:function(){this.columns=[{header:" Nama",dataIndex:"name",flex:1,sortable:!1},{header:" Email",dataIndex:"email",flex:1,sortable:!1}],this.bbar=Ext.create("Ext.PagingToolbar",{store:this.store,displayInfo:!0,displayMsg:"{0} - {1} of {2}",emptyMsg:"No Record"}),this.callParent(arguments)},loadMask:!0}),Ext.define("AM.view.master.report.employee.WorkCustomer",{extend:"Ext.Container",alias:"widget.masterreportemployeeWorkCustomerReport",layout:{type:"vbox",align:"stretch"},header:!1,headerAsText:!1,initComponent:function(){var e=this;this.items=[{xtype:"masterreportuserList",flex:2},e.buildChartInspect()],this.callParent(arguments)},buildChartInspect:function(){return{xtype:"chartInspect",chartStoreFields:["name","data1","id"],chartStoreUrl:"api/work_customer_reports",listXType:"workcustomerList",yAxisLabel:"Total Maintenance",xAxisLabel:"Customer",panelTitle:"Customer",flex:7,chartListWrapperXType:"masterreportemployeeWorkCustomerReport",autoChartLoad:!1}}}),Ext.define("AM.view.master.user.Form",{extend:"Ext.window.Window",alias:"widget.userform",title:"Add / Edit User",layout:"fit",width:500,autoShow:!0,modal:!0,initComponent:function(){var e=(Ext.create(Ext.data.Store,{type:"array",storeId:"user_status_search",fields:[{name:"job_status"},{name:"job_status_text"}],data:[{job_status:1,job_status_text:"Observer"},{job_status:2,job_status_text:"Worker"}]}),Ext.create(Ext.data.JsonStore,{storeId:"role_search",fields:[{name:"role_name",mapping:"name"},{name:"role_id",mapping:"id"}],proxy:{type:"ajax",url:"api/search_role",reader:{type:"json",root:"records",totalProperty:"total"}},autoLoad:!1}));this.items=[{xtype:"form",msgTarget:"side",border:!1,bodyPadding:10,fieldDefaults:{labelWidth:165,anchor:"100%"},items:[{xtype:"hidden",name:"id",fieldLabel:"id"},{xtype:"textfield",name:"name",fieldLabel:" Name anda"},{xtype:"textfield",name:"email",fieldLabel:"Email"},{fieldLabel:"Role",xtype:"combo",queryMode:"remote",forceSelection:!0,displayField:"role_name",valueField:"role_id",pageSize:5,minChars:1,allowBlank:!1,triggerAction:"all",store:e,listConfig:{getInnerTpl:function(){return'<div data-qtip="{role_name}"><div class="combo-name">{role_name}</div></div>'}},name:"role_id"}]}],this.buttons=[{text:"Save",action:"save"},{text:"Cancel",scope:this,handler:this.close}],this.callParent(arguments)},setComboBoxData:function(e){var t=e.get("role_id"),i=this.down("form").getForm().findField("role_id"),a=this,n=i.store;n.load({params:{selected_id:t},callback:function(){a.setLoading(!1),i.setValue(t)}})}}),Ext.define("AM.view.master.user.List",{extend:"Ext.grid.Panel",alias:"widget.userlist",store:"Users",initComponent:function(){this.columns=[{header:"ID",dataIndex:"id"},{header:"Nama",dataIndex:"name",flex:1},{header:"Email",dataIndex:"email",flex:1},{header:"Role",dataIndex:"role_name",flex:1}],this.addObjectButton=new Ext.Button({text:"Add User",action:"addObject"}),this.editObjectButton=new Ext.Button({text:"Edit User",action:"editObject",disabled:!0}),this.deleteObjectButton=new Ext.Button({text:"Delete User",action:"deleteObject",disabled:!0}),this.searchField=new Ext.form.field.Text({name:"searchField",hideLabel:!0,width:200,emptyText:"Search",checkChangeBuffer:300}),this.tbar=[this.addObjectButton,this.editObjectButton,this.deleteObjectButton,this.searchField],this.bbar=Ext.create("Ext.PagingToolbar",{store:this.store,displayInfo:!0,displayMsg:"Displaying topics {0} - {1} of {2}",emptyMsg:"No user to display"}),this.callParent(arguments)},loadMask:!0,getSelectedObject:function(){return this.getSelectionModel().getSelection()[0]},enableRecordButtons:function(){this.editObjectButton.enable(),this.deleteObjectButton.enable()},disableRecordButtons:function(){this.editObjectButton.disable(),this.deleteObjectButton.disable()}}),Ext.define("AM.view.master.vendor.Form",{extend:"Ext.window.Window",alias:"widget.vendorform",title:"Add / Edit Vendor",layout:"fit",width:500,autoShow:!0,modal:!0,initComponent:function(){this.items=[{xtype:"form",msgTarget:"side",border:!1,bodyPadding:10,fieldDefaults:{labelWidth:165,anchor:"100%"},items:[{xtype:"hidden",name:"id",fieldLabel:"id"},{xtype:"textfield",name:"name",fieldLabel:"Vendor name"},{xtype:"textfield",name:"address",fieldLabel:"Address"},{xtype:"textarea",name:"description",fieldLabel:"Deskripsi"}]}],this.buttons=[{text:"Save",action:"save"},{text:"Cancel",scope:this,handler:this.close}],this.callParent(arguments)},setComboBoxData:function(){}}),Ext.define("AM.view.master.vendor.List",{extend:"Ext.grid.Panel",alias:"widget.vendorlist",store:"Vendors",initComponent:function(){this.columns=[{header:"ID",dataIndex:"id"},{header:"Nama",dataIndex:"name",flex:1},{header:"Alamat",dataIndex:"address",flex:1},{header:"Deskripsi",dataIndex:"description",flex:1}],this.addObjectButton=new Ext.Button({text:"Add Vendor",action:"addObject"}),this.editObjectButton=new Ext.Button({text:"Edit Vendor",action:"editObject",disabled:!0}),this.deleteObjectButton=new Ext.Button({text:"Delete Vendor",action:"deleteObject",disabled:!0}),this.searchField=new Ext.form.field.Text({name:"searchField",hideLabel:!0,width:200,emptyText:"Search",checkChangeBuffer:300}),this.tbar=[this.addObjectButton,this.editObjectButton,this.deleteObjectButton,this.searchField],this.bbar=Ext.create("Ext.PagingToolbar",{store:this.store,displayInfo:!0,displayMsg:"Displaying topics {0} - {1} of {2}",emptyMsg:"No topics to display"}),this.callParent(arguments)},loadMask:!0,getSelectedObject:function(){return this.getSelectionModel().getSelection()[0]},enableRecordButtons:function(){this.editObjectButton.enable(),this.deleteObjectButton.enable()},disableRecordButtons:function(){this.editObjectButton.disable(),this.deleteObjectButton.disable()}}),Ext.define("AM.view.operation.AdvancedPayment",{extend:"AM.view.Worksheet",alias:"widget.homeProcess",items:[{xtype:"advancedpaymentlist",flex:1}]}),Ext.define("AM.view.operation.Default",{extend:"Ext.Container",alias:"widget.operationDefault",html:"Ini adalah tampilan operation. Anda dapat membuat scheduled maintenance dan emergency ticket"}),Ext.define("AM.view.operation.DepositDocument",{extend:"AM.view.Worksheet",alias:"widget.depositdocumentProcess",items:[{xtype:"depositdocumentlist",flex:1}]}),Ext.define("AM.view.operation.Invoice",{extend:"AM.view.Worksheet",alias:"widget.homeProcess",items:[{xtype:"invoicelist",flex:1}]}),Ext.define("AM.view.operation.Maintenance",{extend:"AM.view.Worksheet",alias:"widget.maintenanceProcess",layout:{type:"hbox",align:"stretch"},header:!1,headerAsText:!1,selectedParentId:null,items:[{xtype:"mastercustomerList",flex:1},{xtype:"maintenancelist",flex:5}]}),Ext.define("AM.view.operation.MaintenanceSchedule",{extend:"AM.view.Worksheet",alias:"widget.maintenancescheduleProcess",layout:{type:"hbox",align:"stretch"},items:[{xtype:"maintenanceschedulelist",flex:1},{xtype:"maintenancescheduleentrylist",flex:1}]}),Ext.define("AM.view.operation.MonthlyGenerator",{extend:"AM.view.Worksheet",alias:"widget.monthlygeneratorProcess",layout:{type:"hbox",align:"stretch"},header:!1,headerAsText:!1,selectedParentId:null,items:[{xtype:"monthlygeneratorlist",flex:1},{xtype:"monthlygeneratorinvoiceList",flex:1}]}),Ext.define("AM.view.operation.OperationProcessList",{extend:"Ext.tree.Panel",alias:"widget.operationProcessList",rootVisible:!1,cls:"examples-list",lines:!1,useArrows:!0,store:"Navigations"}),Ext.define("AM.view.operation.PaymentRequest",{extend:"AM.view.Worksheet",alias:"widget.paymentrequestProcess",items:[{xtype:"paymentrequestlist",flex:1}]}),Ext.define("AM.view.operation.PaymentVoucher",{extend:"AM.view.Worksheet",alias:"widget.paymentvoucherProcess",layout:{type:"hbox",align:"stretch"},header:!1,headerAsText:!1,selectedParentId:null,items:[{xtype:"paymentvoucherlist",flex:1},{xtype:"paymentvoucherdetaillist",flex:1}]}),Ext.define("AM.view.operation.ReceiptVoucher",{extend:"AM.view.Worksheet",alias:"widget.receiptvoucherProcess",items:[{xtype:"receiptvoucherlist",flex:1}]}),Ext.define("AM.view.operation.advancedpayment.ConfirmForm",{extend:"Ext.window.Window",alias:"widget.confirmadvancedpaymentform",title:"Confirm",layout:"fit",width:500,autoShow:!0,modal:!0,initComponent:function(){this.items=[{xtype:"form",msgTarget:"side",border:!1,bodyPadding:10,fieldDefaults:{labelWidth:165,anchor:"100%"},items:[{xtype:"hidden",name:"id",fieldLabel:"id"},{xtype:"displayfield",fieldLabel:"Code ",name:"code"},{xtype:"datefield",name:"confirmed_at",fieldLabel:"Tanggal Konfirmasi",format:"Y-m-d"}]}],this.buttons=[{text:"Confirm",action:"confirm"},{text:"Cancel",scope:this,handler:this.close}],this.callParent(arguments)},setParentData:function(e){this.down("form").getForm().findField("code").setValue(e.get("code"))}}),Ext.define("AM.view.operation.advancedpayment.Form",{extend:"Ext.window.Window",alias:"widget.advancedpaymentform",title:"Add / Edit AdvancedPayment ",layout:"fit",width:500,autoShow:!0,modal:!0,initComponent:function(){var e=Ext.create(Ext.data.JsonStore,{storeId:"type_search",fields:[{name:"home_name",mapping:"name"},{name:"home_id",mapping:"id"}],proxy:{type:"ajax",url:"api/search_home",reader:{type:"json",root:"records",totalProperty:"total"}},autoLoad:!1});this.items=[{xtype:"form",msgTarget:"side",border:!1,bodyPadding:10,fieldDefaults:{labelWidth:165,anchor:"100%"},items:[{xtype:"hidden",name:"id",fieldLabel:"id"},{xtype:"displayfield",name:"code",fieldLabel:"Code"},{fieldLabel:"Home",xtype:"combo",queryMode:"remote",forceSelection:!0,displayField:"home_name",valueField:"home_id",pageSize:5,minChars:1,allowBlank:!1,triggerAction:"all",store:e,listConfig:{getInnerTpl:function(){return'<div data-qtip="{home_name}"><div class="combo-name">{home_name}</div></div>'}},name:"home_id"},{xtype:"numberfield",name:"amount",fieldLabel:"Amount"},{xtype:"datefield",name:"start_date",fieldLabel:"Tanggal Mulai",format:"Y-m-d"},{xtype:"numberfield",name:"duration",fieldLabel:"Durasi(bulan)"},{xtype:"textarea",name:"description",fieldLabel:"Description"}]}],this.buttons=[{text:"Save",action:"save"},{text:"Cancel",scope:this,handler:this.close}],this.callParent(arguments)},setSelectedType:function(e){var t=this.down("form").getForm().findField("home_id"),i=this,a=t.store;a.load({params:{selected_id:e},callback:function(){i.setLoading(!1),t.setValue(e)}})},setComboBoxData:function(e){var t=this;t.setLoading(!0),t.setSelectedType(e.get("home_id"))}}),Ext.define("AM.view.operation.advancedpayment.List",{extend:"Ext.grid.Panel",alias:"widget.advancedpaymentlist",store:"AdvancedPayments",initComponent:function(){this.columns=[{header:"ID",dataIndex:"id"},{header:"Code",dataIndex:"code",flex:1},{header:"Home",dataIndex:"home_name",flex:1},{header:"Amount",dataIndex:"amount",flex:1},{header:"Deskripsi",dataIndex:"description",flex:1},{header:"Tanggal Mulai",dataIndex:"start_date",flex:1},{header:"Durasi(bulan)",dataIndex:"duration",flex:1},{header:"Konfirmasi",dataIndex:"is_confirmed",flex:1},{header:"Tanggal Konfirmasi",dataIndex:"confirmed_at",flex:1}],this.addObjectButton=new Ext.Button({text:"Add AdvancedPayment",action:"addObject"}),this.editObjectButton=new Ext.Button({text:"Edit AdvancedPayment",action:"editObject",disabled:!0}),this.deleteObjectButton=new Ext.Button({text:"Delete AdvancedPayment",action:"deleteObject",disabled:!0}),this.confirmObjectButton=new Ext.Button({text:"Confirm AdvancedPayment",action:"confirmObject",disabled:!0}),this.unconfirmObjectButton=new Ext.Button({text:"Unconfirm AdvancedPayment",action:"unconfirmObject",disabled:!0,hidden:!0}),this.searchField=new Ext.form.field.Text({name:"searchField",hideLabel:!0,width:200,emptyText:"Search",checkChangeBuffer:300}),this.tbar=[this.addObjectButton,this.editObjectButton,this.confirmObjectButton,this.unconfirmObjectButton,this.deleteObjectButton,this.searchField],this.bbar=Ext.create("Ext.PagingToolbar",{store:this.store,displayInfo:!0,displayMsg:"Displaying topics {0} - {1} of {2}",emptyMsg:"No topics to display"}),this.callParent(arguments)},loadMask:!0,getSelectedObject:function(){return this.getSelectionModel().getSelection()[0]},enableRecordButtons:function(){this.editObjectButton.enable(),this.deleteObjectButton.enable(),this.confirmObjectButton.enable(),this.unconfirmObjectButton.enable(),selectedObject=this.getSelectedObject(),selectedObject&&1==selectedObject.get("is_confirmed")?(this.confirmObjectButton.hide(),this.unconfirmObjectButton.show()):(this.confirmObjectButton.show(),this.unconfirmObjectButton.hide())},disableRecordButtons:function(){this.editObjectButton.disable(),this.deleteObjectButton.disable(),this.confirmObjectButton.disable(),this.unconfirmObjectButton.disable()}}),Ext.define("AM.view.operation.advancedpayment.UnconfirmForm",{extend:"Ext.window.Window",alias:"widget.unconfirmadvancedpaymentform",title:"Unconfirm",layout:"fit",width:500,autoShow:!0,modal:!0,initComponent:function(){this.items=[{xtype:"form",msgTarget:"side",border:!1,bodyPadding:10,fieldDefaults:{labelWidth:165,anchor:"100%"},items:[{xtype:"hidden",name:"id",fieldLabel:"id"},{xtype:"displayfield",fieldLabel:"Code ",name:"code"}]}],this.buttons=[{text:"Unconfirm",action:"unconfirm"},{text:"Cancel",scope:this,handler:this.close}],this.callParent(arguments)},setParentData:function(e){this.down("form").getForm().findField("code").setValue(e.get("code"))}}),Ext.define("AM.view.operation.depositdocument.ConfirmForm",{extend:"Ext.window.Window",alias:"widget.confirmdepositdocumentform",title:"Confirm",layout:"fit",width:500,autoShow:!0,modal:!0,initComponent:function(){this.items=[{xtype:"form",msgTarget:"side",border:!1,bodyPadding:10,fieldDefaults:{labelWidth:165,anchor:"100%"},items:[{xtype:"hidden",name:"id",fieldLabel:"id"},{xtype:"displayfield",fieldLabel:"Code ",name:"code"},{xtype:"datefield",name:"confirmed_at",fieldLabel:"Tanggal Konfirmasi",format:"Y-m-d"}]}],this.buttons=[{text:"Confirm",action:"confirm"},{text:"Cancel",scope:this,handler:this.close}],this.callParent(arguments)},setParentData:function(e){this.down("form").getForm().findField("code").setValue(e.get("code"))}}),Ext.define("AM.view.operation.depositdocument.FinishForm",{extend:"Ext.window.Window",alias:"widget.finishdepositdocumentform",title:"Finish",layout:"fit",width:500,autoShow:!0,modal:!0,initComponent:function(){this.items=[{xtype:"form",msgTarget:"side",border:!1,bodyPadding:10,fieldDefaults:{labelWidth:165,anchor:"100%"},items:[{xtype:"hidden",name:"id",fieldLabel:"id"},{xtype:"displayfield",fieldLabel:"Code ",name:"code"},{xtype:"displayfield",fieldLabel:"Amount Deposit ",name:"amount_deposit"},{xtype:"numberfield",name:"amount_charge",fieldLabel:"Amount Charge"}]}],this.buttons=[{text:"Finish",action:"finish"},{text:"Cancel",scope:this,handler:this.close}],this.callParent(arguments)},setParentData:function(e){this.down("form").getForm().findField("code").setValue(e.get("code")),this.down("form").getForm().findField("amount_deposit").setValue(e.get("amount_deposit"))}}),Ext.define("AM.view.operation.depositdocument.Form",{extend:"Ext.window.Window",alias:"widget.depositdocumentform",title:"Add / Edit DepositDocument ",layout:"fit",width:500,autoShow:!0,modal:!0,initComponent:function(){var e=Ext.create(Ext.data.JsonStore,{storeId:"home_search",fields:[{name:"home_name",mapping:"name"},{name:"home_id",mapping:"id"}],proxy:{type:"ajax",url:"api/search_home",reader:{type:"json",root:"records",totalProperty:"total"}},autoLoad:!1}),t=Ext.create(Ext.data.JsonStore,{storeId:"user_search",fields:[{name:"user_name",mapping:"name"},{name:"user_id",mapping:"id"}],proxy:{type:"ajax",url:"api/search_user",reader:{type:"json",root:"records",totalProperty:"total"}},autoLoad:!1});this.items=[{xtype:"form",msgTarget:"side",border:!1,bodyPadding:10,fieldDefaults:{labelWidth:165,anchor:"100%"},items:[{xtype:"hidden",name:"id",fieldLabel:"id"},{xtype:"displayfield",name:"code",fieldLabel:"Code"},{fieldLabel:"Home",xtype:"combo",queryMode:"remote",forceSelection:!0,displayField:"home_name",valueField:"home_id",pageSize:5,minChars:1,allowBlank:!1,triggerAction:"all",store:e,listConfig:{getInnerTpl:function(){return'<div data-qtip="{home_name}"><div class="combo-name">{home_name}</div></div>'}},name:"home_id"},{fieldLabel:"User",xtype:"combo",queryMode:"remote",forceSelection:!0,displayField:"user_name",valueField:"user_id",pageSize:5,minChars:1,allowBlank:!1,triggerAction:"all",store:t,listConfig:{getInnerTpl:function(){return'<div data-qtip="{user_name}"><div class="combo-name">{user_name}</div></div>'}},name:"user_id"},{xtype:"numberfield",name:"amount_deposit",fieldLabel:"Amount Deposit"},{xtype:"datefield",name:"deposit_date",fieldLabel:"Tanggal Deposit",format:"Y-m-d"},{xtype:"textarea",name:"description",fieldLabel:"Description"}]}],this.buttons=[{text:"Save",action:"save"},{text:"Cancel",scope:this,handler:this.close}],this.callParent(arguments)},setSelectedHome:function(e){var t=this.down("form").getForm().findField("home_id"),i=this,a=t.store;a.load({params:{selected_id:e},callback:function(){i.setLoading(!1),t.setValue(e)}})},setSelectedUser:function(e){var t=this.down("form").getForm().findField("user_id"),i=this,a=t.store;a.load({params:{selected_id:e},callback:function(){i.setLoading(!1),t.setValue(e)}})},setComboBoxData:function(e){var t=this;t.setLoading(!0),t.setSelectedUser(e.get("user_id")),t.setSelectedHome(e.get("home_id"))}}),Ext.define("AM.view.operation.depositdocument.List",{extend:"Ext.grid.Panel",alias:"widget.depositdocumentlist",store:"DepositDocuments",initComponent:function(){this.columns=[{header:"ID",dataIndex:"id"},{header:"Code",dataIndex:"code",flex:1},{header:"User",dataIndex:"user_name",flex:1},{header:"Home",dataIndex:"home_name",flex:1},{header:"Amount Deposit",dataIndex:"amount_deposit",flex:1},{header:"Amount Charge",dataIndex:"amount_charge",flex:1},{header:"Deskripsi",dataIndex:"description",flex:1},{header:"Tanggal Deposit",dataIndex:"deposit_date",flex:1},{header:"Konfirmasi",dataIndex:"is_confirmed",flex:1},{header:"Tanggal Konfirmasi",dataIndex:"confirmed_at",flex:1},{header:"Finish",dataIndex:"is_finished",flex:1},{header:"Tanggal Finish",dataIndex:"finished_at",flex:1}],this.addObjectButton=new Ext.Button({text:"Add DepositDocument",action:"addObject"}),this.editObjectButton=new Ext.Button({text:"Edit DepositDocument",action:"editObject",disabled:!0}),this.deleteObjectButton=new Ext.Button({text:"Delete DepositDocument",action:"deleteObject",disabled:!0}),this.confirmObjectButton=new Ext.Button({text:"Confirm DepositDocument",action:"confirmObject",disabled:!0}),this.unconfirmObjectButton=new Ext.Button({text:"Unconfirm DepositDocument",action:"unconfirmObject",disabled:!0,hidden:!0}),this.finishObjectButton=new Ext.Button({text:"Finish DepositDocument",action:"finishObject",disabled:!0}),this.unfinishObjectButton=new Ext.Button({text:"Unfinish DepositDocument",action:"unfinishObject",disabled:!0,hidden:!0}),this.searchField=new Ext.form.field.Text({name:"searchField",hideLabel:!0,width:200,emptyText:"Search",checkChangeBuffer:300}),this.tbar=[this.addObjectButton,this.editObjectButton,this.confirmObjectButton,this.unconfirmObjectButton,this.finishObjectButton,,this.unfinishObjectButton,this.deleteObjectButton,this.searchField],this.bbar=Ext.create("Ext.PagingToolbar",{store:this.store,displayInfo:!0,displayMsg:"Displaying topics {0} - {1} of {2}",emptyMsg:"No topics to display"}),this.callParent(arguments)},loadMask:!0,getSelectedObject:function(){return this.getSelectionModel().getSelection()[0]},enableRecordButtons:function(){this.editObjectButton.enable(),this.deleteObjectButton.enable(),this.confirmObjectButton.enable(),this.unconfirmObjectButton.enable(),this.finishObjectButton.enable(),this.unfinishObjectButton.enable(),selectedObject=this.getSelectedObject(),selectedObject&&1==selectedObject.get("is_confirmed")?(this.confirmObjectButton.hide(),this.unconfirmObjectButton.show()):(this.confirmObjectButton.show(),this.unconfirmObjectButton.hide()),selectedObject&&1==selectedObject.get("is_finished")?(this.finishObjectButton.hide(),this.unfinishObjectButton.show()):(this.finishObjectButton.show(),this.unfinishObjectButton.hide())},disableRecordButtons:function(){this.editObjectButton.disable(),this.deleteObjectButton.disable(),this.confirmObjectButton.disable(),this.unconfirmObjectButton.disable(),this.finishObjectButton.disable(),this.unfinishObjectButton.disable()}}),Ext.define("AM.view.operation.depositdocument.UnconfirmForm",{extend:"Ext.window.Window",alias:"widget.unconfirmdepositdocumentform",title:"Unconfirm",layout:"fit",width:500,autoShow:!0,modal:!0,initComponent:function(){this.items=[{xtype:"form",msgTarget:"side",border:!1,bodyPadding:10,fieldDefaults:{labelWidth:165,anchor:"100%"},items:[{xtype:"hidden",name:"id",fieldLabel:"id"},{xtype:"displayfield",fieldLabel:"Code ",name:"code"}]}],this.buttons=[{text:"Unconfirm",action:"unconfirm"},{text:"Cancel",scope:this,handler:this.close}],this.callParent(arguments)},setParentData:function(e){this.down("form").getForm().findField("code").setValue(e.get("code"))}}),Ext.define("AM.view.operation.depositdocument.UnfinishForm",{extend:"Ext.window.Window",alias:"widget.unfinishdepositdocumentform",title:"Unfinish",layout:"fit",width:500,autoShow:!0,modal:!0,initComponent:function(){this.items=[{xtype:"form",msgTarget:"side",border:!1,bodyPadding:10,fieldDefaults:{labelWidth:165,anchor:"100%"},items:[{xtype:"hidden",name:"id",fieldLabel:"id"},{xtype:"displayfield",fieldLabel:"Code ",name:"code"}]}],this.buttons=[{text:"Unfinish",action:"unfinish"},{text:"Cancel",scope:this,handler:this.close}],this.callParent(arguments)},setParentData:function(e){this.down("form").getForm().findField("code").setValue(e.get("code"))}}),Ext.define("AM.view.operation.invoice.List",{extend:"Ext.grid.Panel",alias:"widget.invoicelist",store:"Invoices",initComponent:function(){this.columns=[{header:"ID",dataIndex:"id"},{header:"Code",dataIndex:"code",flex:1},{header:"Source",dataIndex:"source_class",flex:1},{header:"Source Code",dataIndex:"source_code",flex:1},{header:"Home",dataIndex:"home_name",flex:1},{header:"Amount",dataIndex:"amount",flex:1},{header:"Deskripsi",dataIndex:"description",flex:1},{header:"Tanggal Invoice",dataIndex:"invoice_date",flex:1},{header:"Due Date",dataIndex:"due_date",flex:1},{header:"Konfirmasi",dataIndex:"is_confirmed",flex:1},{header:"Tanggal Konfirmasi",dataIndex:"confirmed_at",flex:1}],this.searchField=new Ext.form.field.Text({name:"searchField",hideLabel:!0,width:200,emptyText:"Search",checkChangeBuffer:300}),this.tbar=[this.addObjectButton,this.editObjectButton,this.confirmObjectButton,this.unconfirmObjectButton,this.deleteObjectButton,this.searchField],this.bbar=Ext.create("Ext.PagingToolbar",{store:this.store,displayInfo:!0,displayMsg:"Displaying topics {0} - {1} of {2}",emptyMsg:"No topics to display"}),this.callParent(arguments)},loadMask:!0,getSelectedObject:function(){return this.getSelectionModel().getSelection()[0]},enableRecordButtons:function(){},disableRecordButtons:function(){}}),Ext.define("AM.view.operation.maintenance.DiagnoseForm",{extend:"Ext.window.Window",alias:"widget.diagnosemaintenanceform",title:"Diagnose",layout:"fit",width:500,autoShow:!0,modal:!0,initComponent:function(){var e=Ext.create(Ext.data.Store,{type:"array",storeId:"diagnosis_case_selector",fields:[{name:"diagnosis_case"},{name:"diagnosis_case_text"}],data:[{diagnosis_case:1,diagnosis_case_text:"OK"},{diagnosis_case:2,diagnosis_case_text:"Butuh Perbaikan"},{diagnosis_case:3,diagnosis_case_text:"Butuh Penggantian"}]});this.items=[{xtype:"form",msgTarget:"side",border:!1,bodyPadding:10,fieldDefaults:{labelWidth:165,anchor:"100%"},items:[{xtype:"displayfield",fieldLabel:"Maintenance ",name:"code"},{xtype:"displayfield",fieldLabel:"Item",name:"item_code"},{xtype:"customdatetimefield",name:"diagnosis_date",fieldLabel:" Waktu complaint",dateCfg:{format:"Y-m-d"},timeCfg:{increment:15}},{fieldLabel:"Kasus Diagnosa",xtype:"combo",queryMode:"remote",forceSelection:!0,displayField:"diagnosis_case_text",valueField:"diagnosis_case",pageSize:5,minChars:1,allowBlank:!1,triggerAction:"all",store:e,listConfig:{getInnerTpl:function(){return'<div data-qtip="{diagnosis_case_text}"><div class="combo-name">{diagnosis_case_text}</div></div>'}},name:"diagnosis_case"},{xtype:"textarea",name:"diagnosis",fieldLabel:"Detail Diagnosa"}]}],this.buttons=[{text:"Diagnose",action:"confirmDiagnose"},{text:"Cancel",scope:this,handler:this.close}],this.callParent(arguments)},setParentData:function(e){this.down("form").getForm().findField("code").setValue(e.get("code")),this.down("form").getForm().findField("item_code").setValue(e.get("item_code"))}}),Ext.define("AM.view.operation.maintenance.Form",{extend:"Ext.window.Window",alias:"widget.maintenanceform",title:"Add / Edit Maintenance",layout:"fit",width:500,autoShow:!0,modal:!0,initComponent:function(){var e=Ext.create(Ext.data.Store,{type:"array",storeId:"complaint_case_selector",fields:[{name:"complaint_case"},{name:"complaint_case_text"}],data:[{complaint_case:1,complaint_case_text:"Scheduled"},{complaint_case:2,complaint_case_text:"Emergency"}]}),t=Ext.create(Ext.data.JsonStore,{storeId:"item_search",fields:[{name:"item_code",mapping:"code"},{name:"item_description",mapping:"description"},{name:"item_id",mapping:"id"},{name:"type_name",mapping:"type_name"}],proxy:{extraParams:{parent_id:null},type:"ajax",url:"api/search_item",reader:{type:"json",root:"records",totalProperty:"total"}},autoLoad:!1}),i=Ext.create(Ext.data.JsonStore,{storeId:"user_search",fields:[{name:"user_name",mapping:"name"},{name:"user_id",mapping:"id"}],proxy:{type:"ajax",url:"api/search_user",reader:{type:"json",root:"records",totalProperty:"total"}},autoLoad:!1});this.items=[{xtype:"form",msgTarget:"side",border:!1,bodyPadding:10,fieldDefaults:{labelWidth:165,anchor:"100%"},items:[{xtype:"hidden",name:"id",fieldLabel:"id"},{xtype:"displayfield",name:"customer_name",fieldLabel:"Customer"},{xtype:"hidden",name:"customer_id",fieldLabel:"Customer Id"},{xtype:"customdatetimefield",name:"complaint_date",fieldLabel:" Waktu complaint",dateCfg:{format:"Y-m-d"},timeCfg:{increment:15}},{fieldLabel:"Kasus Complaint",xtype:"combo",queryMode:"remote",forceSelection:!0,displayField:"complaint_case_text",valueField:"complaint_case",pageSize:5,minChars:1,allowBlank:!1,triggerAction:"all",store:e,listConfig:{getInnerTpl:function(){return'<div data-qtip="{complaint_case_text}"><div class="combo-name">{complaint_case_text}</div></div>'
}},name:"complaint_case"},{xtype:"textarea",name:"complaint",fieldLabel:"Detail Complaint"},{fieldLabel:"Karyawan Pelaksana",xtype:"combo",queryMode:"remote",forceSelection:!0,displayField:"user_name",valueField:"user_id",pageSize:5,minChars:1,allowBlank:!1,triggerAction:"all",store:i,listConfig:{getInnerTpl:function(){return'<div data-qtip="{user_name}"><div class="combo-name">{user_name}</div></div>'}},name:"user_id"},{fieldLabel:"Item",xtype:"combo",queryMode:"remote",forceSelection:!0,displayField:"item_code",valueField:"item_id",pageSize:5,minChars:1,allowBlank:!1,triggerAction:"all",store:t,listConfig:{getInnerTpl:function(){return'<div data-qtip="{item_code}"><div class="combo-name">{type_name} | {item_code}</div><div class="combo-name">{item_description}</div></div>'}},name:"item_id"}]}],this.buttons=[{text:"Save",action:"save"},{text:"Cancel",scope:this,handler:this.close}],this.callParent(arguments)},setSelectedItem:function(e){var t=this.down("form").getForm().findField("item_id"),i=this,a=t.store;a.load({params:{selected_id:e},callback:function(){i.setLoading(!1),t.setValue(e)}})},setSelectedUser:function(e){var t=this.down("form").getForm().findField("user_id"),i=this,a=t.store;a.load({params:{selected_id:e},callback:function(){i.setLoading(!1),t.setValue(e)}})},setComboBoxExtraParams:function(e){var t=this;t.setExtraParamInItemComboBox(e)},setComboBoxData:function(e){var t=this;t.setLoading(!0),t.setSelectedItem(e.get("item_id")),t.setSelectedUser(e.get("user_id"))},setParentData:function(e){this.down("form").getForm().findField("customer_name").setValue(e.get("name")),this.down("form").getForm().findField("customer_id").setValue(e.get("id"))}}),Ext.define("AM.view.operation.maintenance.List",{extend:"Ext.grid.Panel",alias:"widget.maintenancelist",store:"Maintenances",initComponent:function(){this.columns=[{xtype:"templatecolumn",text:"Info",flex:1,tpl:"Item: <b>{item_code}</b><br /><br />Staff:<br /> <b>{user_name}</b><br /><br />Maintenance Code:<br /> <b>{code}</b><br /><br />"},{xtype:"templatecolumn",text:"Complaint",flex:2,tpl:"<b>{complaint_case_text}</b><br /><br />Complaint Date:<br /> <b>{complaint_date}</b><br /><br />Complaint:<br />{complaint}"},{xtype:"templatecolumn",text:"Inspection",flex:2,tpl:"<b>{diagnosis_case_text}</b><br /><br />Inspection Date:<br /> <b>{diagnosis_date}</b><br /><br />Diagnosis:<br />{diagnosis}<br /><br />"},{xtype:"templatecolumn",text:"Solution",flex:2,tpl:"<b>{solution_case_text}</b><br /><br />Solution Date:<br /> <b>{solution_date}</b><br /><br />Solution:<br />{diagnosis}<br /><br />"}],this.addObjectButton=new Ext.Button({text:"Add",action:"addObject"}),this.editObjectButton=new Ext.Button({text:"Edit",action:"editObject",disabled:!0}),this.deleteObjectButton=new Ext.Button({text:"Delete",action:"deleteObject",disabled:!0}),this.diagnoseObjectButton=new Ext.Button({text:"Diagnose",action:"diagnoseObject",disabled:!0}),this.undiagnoseObjectButton=new Ext.Button({text:"Undiagnose",action:"undiagnoseObject",disabled:!0,hidden:!0}),this.solveObjectButton=new Ext.Button({text:"Solve",action:"solveObject",disabled:!0}),this.unsolveObjectButton=new Ext.Button({text:"Unsolve",action:"unsolveObject",disabled:!0,hidden:!0}),this.confirmObjectButton=new Ext.Button({text:"Confirm",action:"confirmObject",disabled:!0}),this.unconfirmObjectButton=new Ext.Button({text:"Unconfirm",action:"unconfirmObject",disabled:!0,hidden:!0}),this.searchField=new Ext.form.field.Text({name:"searchField",hideLabel:!0,width:200,emptyText:"Search",checkChangeBuffer:300}),this.tbar=[this.addObjectButton,this.editObjectButton,this.deleteObjectButton,this.diagnoseObjectButton,this.undiagnoseObjectButton,this.solveObjectButton,this.unsolveObjectButton,"->",this.searchField],this.bbar=Ext.create("Ext.PagingToolbar",{store:this.store,displayInfo:!0,displayMsg:"Displaying topics {0} - {1} of {2}",emptyMsg:"No topics to display"}),this.callParent(arguments)},loadMask:!0,getSelectedObject:function(){return this.getSelectionModel().getSelection()[0]},enableRecordButtons:function(){this.editObjectButton.enable(),this.deleteObjectButton.enable(),this.diagnoseObjectButton.enable(),this.undiagnoseObjectButton.enable(),this.solveObjectButton.enable(),this.unsolveObjectButton.enable(),this.confirmObjectButton.enable(),this.unconfirmObjectButton.enable(),selectedObject=this.getSelectedObject(),selectedObject&&1==selectedObject.get("is_diagnosed")?(this.diagnoseObjectButton.hide(),this.undiagnoseObjectButton.show()):(this.diagnoseObjectButton.show(),this.undiagnoseObjectButton.hide()),selectedObject&&1==selectedObject.get("is_solved")?(this.solveObjectButton.hide(),this.unsolveObjectButton.show()):(this.solveObjectButton.show(),this.unsolveObjectButton.hide())},disableRecordButtons:function(){this.editObjectButton.disable(),this.deleteObjectButton.disable(),this.diagnoseObjectButton.disable(),this.undiagnoseObjectButton.disable(),this.solveObjectButton.disable(),this.unsolveObjectButton.disable(),this.confirmObjectButton.disable(),this.unconfirmObjectButton.disable()},enableAddButton:function(){this.addObjectButton.enable()},disableAddButton:function(){this.addObjectButton.disable()}}),Ext.define("AM.view.operation.maintenance.SolveForm",{extend:"Ext.window.Window",alias:"widget.solvemaintenanceform",title:"Solve",layout:"fit",width:500,autoShow:!0,modal:!0,initComponent:function(){var e=Ext.create(Ext.data.Store,{type:"array",storeId:"solve_case_selector",fields:[{name:"solution_case"},{name:"solution_case_text"}],data:[{solution_case:1,solution_case_text:"No Action"},{solution_case:2,solution_case_text:"Pending"},{solution_case:3,solution_case_text:"Solved"}]});this.items=[{xtype:"form",msgTarget:"side",border:!1,bodyPadding:10,fieldDefaults:{labelWidth:165,anchor:"100%"},items:[{xtype:"displayfield",fieldLabel:"Maintenance ",name:"code"},{xtype:"displayfield",fieldLabel:"Item",name:"item_code"},{xtype:"customdatetimefield",name:"solution_date",fieldLabel:" Waktu solusi",dateCfg:{format:"Y-m-d"},timeCfg:{increment:15}},{fieldLabel:"Kasus Solusi",xtype:"combo",queryMode:"remote",forceSelection:!0,displayField:"solution_case_text",valueField:"solution_case",pageSize:5,minChars:1,allowBlank:!1,triggerAction:"all",store:e,listConfig:{getInnerTpl:function(){return'<div data-qtip="{solution_case_text}"><div class="combo-name">{solution_case_text}</div></div>'}},name:"solution_case"},{xtype:"textarea",name:"solution",fieldLabel:"Detail Solusi"}]}],this.buttons=[{text:"Solve",action:"confirmSolve"},{text:"Cancel",scope:this,handler:this.close}],this.callParent(arguments)},setParentData:function(e){this.down("form").getForm().findField("code").setValue(e.get("code")),this.down("form").getForm().findField("item_code").setValue(e.get("item_code"))}}),Ext.define("AM.view.operation.maintenanceschedule.Form",{extend:"Ext.window.Window",alias:"widget.maintenancescheduleform",title:"Add / Edit ",layout:"fit",width:500,autoShow:!0,modal:!0,initComponent:function(){var e=Ext.create(Ext.data.JsonStore,{storeId:"customer_search",fields:[{name:"customer_id",mapping:"id"},{name:"customer_name",mapping:"name"}],proxy:{type:"ajax",url:"api/search_customer",reader:{type:"json",root:"records",totalProperty:"total"}},autoLoad:!1});this.items=[{xtype:"form",msgTarget:"side",border:!1,bodyPadding:10,fieldDefaults:{labelWidth:165,anchor:"100%"},items:[{xtype:"hidden",name:"id",fieldLabel:"id"},{fieldLabel:" Customer ",xtype:"combo",queryMode:"remote",forceSelection:!0,displayField:"customer_name",valueField:"customer_id",pageSize:5,minChars:1,allowBlank:!1,triggerAction:"all",store:e,listConfig:{getInnerTpl:function(){return'<div data-qtip="{customer_name}"><div class="combo-name">{customer_name}</div></div>'}},name:"customer_id"},{xtype:"datefield",fieldLabel:"Tanggal Penerimaan",name:"receival_date",format:"d/m/Y"}]}],this.buttons=[{text:"Save",action:"save"},{text:"Cancel",scope:this,handler:this.close}],this.callParent(arguments)},setComboBoxData:function(e){var t=this;t.setLoading(!0);var i=this.down("form").getForm().findField("customer_id"),a=e.get("customer_id"),n=i.store;n.load({params:{selected_id:a},callback:function(){t.setLoading(!1),i.setValue(a)}})}}),Ext.define("AM.view.operation.maintenanceschedule.List",{extend:"Ext.grid.Panel",alias:"widget.maintenanceschedulelist",store:"MaintenanceSchedules",initComponent:function(){this.columns=[{header:"ID",dataIndex:"id"},{header:"Code",dataIndex:"code",flex:1,sortable:!1},{header:"Customer",dataIndex:"customer_name",flex:1,sortable:!1},{header:"Confirmed?",dataIndex:"is_confirmed",flex:1,sortable:!1}],this.addObjectButton=new Ext.Button({text:"Add ",action:"addObject"}),this.editObjectButton=new Ext.Button({text:"Edit ",action:"editObject",disabled:!0}),this.deleteObjectButton=new Ext.Button({text:"Delete ",action:"deleteObject",disabled:!0}),this.confirmObjectButton=new Ext.Button({text:"Confirm",action:"confirmObject",disabled:!0}),this.tbar=[this.addObjectButton,this.editObjectButton,this.deleteObjectButton,this.confirmObjectButton],this.bbar=Ext.create("Ext.PagingToolbar",{store:this.store,displayInfo:!0,displayMsg:"Displaying topics {0} - {1} of {2}",emptyMsg:"No topics to display"}),this.callParent(arguments)},loadMask:!0,getSelectedObject:function(){return this.getSelectionModel().getSelection()[0]},enableRecordButtons:function(){this.editObjectButton.enable(),this.deleteObjectButton.enable(),this.confirmObjectButton.enable()},disableRecordButtons:function(){this.editObjectButton.disable(),this.deleteObjectButton.disable(),this.confirmObjectButton.disable()}}),Ext.define("AM.view.operation.maintenancescheduledetail.Form",{extend:"Ext.window.Window",alias:"widget.maintenancescheduledetailform",title:"Add / Edit Entry",layout:"fit",width:500,autoShow:!0,modal:!0,parentRecord:null,constructor:function(e){this.parentRecord=e.parentRecord,this.callParent(arguments)},initComponent:function(){if(this.parentRecord){{var e=Ext.create(Ext.data.JsonStore,{storeId:"sales_item_search",fields:[{name:"sales_item_id",mapping:"id"},{name:"sales_item_name",mapping:"name"},{name:"sales_item_code",mapping:"code"},{name:"ready_production",mapping:"ready_production"},{name:"ready_post_production",mapping:"ready_post_production"}],proxy:{type:"ajax",url:"api/search_sales_items",extraParams:{customer_id:this.parentRecord.get("customer_id"),only_post_production:!0},reader:{type:"json",root:"records",totalProperty:"total"}}});Ext.create(Ext.data.JsonStore,{storeId:"delivery_entry_item_condition",fields:[{name:"value",mapping:"value"},{name:"text",mapping:"text"}],proxy:{type:"ajax",url:"api/search_delivery_item_condition",reader:{type:"json",root:"records",totalProperty:"total"}}})}this.items=[{xtype:"form",msgTarget:"side",border:!1,bodyPadding:10,fieldDefaults:{labelWidth:165,anchor:"100%"},items:[{xtype:"displayfield",fieldLabel:"Guarantee Return",name:"guarantee_return_code",value:"10"},{xtype:"fieldset",title:"Item Info",items:[{fieldLabel:"Item",xtype:"combo",queryMode:"remote",forceSelection:!0,displayField:"sales_item_code",valueField:"sales_item_id",pageSize:5,minChars:1,allowBlank:!1,triggerAction:"all",store:e,listConfig:{getInnerTpl:function(){return'<div data-qtip="{text}"><div class="combo-name">{sales_item_name} ({sales_item_code})</div><div>Ready Cor: {ready_production}</div><div>Ready Bubut: {ready_post_production}</div></div>'}},name:"sales_item_id"},{fieldLabel:"Jumlah",name:"quantity",xtype:"field"}]}]}],this.buttons=[{text:"Save",action:"save"},{text:"Cancel",scope:this,handler:this.close}],this.callParent(arguments)}},setParentData:function(e){this.down("form").getForm().findField("guarantee_return_code").setValue(e.get("code"))},setSelectedSalesItem:function(e){var t=this.down("form").getForm().findField("sales_item_id"),i=this,a=t.store;a.load({params:{selected_id:e},callback:function(){i.setLoading(!1),t.setValue(e)}})},setSelectedItemCondition:function(e){var t=this.down("form").getForm().findField("item_condition"),i=this,a=t.store;a.load({params:{selected_id:e},callback:function(){i.setLoading(!1),t.setValue(e)}})},setComboBoxData:function(e){var t=this;t.setLoading(!0),t.setSelectedSalesItem(e.get("sales_item_id")),t.setSelectedItemCondition(e.get("item_condition"))}}),Ext.define("AM.view.operation.maintenancescheduledetail.List",{extend:"Ext.grid.Panel",alias:"widget.maintenancescheduledetaillist",store:"MaintenanceScheduleDetails",initComponent:function(){this.columns=[{header:"Code",dataIndex:"code",flex:1,sortable:!1},{xtype:"templatecolumn",text:"Item",flex:1,tpl:"<b>{sales_item_code}</b><br /><br />{sales_item_name}"},{xtype:"templatecolumn",text:"Jumlah",flex:1,tpl:"Kuantitas: <b>{quantity}</b>"},{header:"Konfirmasi",dataIndex:"is_confirmed",flex:1,sortable:!1}],this.addObjectButton=new Ext.Button({text:"Add",action:"addObject",disabled:!0}),this.editObjectButton=new Ext.Button({text:"Edit",action:"editObject",disabled:!0}),this.deleteObjectButton=new Ext.Button({text:"Delete",action:"deleteObject",disabled:!0}),this.tbar=[this.addObjectButton,this.editObjectButton,this.deleteObjectButton],this.bbar=Ext.create("Ext.PagingToolbar",{store:this.store,displayInfo:!0,displayMsg:"Displaying topics {0} - {1} of {2}",emptyMsg:"No topics to display"}),this.callParent(arguments)},loadMask:!0,getSelectedObject:function(){return this.getSelectionModel().getSelection()[0]},enableRecordButtons:function(){this.addObjectButton.enable(),this.editObjectButton.enable(),this.deleteObjectButton.enable()},disableRecordButtons:function(){this.addObjectButton.disable(),this.editObjectButton.disable(),this.deleteObjectButton.disable()},setObjectTitle:function(e){this.setTitle("Maintenance Schedule: "+e.get("code"))}}),Ext.define("AM.view.operation.monthlygenerator.ConfirmForm",{extend:"Ext.window.Window",alias:"widget.confirmmonthlygeneratorform",title:"Confirm",layout:"fit",width:500,autoShow:!0,modal:!0,initComponent:function(){this.items=[{xtype:"form",msgTarget:"side",border:!1,bodyPadding:10,fieldDefaults:{labelWidth:165,anchor:"100%"},items:[{xtype:"hidden",name:"id",fieldLabel:"id"},{xtype:"displayfield",fieldLabel:"Code ",name:"code"},{xtype:"datefield",name:"confirmed_at",fieldLabel:"Tanggal Konfirmasi",format:"Y-m-d"}]}],this.buttons=[{text:"Confirm",action:"confirm"},{text:"Cancel",scope:this,handler:this.close}],this.callParent(arguments)},setParentData:function(e){this.down("form").getForm().findField("code").setValue(e.get("code"))}}),Ext.define("AM.view.operation.monthlygenerator.Form",{extend:"Ext.window.Window",alias:"widget.monthlygeneratorform",title:"Add / Edit MonthlyGenerator ",layout:"fit",width:500,autoShow:!0,modal:!0,initComponent:function(){this.items=[{xtype:"form",msgTarget:"side",border:!1,bodyPadding:10,fieldDefaults:{labelWidth:165,anchor:"100%"},items:[{xtype:"hidden",name:"id",fieldLabel:"id"},{xtype:"displayfield",name:"code",fieldLabel:"Code"},{xtype:"datefield",name:"generated_date",fieldLabel:"Tanggal Start",format:"Y-m-d"},{xtype:"textarea",name:"description",fieldLabel:"Description"}]}],this.buttons=[{text:"Save",action:"save"},{text:"Cancel",scope:this,handler:this.close}],this.callParent(arguments)},setComboBoxData:function(){}}),Ext.define("AM.view.operation.monthlygenerator.List",{extend:"Ext.grid.Panel",alias:"widget.monthlygeneratorlist",store:"MonthlyGenerators",initComponent:function(){this.columns=[{header:"ID",dataIndex:"id"},{header:"Code",dataIndex:"code",flex:1},{header:"Deskripsi",dataIndex:"description",flex:1},{header:"Tanggal Mulai",dataIndex:"generated_date",flex:1},{header:"Konfirmasi",dataIndex:"is_confirmed",flex:1},{header:"Tanggal Konfirmasi",dataIndex:"confirmed_at",flex:1}],this.addObjectButton=new Ext.Button({text:"Add MonthlyGenerator",action:"addObject"}),this.editObjectButton=new Ext.Button({text:"Edit MonthlyGenerator",action:"editObject",disabled:!0}),this.deleteObjectButton=new Ext.Button({text:"Delete MonthlyGenerator",action:"deleteObject",disabled:!0}),this.confirmObjectButton=new Ext.Button({text:"Confirm MonthlyGenerator",action:"confirmObject",disabled:!0}),this.unconfirmObjectButton=new Ext.Button({text:"Unconfirm MonthlyGenerator",action:"unconfirmObject",disabled:!0,hidden:!0}),this.searchField=new Ext.form.field.Text({name:"searchField",hideLabel:!0,width:200,emptyText:"Search",checkChangeBuffer:300}),this.tbar=[this.addObjectButton,this.editObjectButton,this.confirmObjectButton,this.unconfirmObjectButton,this.deleteObjectButton,this.searchField],this.bbar=Ext.create("Ext.PagingToolbar",{store:this.store,displayInfo:!0,displayMsg:"Displaying topics {0} - {1} of {2}",emptyMsg:"No topics to display"}),this.callParent(arguments)},loadMask:!0,getSelectedObject:function(){return this.getSelectionModel().getSelection()[0]},enableRecordButtons:function(){this.editObjectButton.enable(),this.deleteObjectButton.enable(),this.confirmObjectButton.enable(),this.unconfirmObjectButton.enable(),selectedObject=this.getSelectedObject(),selectedObject&&1==selectedObject.get("is_confirmed")?(this.confirmObjectButton.hide(),this.unconfirmObjectButton.show()):(this.confirmObjectButton.show(),this.unconfirmObjectButton.hide())},disableRecordButtons:function(){this.editObjectButton.disable(),this.deleteObjectButton.disable(),this.confirmObjectButton.disable(),this.unconfirmObjectButton.disable()}}),Ext.define("AM.view.operation.monthlygenerator.UnconfirmForm",{extend:"Ext.window.Window",alias:"widget.unconfirmmonthlygeneratorform",title:"Unconfirm",layout:"fit",width:500,autoShow:!0,modal:!0,initComponent:function(){this.items=[{xtype:"form",msgTarget:"side",border:!1,bodyPadding:10,fieldDefaults:{labelWidth:165,anchor:"100%"},items:[{xtype:"hidden",name:"id",fieldLabel:"id"},{xtype:"displayfield",fieldLabel:"Code ",name:"code"}]}],this.buttons=[{text:"Unconfirm",action:"unconfirm"},{text:"Cancel",scope:this,handler:this.close}],this.callParent(arguments)},setParentData:function(e){this.down("form").getForm().findField("code").setValue(e.get("code"))}}),Ext.define("AM.view.operation.monthlygeneratorinvoice.List",{extend:"Ext.grid.Panel",alias:"widget.monthlygeneratorinvoiceList",store:"MonthlyGeneratorInvoices",initComponent:function(){this.columns=[{header:"ID",dataIndex:"id"},{header:"Code",dataIndex:"code",flex:1},{header:"Source",dataIndex:"source_class",flex:1},{header:"Source Code",dataIndex:"source_code",flex:1},{header:"Home",dataIndex:"home_name",flex:1},{header:"Amount",dataIndex:"amount",flex:1},{header:"Deskripsi",dataIndex:"description",flex:1},{header:"Tanggal Invoice",dataIndex:"invoice_date",flex:1},{header:"Due Date",dataIndex:"due_date",flex:1},{header:"Konfirmasi",dataIndex:"is_confirmed",flex:1},{header:"Tanggal Konfirmasi",dataIndex:"confirmed_at",flex:1}],this.searchField=new Ext.form.field.Text({name:"searchField",hideLabel:!0,width:200,emptyText:"Search",checkChangeBuffer:300}),this.bbar=Ext.create("Ext.PagingToolbar",{store:this.store,displayInfo:!0,displayMsg:"Displaying topics {0} - {1} of {2}",emptyMsg:"No topics to display"}),this.callParent(arguments)},loadMask:!0,getSelectedObject:function(){return this.getSelectionModel().getSelection()[0]},enableRecordButtons:function(){this.editObjectButton.enable(),this.deleteObjectButton.enable()},disableRecordButtons:function(){this.editObjectButton.disable(),this.deleteObjectButton.disable()}}),Ext.define("AM.view.operation.paymentrequest.ConfirmForm",{extend:"Ext.window.Window",alias:"widget.confirmpaymentrequestform",title:"Confirm",layout:"fit",width:500,autoShow:!0,modal:!0,initComponent:function(){this.items=[{xtype:"form",msgTarget:"side",border:!1,bodyPadding:10,fieldDefaults:{labelWidth:165,anchor:"100%"},items:[{xtype:"hidden",name:"id",fieldLabel:"id"},{xtype:"displayfield",fieldLabel:"Code ",name:"code"},{xtype:"datefield",name:"confirmed_at",fieldLabel:"Tanggal Konfirmasi",format:"Y-m-d"}]}],this.buttons=[{text:"Confirm",action:"confirm"},{text:"Cancel",scope:this,handler:this.close}],this.callParent(arguments)},setParentData:function(e){this.down("form").getForm().findField("code").setValue(e.get("code"))}}),Ext.define("AM.view.operation.paymentrequest.Form",{extend:"Ext.window.Window",alias:"widget.paymentrequestform",title:"Add / Edit PaymentRequest ",layout:"fit",width:500,autoShow:!0,modal:!0,initComponent:function(){var e=Ext.create(Ext.data.JsonStore,{storeId:"type_search",fields:[{name:"vendor_name",mapping:"name"},{name:"vendor_id",mapping:"id"}],proxy:{type:"ajax",url:"api/search_vendor",reader:{type:"json",root:"records",totalProperty:"total"}},autoLoad:!1});this.items=[{xtype:"form",msgTarget:"side",border:!1,bodyPadding:10,fieldDefaults:{labelWidth:165,anchor:"100%"},items:[{xtype:"hidden",name:"id",fieldLabel:"id"},{xtype:"displayfield",name:"code",fieldLabel:"Code"},{fieldLabel:"Vendor",xtype:"combo",queryMode:"remote",forceSelection:!0,displayField:"vendor_name",valueField:"vendor_id",pageSize:5,minChars:1,allowBlank:!1,triggerAction:"all",store:e,listConfig:{getInnerTpl:function(){return'<div data-qtip="{vendor_name}"><div class="combo-name">{vendor_name}</div></div>'}},name:"vendor_id"},{xtype:"textfield",name:"amount",fieldLabel:"Amount"},{xtype:"datefield",name:"request_date",fieldLabel:"Tanggal Request",format:"Y-m-d"},{xtype:"textarea",name:"description",fieldLabel:"Description"}]}],this.buttons=[{text:"Save",action:"save"},{text:"Cancel",scope:this,handler:this.close}],this.callParent(arguments)},setSelectedType:function(e){var t=this.down("form").getForm().findField("vendor_id"),i=this,a=t.store;a.load({params:{selected_id:e},callback:function(){i.setLoading(!1),t.setValue(e)}})},setComboBoxData:function(e){console.log("gonna set combo box data");var t=this;t.setLoading(!0),console.log(e.get("vendor_id")),t.setSelectedType(e.get("vendor_id"))}}),Ext.define("AM.view.operation.paymentrequest.List",{extend:"Ext.grid.Panel",alias:"widget.paymentrequestlist",store:"PaymentRequests",initComponent:function(){this.columns=[{header:"ID",dataIndex:"id"},{header:"Code",dataIndex:"code",flex:1},{header:"Vendor",dataIndex:"vendor_name",flex:1},{header:"Amount",dataIndex:"amount",flex:1},{header:"Deskripsi",dataIndex:"description",flex:1},{header:"Tanggal Request",dataIndex:"request_date",flex:1},{header:"Konfirmasi",dataIndex:"is_confirmed",flex:1},{header:"Tanggal Konfirmasi",dataIndex:"confirmed_at",flex:1}],this.addObjectButton=new Ext.Button({text:"Add Payment Request",action:"addObject"}),this.editObjectButton=new Ext.Button({text:"Edit Payment Request",action:"editObject",disabled:!0}),this.deleteObjectButton=new Ext.Button({text:"Delete Payment Request",action:"deleteObject",disabled:!0}),this.confirmObjectButton=new Ext.Button({text:"Confirm Payment Request",action:"confirmObject",disabled:!0}),this.unconfirmObjectButton=new Ext.Button({text:"Unconfirm Payment Request",action:"unconfirmObject",disabled:!0,hidden:!0}),this.searchField=new Ext.form.field.Text({name:"searchField",hideLabel:!0,width:200,emptyText:"Search",checkChangeBuffer:300}),this.tbar=[this.addObjectButton,this.editObjectButton,this.confirmObjectButton,this.unconfirmObjectButton,this.deleteObjectButton,this.searchField],this.bbar=Ext.create("Ext.PagingToolbar",{store:this.store,displayInfo:!0,displayMsg:"Displaying topics {0} - {1} of {2}",emptyMsg:"No topics to display"}),this.callParent(arguments)},loadMask:!0,getSelectedObject:function(){return this.getSelectionModel().getSelection()[0]},enableRecordButtons:function(){this.editObjectButton.enable(),this.deleteObjectButton.enable(),this.confirmObjectButton.enable(),this.unconfirmObjectButton.enable(),selectedObject=this.getSelectedObject(),selectedObject&&1==selectedObject.get("is_confirmed")?(this.confirmObjectButton.hide(),this.unconfirmObjectButton.show()):(this.confirmObjectButton.show(),this.unconfirmObjectButton.hide())},disableRecordButtons:function(){this.editObjectButton.disable(),this.deleteObjectButton.disable(),this.confirmObjectButton.disable(),this.unconfirmObjectButton.disable()}}),Ext.define("AM.view.operation.paymentrequest.UnconfirmForm",{extend:"Ext.window.Window",alias:"widget.unconfirmpaymentrequestform",title:"Unconfirm",layout:"fit",width:500,autoShow:!0,modal:!0,initComponent:function(){this.items=[{xtype:"form",msgTarget:"side",border:!1,bodyPadding:10,fieldDefaults:{labelWidth:165,anchor:"100%"},items:[{xtype:"hidden",name:"id",fieldLabel:"id"},{xtype:"displayfield",fieldLabel:"Code ",name:"code"}]}],this.buttons=[{text:"Unconfirm",action:"unconfirm"},{text:"Cancel",scope:this,handler:this.close}],this.callParent(arguments)},setParentData:function(e){this.down("form").getForm().findField("code").setValue(e.get("code"))}}),Ext.define("AM.view.operation.paymentvoucher.ConfirmForm",{extend:"Ext.window.Window",alias:"widget.confirmpaymentvoucherform",title:"Confirm",layout:"fit",width:500,autoShow:!0,modal:!0,initComponent:function(){this.items=[{xtype:"form",msgTarget:"side",border:!1,bodyPadding:10,fieldDefaults:{labelWidth:165,anchor:"100%"},items:[{xtype:"hidden",name:"id",fieldLabel:"id"},{xtype:"displayfield",fieldLabel:"Code ",name:"code"},{xtype:"datefield",name:"confirmed_at",fieldLabel:"Tanggal Konfirmasi",format:"Y-m-d"}]}],this.buttons=[{text:"Confirm",action:"confirm"},{text:"Cancel",scope:this,handler:this.close}],this.callParent(arguments)},setParentData:function(e){this.down("form").getForm().findField("code").setValue(e.get("code"))}}),Ext.define("AM.view.operation.paymentvoucher.Form",{extend:"Ext.window.Window",alias:"widget.paymentvoucherform",title:"Add / Edit PaymentVoucher",layout:"fit",width:500,autoShow:!0,modal:!0,initComponent:function(){var e=Ext.create(Ext.data.JsonStore,{storeId:"type_search",fields:[{name:"vendor_name",mapping:"name"},{name:"vendor_id",mapping:"id"}],proxy:{type:"ajax",url:"api/search_vendor",reader:{type:"json",root:"records",totalProperty:"total"}},autoLoad:!1}),t=Ext.create(Ext.data.JsonStore,{storeId:"type_search",fields:[{name:"cash_bank_name",mapping:"name"},{name:"cash_bank_id",mapping:"id"}],proxy:{type:"ajax",url:"api/search_cash_bank",reader:{type:"json",root:"records",totalProperty:"total"}},autoLoad:!1});this.items=[{xtype:"form",msgTarget:"side",border:!1,bodyPadding:10,fieldDefaults:{labelWidth:165,anchor:"100%"},items:[{xtype:"hidden",name:"id",fieldLabel:"id"},{xtype:"displayfield",name:"code",fieldLabel:"Kode"},{xtype:"datefield",name:"payment_date",fieldLabel:"Tanggal Transaksi",format:"Y-m-d"},{fieldLabel:"Vendor",xtype:"combo",queryMode:"remote",forceSelection:!0,displayField:"vendor_name",valueField:"vendor_id",pageSize:5,minChars:1,allowBlank:!1,triggerAction:"all",store:e,listConfig:{getInnerTpl:function(){return'<div data-qtip="{vendor_name}"><div class="combo-name">{vendor_name}</div></div>'}},name:"vendor_id"},{fieldLabel:"CashBank",xtype:"combo",queryMode:"remote",forceSelection:!0,displayField:"cash_bank_name",valueField:"cash_bank_id",pageSize:5,minChars:1,allowBlank:!1,triggerAction:"all",store:t,listConfig:{getInnerTpl:function(){return'<div data-qtip="{cash_bank_name}"><div class="combo-name">{cash_bank_name}</div></div>'}},name:"cash_bank_id"},{xtype:"textarea",name:"description",fieldLabel:"Deskripsi"}]}],this.buttons=[{text:"Save",action:"save"},{text:"Cancel",scope:this,handler:this.close}],this.callParent(arguments)},setSelectedAccount:function(e){var t=this.down("form").getForm().findField("cash_bank_id"),i=this,a=t.store;a.load({params:{selected_id:e},callback:function(){i.setLoading(!1),t.setValue(e)}})},setSelectedVendor:function(e){var t=this.down("form").getForm().findField("vendor_id"),i=this,a=t.store;a.load({params:{selected_id:e},callback:function(){i.setLoading(!1),t.setValue(e)}})},setComboBoxData:function(e){var t=this;t.setLoading(!0),t.setSelectedAccount(e.get("cash_bank_id")),t.setSelectedVendor(e.get("vendor_id"))}}),Ext.define("AM.view.operation.paymentvoucher.List",{extend:"Ext.grid.Panel",alias:"widget.paymentvoucherlist",store:"PaymentVouchers",initComponent:function(){this.columns=[{header:"Code",dataIndex:"code",flex:1},{header:"Vendor",dataIndex:"vendor_name",flex:1},{header:"CashBank",dataIndex:"cash_bank_name",flex:1},{header:"Total Amount",dataIndex:"amount",flex:1},{header:"Tanggal Pembayaran",dataIndex:"payment_date",flex:1},{header:"Deskripsi",dataIndex:"description",flex:1},{header:"Konfirmasi",dataIndex:"is_confirmed",flex:1},{header:"Tanggal Konfirmasi",dataIndex:"confirmed_at",flex:1}],this.addObjectButton=new Ext.Button({text:"Add",action:"addObject"}),this.editObjectButton=new Ext.Button({text:"Edit",action:"editObject",disabled:!0}),this.deleteObjectButton=new Ext.Button({text:"Delete",action:"deleteObject",disabled:!0}),this.confirmObjectButton=new Ext.Button({text:"Confirm",action:"confirmObject",disabled:!0}),this.unconfirmObjectButton=new Ext.Button({text:"Unconfirm",action:"unconfirmObject",disabled:!0,hidden:!0}),this.searchField=new Ext.form.field.Text({name:"searchField",hideLabel:!0,width:200,emptyText:"Search",checkChangeBuffer:300}),this.tbar=[this.addObjectButton,this.editObjectButton,this.deleteObjectButton,"-",this.confirmObjectButton,this.unconfirmObjectButton,"->",this.searchField],this.bbar=Ext.create("Ext.PagingToolbar",{store:this.store,displayInfo:!0,displayMsg:"Displaying topics {0} - {1} of {2}",emptyMsg:"No topics to display"}),this.callParent(arguments)},loadMask:!0,getSelectedObject:function(){return this.getSelectionModel().getSelection()[0]},enableRecordButtons:function(){this.editObjectButton.enable(),this.deleteObjectButton.enable(),selectedObject=this.getSelectedObject(),selectedObject&&1==selectedObject.get("is_confirmed")?(this.confirmObjectButton.hide(),this.unconfirmObjectButton.show(),this.unconfirmObjectButton.enable()):(this.confirmObjectButton.enable(),this.confirmObjectButton.show(),this.unconfirmObjectButton.hide())},disableRecordButtons:function(){this.editObjectButton.disable(),this.deleteObjectButton.disable(),this.confirmObjectButton.disable()}}),Ext.define("AM.view.operation.paymentvoucher.UnconfirmForm",{extend:"Ext.window.Window",alias:"widget.unconfirmpaymentvoucherform",title:"Unconfirm",layout:"fit",width:500,autoShow:!0,modal:!0,initComponent:function(){this.items=[{xtype:"form",msgTarget:"side",border:!1,bodyPadding:10,fieldDefaults:{labelWidth:165,anchor:"100%"},items:[{xtype:"hidden",name:"id",fieldLabel:"id"},{xtype:"displayfield",fieldLabel:"Code ",name:"code"}]}],this.buttons=[{text:"Unconfirm",action:"unconfirm"},{text:"Cancel",scope:this,handler:this.close}],this.callParent(arguments)},setParentData:function(e){this.down("form").getForm().findField("code").setValue(e.get("code"))}}),Ext.define("AM.view.operation.paymentvoucherdetail.Form",{extend:"Ext.window.Window",alias:"widget.paymentvoucherdetailform",title:"Add / Edit Paymentvoucher Detail",layout:"fit",width:500,autoShow:!0,modal:!0,initComponent:function(){var e=Ext.create(Ext.data.JsonStore,{storeId:"type_search",fields:[{name:"payable_source_code",mapping:"source_code"},{name:"payable_amount",mapping:"amount"},{name:"payable_id",mapping:"id"}],proxy:{type:"ajax",url:"api/search_payable",reader:{type:"json",root:"records",totalProperty:"total"}},autoLoad:!1});this.items=[{xtype:"form",msgTarget:"side",border:!1,bodyPadding:10,fieldDefaults:{labelWidth:165,anchor:"100%"},items:[{xtype:"hidden",name:"id",fieldLabel:"id"},{xtype:"hidden",name:"payment_voucher_id",fieldLabel:"payment_voucher_id"},{xtype:"displayfield",name:"paymentvoucher_code",fieldLabel:"Kode Paymentvoucher"},{fieldLabel:"PaymentRequest",xtype:"combo",queryMode:"remote",forceSelection:!0,displayField:"payable_source_code",valueField:"payable_id",pageSize:5,minChars:1,allowBlank:!1,triggerAction:"all",store:e,listConfig:{getInnerTpl:function(){return'<div data-qtip="{payable_id}"><div class="combo-name">{payable_source_code}</div><div class="combo-name">{payable_amount}</div></div>'}},name:"payable_id"}]}],this.buttons=[{text:"Save",action:"save"},{text:"Cancel",scope:this,handler:this.close}],this.callParent(arguments)},setSelectedAccount:function(e){var t=this.down("form").getForm().findField("payable_id"),i=this,a=t.store;a.load({params:{selected_id:e},callback:function(){i.setLoading(!1),t.setValue(payable_id)}})},setComboBoxData:function(e){var t=this;t.setLoading(!0),t.setSelectedAccount(e.get("account_id"))},setParentData:function(e){this.down("form").getForm().findField("paymentvoucher_code").setValue(e.get("code")),this.down("form").getForm().findField("payment_voucher_id").setValue(e.get("id"))}}),Ext.define("AM.view.operation.paymentvoucherdetail.List",{extend:"Ext.grid.Panel",alias:"widget.paymentvoucherdetaillist",store:"PaymentVoucherDetails",initComponent:function(){this.columns=[{header:"Code",dataIndex:"payable_source_code",flex:1},{header:"Amount",dataIndex:"amount",flex:1}],this.addObjectButton=new Ext.Button({text:"Add",action:"addObject",disabled:!0}),this.editObjectButton=new Ext.Button({text:"Edit",action:"editObject",disabled:!0}),this.deleteObjectButton=new Ext.Button({text:"Delete",action:"deleteObject",disabled:!0}),this.tbar=[this.addObjectButton,this.editObjectButton,this.deleteObjectButton],this.bbar=Ext.create("Ext.PagingToolbar",{store:this.store,displayInfo:!0,displayMsg:"Details {0} - {1} of {2}",emptyMsg:"No details"}),this.callParent(arguments)
},loadMask:!0,getSelectedObject:function(){return this.getSelectionModel().getSelection()[0]},enableAddButton:function(){this.addObjectButton.enable()},disableAddButton:function(){this.addObjectButton.disable()},enableRecordButtons:function(){this.editObjectButton.enable(),this.deleteObjectButton.enable()},disableRecordButtons:function(){this.editObjectButton.disable(),this.deleteObjectButton.disable()},setObjectTitle:function(e){this.setTitle("PaymentVoucher: "+e.get("code"))}}),Ext.define("AM.view.operation.receiptvoucher.ConfirmForm",{extend:"Ext.window.Window",alias:"widget.confirmreceiptvoucherform",title:"Confirm",layout:"fit",width:500,autoShow:!0,modal:!0,initComponent:function(){this.items=[{xtype:"form",msgTarget:"side",border:!1,bodyPadding:10,fieldDefaults:{labelWidth:165,anchor:"100%"},items:[{xtype:"hidden",name:"id",fieldLabel:"id"},{xtype:"displayfield",fieldLabel:"Code ",name:"code"},{xtype:"datefield",name:"confirmed_at",fieldLabel:"Tanggal Konfirmasi",format:"Y-m-d"}]}],this.buttons=[{text:"Confirm",action:"confirm"},{text:"Cancel",scope:this,handler:this.close}],this.callParent(arguments)},setParentData:function(e){this.down("form").getForm().findField("code").setValue(e.get("code"))}}),Ext.define("AM.view.operation.receiptvoucher.Form",{extend:"Ext.window.Window",alias:"widget.receiptvoucherform",title:"Add / Edit ReceiptVoucher ",layout:"fit",width:500,autoShow:!0,modal:!0,initComponent:function(){var e=Ext.create(Ext.data.JsonStore,{storeId:"type_search",fields:[{name:"user_name",mapping:"name"},{name:"user_id",mapping:"id"}],proxy:{type:"ajax",url:"api/search_user",reader:{type:"json",root:"records",totalProperty:"total"}},autoLoad:!1}),t=Ext.create(Ext.data.JsonStore,{storeId:"type_search",fields:[{name:"cash_bank_name",mapping:"name"},{name:"cash_bank_id",mapping:"id"}],proxy:{type:"ajax",url:"api/search_cash_bank",reader:{type:"json",root:"records",totalProperty:"total"}},autoLoad:!1}),i=Ext.create(Ext.data.JsonStore,{storeId:"type_search",fields:[{name:"receivable_source_code",mapping:"source_code"},{name:"receivable_amount",mapping:"amount"},{name:"receivable_id",mapping:"id"}],proxy:{type:"ajax",url:"api/search_receivable",reader:{type:"json",root:"records",totalProperty:"total"}},autoLoad:!1});this.items=[{xtype:"form",msgTarget:"side",border:!1,bodyPadding:10,fieldDefaults:{labelWidth:165,anchor:"100%"},items:[{xtype:"hidden",name:"id",fieldLabel:"id"},{xtype:"displayfield",name:"code",fieldLabel:"Code"},{fieldLabel:"User",xtype:"combo",queryMode:"remote",forceSelection:!0,displayField:"user_name",valueField:"user_id",pageSize:5,minChars:1,allowBlank:!1,triggerAction:"all",store:e,listConfig:{getInnerTpl:function(){return'<div data-qtip="{user_name}"><div class="combo-name">{user_name}</div></div>'}},name:"user_id"},{fieldLabel:"CashBank",xtype:"combo",queryMode:"remote",forceSelection:!0,displayField:"cash_bank_name",valueField:"cash_bank_id",pageSize:5,minChars:1,allowBlank:!1,triggerAction:"all",store:t,listConfig:{getInnerTpl:function(){return'<div data-qtip="{cash_bank_name}"><div class="combo-name">{cash_bank_name}</div></div>'}},name:"cash_bank_id"},{fieldLabel:"Receivable",xtype:"combo",queryMode:"remote",forceSelection:!0,displayField:"receivable_source_code",valueField:"receivable_id",pageSize:5,minChars:1,allowBlank:!1,triggerAction:"all",store:i,listConfig:{getInnerTpl:function(){return'<div data-qtip="{receivable_source_code}"><div class="combo-name">{receivable_source_code}</div><div class="combo-name">{receivable_amount}</div></div>'}},name:"receivable_id"},{xtype:"datefield",name:"receipt_date",fieldLabel:"Tanggal Terima",format:"Y-m-d"},{xtype:"textarea",name:"description",fieldLabel:"Description"}]}],this.buttons=[{text:"Save",action:"save"},{text:"Cancel",scope:this,handler:this.close}],this.callParent(arguments)},setSelectedType:function(e){var t=this.down("form").getForm().findField("user_id"),i=this,a=t.store;a.load({params:{selected_id:e},callback:function(){i.setLoading(!1),t.setValue(e)}})},setSelectedCashBank:function(e){var t=this.down("form").getForm().findField("cash_bank_id"),i=this,a=t.store;a.load({params:{selected_id:e},callback:function(){i.setLoading(!1),t.setValue(e)}})},setSelectedReceivable:function(e){var t=this.down("form").getForm().findField("receivable_id"),i=this,a=t.store;a.load({params:{selected_id:e},callback:function(){i.setLoading(!1),t.setValue(e)}})},setComboBoxData:function(e){var t=this;t.setLoading(!0),t.setSelectedType(e.get("user_id")),t.setSelectedCashBank(e.get("cash_bank_id")),t.setSelectedReceivable(e.get("receivable_id"))}}),Ext.define("AM.view.operation.receiptvoucher.List",{extend:"Ext.grid.Panel",alias:"widget.receiptvoucherlist",store:"ReceiptVouchers",initComponent:function(){this.columns=[{header:"ID",dataIndex:"id"},{header:"Code",dataIndex:"code",flex:1},{header:"User",dataIndex:"user_name",flex:1},{header:"CashBank",dataIndex:"cash_bank_name",flex:1},{header:"Receivable Source",dataIndex:"receivable_source_code",flex:1},{header:"Amount",dataIndex:"amount",flex:1},{header:"Deskripsi",dataIndex:"description",flex:1},{header:"Tanggal Terima",dataIndex:"receipt_date",flex:1},{header:"Konfirmasi",dataIndex:"is_confirmed",flex:1},{header:"Tanggal Konfirmasi",dataIndex:"confirmed_at",flex:1}],this.addObjectButton=new Ext.Button({text:"Add ReceiptVoucher",action:"addObject"}),this.editObjectButton=new Ext.Button({text:"Edit ReceiptVoucher",action:"editObject",disabled:!0}),this.deleteObjectButton=new Ext.Button({text:"Delete ReceiptVoucher",action:"deleteObject",disabled:!0}),this.confirmObjectButton=new Ext.Button({text:"Confirm ReceiptVoucher",action:"confirmObject",disabled:!0}),this.unconfirmObjectButton=new Ext.Button({text:"Unconfirm ReceiptVoucher",action:"unconfirmObject",disabled:!0,hidden:!0}),this.searchField=new Ext.form.field.Text({name:"searchField",hideLabel:!0,width:200,emptyText:"Search",checkChangeBuffer:300}),this.tbar=[this.addObjectButton,this.editObjectButton,this.confirmObjectButton,this.unconfirmObjectButton,this.deleteObjectButton,this.searchField],this.bbar=Ext.create("Ext.PagingToolbar",{store:this.store,displayInfo:!0,displayMsg:"Displaying topics {0} - {1} of {2}",emptyMsg:"No topics to display"}),this.callParent(arguments)},loadMask:!0,getSelectedObject:function(){return this.getSelectionModel().getSelection()[0]},enableRecordButtons:function(){this.editObjectButton.enable(),this.deleteObjectButton.enable(),this.confirmObjectButton.enable(),this.unconfirmObjectButton.enable(),selectedObject=this.getSelectedObject(),selectedObject&&1==selectedObject.get("is_confirmed")?(this.confirmObjectButton.hide(),this.unconfirmObjectButton.show()):(this.confirmObjectButton.show(),this.unconfirmObjectButton.hide())},disableRecordButtons:function(){this.editObjectButton.disable(),this.deleteObjectButton.disable(),this.confirmObjectButton.disable(),this.unconfirmObjectButton.disable()}}),Ext.define("AM.view.operation.receiptvoucher.UnconfirmForm",{extend:"Ext.window.Window",alias:"widget.unconfirmreceiptvoucherform",title:"Unconfirm",layout:"fit",width:500,autoShow:!0,modal:!0,initComponent:function(){this.items=[{xtype:"form",msgTarget:"side",border:!1,bodyPadding:10,fieldDefaults:{labelWidth:165,anchor:"100%"},items:[{xtype:"hidden",name:"id",fieldLabel:"id"},{xtype:"displayfield",fieldLabel:"Code ",name:"code"}]}],this.buttons=[{text:"Unconfirm",action:"unconfirm"},{text:"Cancel",scope:this,handler:this.close}],this.callParent(arguments)},setParentData:function(e){this.down("form").getForm().findField("code").setValue(e.get("code"))}}),Ext.define("AM.view.report.WorkCustomer",{extend:"AM.view.ChartInspect",alias:"widget.workCustomerReport",chartStoreFields:["name","data1","id"],chartStoreUrl:"api/work_customer_reports",listXType:"workcustomerList",yAxisLabel:"Total maintenance",xAxisLabel:"Customer",panelTitle:"Customer",worksheetId:"#personal-worksheetPanel"}),Ext.define("AM.view.report.workcustomer.List",{extend:"Ext.grid.Panel",alias:"widget.workcustomerList",store:"Maintenances",initComponent:function(){this.columns=[{xtype:"templatecolumn",text:"Info",flex:1,tpl:"<b>{code}</b><br /><b>{complaint_date}</b><br />{complaint}"}],this.bbar=Ext.create("Ext.PagingToolbar",{store:this.store,displayInfo:!0,displayMsg:"{0} - {1} of {2}",emptyMsg:"No Record"}),this.callParent(arguments)},loadMask:!0}),Ext.define("AM.controller.AdvancedPayments",{extend:"Ext.app.Controller",stores:["AdvancedPayments"],models:["AdvancedPayment"],views:["operation.advancedpayment.List","operation.advancedpayment.Form"],refs:[{ref:"list",selector:"advancedpaymentlist"}],init:function(){this.control({advancedpaymentlist:{itemdblclick:this.editObject,selectionchange:this.selectionChange,afterrender:this.loadObjectList},"advancedpaymentform button[action=save]":{click:this.updateObject},"advancedpaymentlist button[action=addObject]":{click:this.addObject},"advancedpaymentlist button[action=editObject]":{click:this.editObject},"advancedpaymentlist button[action=deleteObject]":{click:this.deleteObject},"advancedpaymentlist button[action=confirmObject]":{click:this.confirmObject},"confirmadvancedpaymentform button[action=confirm]":{click:this.executeConfirm},"advancedpaymentlist button[action=unconfirmObject]":{click:this.unconfirmObject},"unconfirmadvancedpaymentform button[action=unconfirm]":{click:this.executeUnconfirm},"advancedpaymentlist textfield[name=searchField]":{change:this.liveSearch}})},liveSearch:function(e,t){var i=this;i.getAdvancedPaymentsStore().getProxy().extraParams={livesearch:t},i.getAdvancedPaymentsStore().load()},loadObjectList:function(e){e.getStore().load()},addObject:function(){var e=Ext.widget("advancedpaymentform");e.show()},editObject:function(){var e=this.getList().getSelectedObject(),t=Ext.widget("advancedpaymentform");t.down("form").loadRecord(e),t.setComboBoxData(e)},updateObject:function(e){var t=e.up("window"),i=t.down("form"),a=this.getAdvancedPaymentsStore(),n=i.getRecord(),o=i.getValues();if(n)n.set(o),i.setLoading(!0),n.save({success:function(){i.setLoading(!1),a.load(),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),this.reject()}});else{var s=new AM.model.AdvancedPayment(o);i.setLoading(!0),s.save({success:function(){a.load(),i.setLoading(!1),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),this.reject()}})}},deleteObject:function(){var e=this.getList().getSelectedObject();if(e){var t=this.getAdvancedPaymentsStore();t.remove(e),t.sync(),this.getList().query("pagingtoolbar")[0].doRefresh()}},confirmObject:function(){var e=Ext.widget("confirmadvancedpaymentform"),t=this.getList().getSelectedObject();e.setParentData(t),e.show()},unconfirmObject:function(){var e=Ext.widget("unconfirmadvancedpaymentform"),t=this.getList().getSelectedObject();e.setParentData(t),e.show()},executeConfirm:function(e){var t=e.up("window"),i=t.down("form"),a=(this.getList(),this.getAdvancedPaymentsStore()),n=this.getList().getSelectedObject(),o=i.getValues();if(n){{n.get("id")}n.set("confirmed_at",o.confirmed_at),i.setLoading(!0),n.save({params:{confirm:!0},success:function(){i.setLoading(!1),a.load(),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),e.reject()}})}},executeUnconfirm:function(e){{var t=e.up("window"),i=t.down("form"),a=(this.getList(),this.getAdvancedPaymentsStore()),n=this.getList().getSelectedObject();i.getValues()}if(n){{n.get("id")}i.setLoading(!0),n.save({params:{unconfirm:!0},success:function(){i.setLoading(!1),a.load(),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),e.reject()}})}},selectionChange:function(e,t){var i=this.getList();t.length>0?i.enableRecordButtons():i.disableRecordButtons()}}),Ext.define("AM.controller.Authentication",{extend:"Ext.app.Controller",views:["AuthenticationForm","Viewport"],currentUser:null,refs:[{ref:"viewport",selector:"vp"},{ref:"userMenu",selector:"navigation #optionsMenu"}],onLaunch:function(){var e=this,t=Ext.decode(localStorage.getItem("currentUser"));t&&(e.currentUser=t,e.getViewport().setLoading(!0),Ext.Ajax.request({url:"api/authenticate_auth_token",method:"POST",params:{},jsonData:{},success:function(){e.getViewport().setLoading(!1)},failure:function(){e.getViewport().setLoading(!1),e.destroyAuthentication()}}))},onViewportLoaded:function(){var e=this,t=localStorage.getItem("currentUser");null===t?e.showLoginForm():(e.currentUser=Ext.decode(t),e.showProtectedArea())},init:function(){var e=this;e.control({"button#loginBtn":{click:this.onLoginClick},"button[action=logoutUser]":{click:this.onLogoutClick},vp:{render:this.onViewportLoaded}})},onLoginClick:function(e){var t=this,i=e.up("fieldset");i.setLoading(!0);var a=e.up("form"),n=a.getForm().findField("email"),o=a.getForm().findField("password");t.authenticateUser({user_login:{email:n.getValue(),password:o.getValue()}},i)},onLogoutClick:function(){var e=this;e.destroyAuthentication()},destroyAuthentication:function(){var e=this;e.getViewport().setLoading(!0),Ext.Ajax.request({url:"api/users/sign_out",method:"GET",params:{},jsonData:{},success:function(){e.getViewport().setLoading(!1),e.currentUser=null,localStorage.removeItem("currentUser"),e.showLoginForm(),window.location.reload()},failure:function(){e.getViewport().setLoading(!1),Ext.Msg.alert("Logout Error","Can't Logout"),window.location.reload()}})},authenticateUser:function(e,t){var i=this;Ext.Ajax.request({url:"api/users/sign_in",method:"POST",params:{},jsonData:e,success:function(e){t.setLoading(!1);var a=t.up("form"),n=a.getForm().findField("password"),o=a.getForm().findField("email");n.setValue(""),o.setValue("");var s=e.responseText,r=Ext.decode(s);if(r.success===!0){var d={auth_token:r.auth_token,email:r.email,role:Ext.decode(r.role)};localStorage.setItem("currentUser",Ext.encode(d)),i.currentUser=d,i.showProtectedArea()}else Ext.Msg.alert("Login Error","The email-password combination is invalid")},failure:function(){t.setLoading(!1),Ext.Msg.alert("Login Error","The email-password combination is invalid")}})},showProtectedArea:function(){var e=this;e.getViewport().getLayout().setActiveItem(1),e.getViewport().fireEvent("authenticateSuccess")},showLoginForm:function(){var e=this;e.getViewport().getLayout().setActiveItem(0)}}),Ext.define("AM.controller.Authorization",{extend:"Ext.app.Controller",views:["Navigation","Viewport"],refs:[{ref:"userMenu",selector:"navigation #optionsMenu"},{ref:"viewport",selector:"vp"}],init:function(){var e=this;e.control({viewport:{authenticateSuccess:this.onAuthenticateSuccess}})},onAuthenticateSuccess:function(){var e=this;AM.currentUser.hasRole("system","administrator")&&Ext.ComponentQuery.query("button[action=switchMaster]")[0].setVisible(!0);var t=Ext.decode(localStorage.getItem("currentUser")),i=t.email,a=e.getUserMenu();a.setText(i)}}),Ext.define("AM.controller.BaseTreeBuilder",{extend:"Ext.app.Controller",buildNavigation:function(e){for(var t=this,i=[],a=0;a<t.folderList.length;a++){var n=t.folderList[a],o=t.buildFolder(e,n);null!==o&&i.push(o)}var s={text:"text root",children:i};return s},buildFolder:function(e,t){for(var i=this,a=[],n=0;n<t.children.length;n++){var o=t.children[n],s=i.buildProcess(e,o);null!==s&&a.push(s)}return 0!==a.length?{text:t.text,viewClass:t.viewClass,iconCls:t.iconCls,expanded:t.expanded,children:a}:null},buildProcess:function(e,t){if(!e||!e.role)return null;for(var i={text:t.text,viewClass:t.viewClass,leaf:t.leaf,iconCls:t.iconCls},a=0;a<t.conditions.length;a++){var n=t.conditions[a],o=n.controller,s=n.action;if(e.role.system&&e.role.system.administrator||e.role[o]&&e.role[o][s])return i}return null}}),Ext.define("AM.controller.CashBankAdjustments",{extend:"Ext.app.Controller",stores:["CashBankAdjustments"],models:["CashBankAdjustment"],views:["master.cashbankadjustment.List","master.cashbankadjustment.Form"],refs:[{ref:"list",selector:"cashbankadjustmentlist"}],init:function(){this.control({cashbankadjustmentlist:{itemdblclick:this.editObject,selectionchange:this.selectionChange,afterrender:this.loadObjectList},"cashbankadjustmentform button[action=save]":{click:this.updateObject},"cashbankadjustmentlist button[action=addObject]":{click:this.addObject},"cashbankadjustmentlist button[action=editObject]":{click:this.editObject},"cashbankadjustmentlist button[action=deleteObject]":{click:this.deleteObject},"cashbankadjustmentlist button[action=confirmObject]":{click:this.confirmObject},"confirmcashbankadjustmentform button[action=confirm]":{click:this.executeConfirm},"cashbankadjustmentlist button[action=unconfirmObject]":{click:this.unconfirmObject},"unconfirmcashbankadjustmentform button[action=unconfirm]":{click:this.executeUnconfirm},"cashbankadjustmentlist textfield[name=searchField]":{change:this.liveSearch}})},liveSearch:function(e,t){var i=this;i.getCashBankAdjustmentsStore().getProxy().extraParams={livesearch:t},i.getCashBankAdjustmentsStore().load()},loadObjectList:function(e){e.getStore().load()},addObject:function(){var e=Ext.widget("cashbankadjustmentform");e.show()},editObject:function(){var e=this.getList().getSelectedObject(),t=Ext.widget("cashbankadjustmentform");t.down("form").loadRecord(e),t.setComboBoxData(e)},updateObject:function(e){var t=e.up("window"),i=t.down("form"),a=this.getCashBankAdjustmentsStore(),n=i.getRecord(),o=i.getValues();if(n)n.set(o),i.setLoading(!0),n.save({success:function(){i.setLoading(!1),a.load(),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),this.reject()}});else{var s=new AM.model.CashBankAdjustment(o);i.setLoading(!0),s.save({success:function(){a.load(),i.setLoading(!1),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),this.reject()}})}},deleteObject:function(){var e=this.getList().getSelectedObject();if(e){var t=this.getCashBankAdjustmentsStore();t.remove(e),t.sync(),this.getList().query("pagingtoolbar")[0].doRefresh()}},confirmObject:function(){var e=Ext.widget("confirmcashbankadjustmentform"),t=this.getList().getSelectedObject();e.setParentData(t),e.show()},unconfirmObject:function(){var e=Ext.widget("unconfirmcashbankadjustmentform"),t=this.getList().getSelectedObject();e.setParentData(t),e.show()},executeConfirm:function(e){var t=e.up("window"),i=t.down("form"),a=(this.getList(),this.getCashBankAdjustmentsStore()),n=this.getList().getSelectedObject(),o=i.getValues();if(n){{n.get("id")}n.set("confirmed_at",o.confirmed_at),i.setLoading(!0),n.save({params:{confirm:!0},success:function(){i.setLoading(!1),a.load(),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),e.reject()}})}},executeUnconfirm:function(e){{var t=e.up("window"),i=t.down("form"),a=(this.getList(),this.getCashBankAdjustmentsStore()),n=this.getList().getSelectedObject();i.getValues()}if(n){{n.get("id")}i.setLoading(!0),n.save({params:{unconfirm:!0},success:function(){i.setLoading(!1),a.load(),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),e.reject()}})}},selectionChange:function(e,t){var i=this.getList();t.length>0?i.enableRecordButtons():i.disableRecordButtons()}}),Ext.define("AM.controller.CashBankMutations",{extend:"Ext.app.Controller",stores:["CashBankMutations"],models:["CashBankMutation"],views:["master.cashbankmutation.List","master.cashbankmutation.Form"],refs:[{ref:"list",selector:"cashbankmutationlist"}],init:function(){this.control({cashbankmutationlist:{itemdblclick:this.editObject,selectionchange:this.selectionChange,afterrender:this.loadObjectList},"cashbankmutationform button[action=save]":{click:this.updateObject},"cashbankmutationlist button[action=addObject]":{click:this.addObject},"cashbankmutationlist button[action=editObject]":{click:this.editObject},"cashbankmutationlist button[action=deleteObject]":{click:this.deleteObject},"cashbankmutationlist button[action=confirmObject]":{click:this.confirmObject},"confirmcashbankmutationform button[action=confirm]":{click:this.executeConfirm},"cashbankmutationlist button[action=unconfirmObject]":{click:this.unconfirmObject},"unconfirmcashbankmutationform button[action=unconfirm]":{click:this.executeUnconfirm},"cashbankmutationlist textfield[name=searchField]":{change:this.liveSearch}})},liveSearch:function(e,t){var i=this;i.getCashBankMutationsStore().getProxy().extraParams={livesearch:t},i.getCashBankMutationsStore().load()},loadObjectList:function(e){e.getStore().load()},addObject:function(){var e=Ext.widget("cashbankmutationform");e.show()},editObject:function(){var e=this.getList().getSelectedObject(),t=Ext.widget("cashbankmutationform");t.down("form").loadRecord(e),t.setComboBoxData(e)},updateObject:function(e){var t=e.up("window"),i=t.down("form"),a=this.getCashBankMutationsStore(),n=i.getRecord(),o=i.getValues();if(n)n.set(o),i.setLoading(!0),n.save({success:function(){i.setLoading(!1),a.load(),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),this.reject()}});else{var s=new AM.model.CashBankMutation(o);i.setLoading(!0),s.save({success:function(){a.load(),i.setLoading(!1),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),this.reject()}})}},deleteObject:function(){var e=this.getList().getSelectedObject();if(e){var t=this.getCashBankMutationsStore();t.remove(e),t.sync(),this.getList().query("pagingtoolbar")[0].doRefresh()}},confirmObject:function(){var e=Ext.widget("confirmcashbankmutationform"),t=this.getList().getSelectedObject();e.setParentData(t),e.show()},unconfirmObject:function(){var e=Ext.widget("unconfirmcashbankmutationform"),t=this.getList().getSelectedObject();e.setParentData(t),e.show()},executeConfirm:function(e){var t=e.up("window"),i=t.down("form"),a=(this.getList(),this.getCashBankMutationsStore()),n=this.getList().getSelectedObject(),o=i.getValues();if(n){{n.get("id")}n.set("confirmed_at",o.confirmed_at),i.setLoading(!0),n.save({params:{confirm:!0},success:function(){i.setLoading(!1),a.load(),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),e.reject()}})}},executeUnconfirm:function(e){{var t=e.up("window"),i=t.down("form"),a=(this.getList(),this.getCashBankMutationsStore()),n=this.getList().getSelectedObject();i.getValues()}if(n){{n.get("id")}i.setLoading(!0),n.save({params:{unconfirm:!0},success:function(){i.setLoading(!1),a.load(),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),e.reject()}})}},selectionChange:function(e,t){var i=this.getList();t.length>0?i.enableRecordButtons():i.disableRecordButtons()}}),Ext.define("AM.controller.CashBanks",{extend:"Ext.app.Controller",stores:["CashBanks"],models:["CashBank"],views:["master.cashbank.List","master.cashbank.Form"],refs:[{ref:"list",selector:"cashbanklist"}],init:function(){this.control({cashbanklist:{itemdblclick:this.editObject,selectionchange:this.selectionChange,afterrender:this.loadObjectList},"cashbankform button[action=save]":{click:this.updateObject},"cashbanklist button[action=addObject]":{click:this.addObject},"cashbanklist button[action=editObject]":{click:this.editObject},"cashbanklist button[action=deleteObject]":{click:this.deleteObject},"cashbanklist textfield[name=searchField]":{change:this.liveSearch}})},liveSearch:function(e,t){var i=this;i.getCashBanksStore().getProxy().extraParams={livesearch:t},i.getCashBanksStore().load()},loadObjectList:function(e){e.getStore().load()},addObject:function(){var e=Ext.widget("cashbankform");e.show()},editObject:function(){var e=this.getList().getSelectedObject(),t=Ext.widget("cashbankform");t.down("form").loadRecord(e),t.setComboBoxData(e)},updateObject:function(e){var t=e.up("window"),i=t.down("form"),a=this.getCashBanksStore(),n=i.getRecord(),o=i.getValues();if(n)n.set(o),i.query("checkbox").forEach(function(e){n.set(e.name,e.checked)}),i.setLoading(!0),n.save({success:function(){i.setLoading(!1),a.load(),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),this.reject()}});else{var s=new AM.model.CashBank(o);i.setLoading(!0),i.query("checkbox").forEach(function(e){s.set(e.name,e.checked)}),s.save({success:function(){a.load(),i.setLoading(!1),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),this.reject()}})}},deleteObject:function(){var e=this.getList().getSelectedObject();if(e){var t=this.getCashBanksStore();t.remove(e),t.sync(),this.getList().query("pagingtoolbar")[0].doRefresh()}},selectionChange:function(e,t){var i=this.getList();t.length>0?i.enableRecordButtons():i.disableRecordButtons()}}),Ext.define("AM.controller.CashMutations",{extend:"Ext.app.Controller",stores:["CashMutations"],models:["CashMutation"],views:["master.cashmutation.List"],refs:[{ref:"list",selector:"cashmutationlist"}],init:function(){this.control({cashmutationlist:{selectionchange:this.selectionChange,afterrender:this.loadObjectList},"cashmutationlist textfield[name=searchField]":{change:this.liveSearch}})},liveSearch:function(e,t){var i=this;i.getCashMutationsStore().getProxy().extraParams={livesearch:t},i.getCashMutationsStore().load()},loadObjectList:function(e){e.getStore().load()},selectionChange:function(e,t){var i=this.getList();t.length>0?i.enableRecordButtons():i.disableRecordButtons()}}),Ext.define("AM.controller.Contracts",{extend:"Ext.app.Controller",stores:["Contracts","Customers","ContractItems"],models:["Contract"],views:["master.contract.List","master.Contract","master.CustomerList"],refs:[{ref:"wrapper",selector:"contractProcess"},{ref:"parentList",selector:"contractProcess mastercustomerList"},{ref:"list",selector:"contractlist"},{ref:"contractItemList",selector:"contractitemlist"},{ref:"searchField",selector:"contractlist textfield[name=searchField]"}],init:function(){this.control({"contractProcess mastercustomerList":{afterrender:this.loadParentObjectList,selectionchange:this.parentSelectionChange},contractlist:{selectionchange:this.selectionChange,destroy:this.onDestroy},"contractlist button[action=collectObject]":{click:this.collectObject},"contractlist button[action=confirmObject]":{click:this.confirmObject},"contractProcess mastercustomerList textfield[name=searchField]":{change:this.liveSearch},"contractlist button[action=addObject]":{click:this.addObject},"contractlist button[action=editObject]":{click:this.editObject},"contractform button[action=save]":{click:this.updateObject},"contractlist button[action=deleteObject]":{click:this.deleteObject},contractitemlist:{selectionchange:this.contractItemGridSelectionChange},"contractitemlist button[action=addObject]":{click:this.addSavingsObject},"contractitemform button[action=save]":{click:this.updateSavingsObject},"contractitemlist button[action=editObject]":{click:this.editSavingsObject},"contractitemlist button[action=deleteObject]":{click:this.deleteSavingsObject}})},deleteObject:function(){var e=this.getList().getSelectedObject();if(e){var t=this.getContractsStore();t.remove(e),t.sync(),this.getList().query("pagingtoolbar")[0].doRefresh()}},onDestroy:function(){this.getContractsStore().loadData([],!1)},liveSearch:function(e,t){var i=this;i.getCustomersStore().getProxy().extraParams={livesearch:t},i.getCustomersStore().load()},loadObjectList:function(e){e.getStore().load()},loadParentObjectList:function(e){e.getStore().getProxy().extraParams={},e.getStore().load()},contractItemGridSelectionChange:function(e,t){var i=(this.getList(),this.getContractItemList());t.length>0?i.enableRecordButtons():i.disableRecordButtons()},addObject:function(){var e=this.getParentList().getSelectedObject();if(e){var t=Ext.widget("contractform");t.show(),t.setParentData(e)}},updateObject:function(e){var t=e.up("window"),i=t.down("form"),a=this.getParentList(),n=this.getList(),o=this.getWrapper(),s=this.getContractItemList(),r=this.getContractsStore(),d=i.getRecord(),c=i.getValues();if(d)d.set(c),i.setLoading(!0),d.save({success:function(){if(i.setLoading(!1),r.load({params:{parent_id:o.selectedParentId}}),n.enableAddButton(),a.getSelectionModel().hasSelection()){s.getStore().loadData([],!1);var e=a.getSelectionModel().getSelection()[0],d=e.get("id");s.setTitle(""),o.selectedParentId=d}t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),this.reject()}});else{var l=new AM.model.Contract(c);i.setLoading(!0),l.save({success:function(){r.load({params:{parent_id:o.selectedParentId}}),i.setLoading(!1),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),this.reject()}})}},editObject:function(){var e=this,t=this.getParentList().getSelectedObject();if(t){var i=e.getList().getSelectedObject(),a=Ext.widget("contractform");a.down("form").loadRecord(i),a.setComboBoxData(i),a.setParentData(t)}},selectionChange:function(e,t){var i=this.getList(),a=this.getContractItemList();t.length>0?(i.enableRecordButtons(),i.enableAddButton(),a.addObjectButton.enable()):(i.disableRecordButtons(),i.disableAddButton(),a.addObjectButton.disable());var n;if(i.getSelectionModel().hasSelection()){var o=i.getSelectionModel().getSelection()[0];n=o.get("id");var s="";s=o?"Contract: "+o.get("code"):"",a.setTitle(s)}a.getStore().getProxy().extraParams.parent_id=n,a.getStore().load()},parentSelectionChange:function(e,t){var i=this,a=i.getList(),n=i.getParentList(),o=i.getWrapper(),s=this.getContractItemList();if(t.length>0?a.enableAddButton():a.disableAddButton(),n.getSelectionModel().hasSelection()){s.getStore().loadData([],!1);var r=n.getSelectionModel().getSelection()[0],d=r.get("id"),c="";c=r?"Customer: "+r.get("name"):"",a.setTitle(c),o.selectedParentId=d}a.getStore().getProxy().extraParams.parent_id=o.selectedParentId,a.getStore().load(),s.setTitle("")},collectObject:function(){var e=Ext.widget("collectcontractform"),t=this.getList().getSelectedObject();e.setParentData(t),e.show()},executeCollect:function(e){var t=this,i=e.up("window"),a=i.down("form"),n=(this.getList(),this.getContractsStore(),this.getList().getSelectedObject()),o=a.getValues();if(n){{n.get("id")}n.set("collected_at",o.collected_at),a.setLoading(!0),n.save({params:{collect:!0},success:function(e){a.setLoading(!1),t.reloadRecord(e),i.close()},failure:function(e,t){a.setLoading(!1);var i=t.request.scope.reader.jsonData.message,n=i.errors;a.getForm().markInvalid(n),e.reject()}})}},confirmObject:function(){var e=Ext.widget("confirmcontractform"),t=this.getList().getSelectedObject();e.setParentData(t),e.show()},executeConfirm:function(e){var t=this,i=e.up("window"),a=i.down("form"),n=(this.getList(),this.getContractsStore()),o=this.getList().getSelectedObject(),s=a.getValues();if(o){{o.get("id")}o.set("confirmed_at",s.confirmed_at),a.setLoading(!0),o.save({params:{confirm:!0},success:function(e){a.setLoading(!1),t.reloadRecord(e),n.load(),i.close()},failure:function(e,t){a.setLoading(!1);var i=t.request.scope.reader.jsonData.message,n=i.errors;a.getForm().markInvalid(n),e.reject()}})}},reloadRecord:function(e){var t=this.getList(),i=this.getList().getStore(),a=e.get("id");AM.model.Contract.load(a,{scope:t,failure:function(){},success:function(e){recToUpdate=i.getById(a),recToUpdate.set(e.getData()),recToUpdate.commit(),t.getView().refreshNode(i.indexOfId(a))},callback:function(){}})},addSavingsObject:function(){var e=this.getList().getSelectedObject();if(console.log("The parent object:"),console.log(e),e){var t=Ext.widget("contractitemform");t.setParentData(e),t.show()}},editSavingsObject:function(){var e=this.getList().getSelectedObject(),t=this.getContractItemList().getSelectedObject();if(e){var i=Ext.widget("contractitemform");i.down("form").loadRecord(t),i.setParentData(e),i.setComboBoxData(t),i.show()}},updateSavingsObject:function(e){console.log("Inside this updateSavingsObject");var t=e.up("window"),i=t.down("form"),a=(this.getParentList(),this.getList().getSelectedObject().get("id")),n=(this.getWrapper(),this.getContractItemsStore()),o=i.getRecord(),s=i.getValues();if(o)o.set(s),i.setLoading(!0),o.save({success:function(){i.setLoading(!1),n.load({params:{parent_id:a}}),t.close()
},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),this.reject()}});else{var r=new AM.model.ContractItem(s);i.setLoading(!0),r.save({success:function(){n.load({params:{parent_id:a}}),i.setLoading(!1),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),this.reject()}})}},deleteSavingsObject:function(){var e=this.getContractItemList().getSelectedObject();if(e){var t=e.get("contract_maintenance_id"),i=this.getContractItemList().getStore();i.remove(e),i.sync(),this.getContractItemList().getStore().getProxy().extraParams.parent_id=t,this.getContractItemList().query("pagingtoolbar")[0].doRefresh()}}}),Ext.define("AM.controller.Customers",{extend:"Ext.app.Controller",stores:["Customers"],models:["Customer"],views:["master.customer.List","master.customer.Form"],refs:[{ref:"list",selector:"customerlist"}],init:function(){this.control({customerlist:{itemdblclick:this.editObject,selectionchange:this.selectionChange,afterrender:this.loadObjectList},"customerform button[action=save]":{click:this.updateObject},"customerlist button[action=addObject]":{click:this.addObject},"customerlist button[action=editObject]":{click:this.editObject},"customerlist button[action=deleteObject]":{click:this.deleteObject},"customerlist textfield[name=searchField]":{change:this.liveSearch}})},liveSearch:function(e,t){var i=this;i.getCustomersStore().getProxy().extraParams={livesearch:t},i.getCustomersStore().load()},loadObjectList:function(e){e.getStore().load()},addObject:function(){var e=Ext.widget("customerform");e.show()},editObject:function(){var e=this.getList().getSelectedObject(),t=Ext.widget("customerform");t.down("form").loadRecord(e),t.setComboBoxData(e)},updateObject:function(e){var t=e.up("window"),i=t.down("form"),a=this.getCustomersStore(),n=i.getRecord(),o=i.getValues();if(n)n.set(o),i.setLoading(!0),n.save({success:function(){i.setLoading(!1),a.load(),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),this.reject()}});else{var s=new AM.model.Customer(o);i.setLoading(!0),s.save({success:function(){a.load(),i.setLoading(!1),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),this.reject()}})}},deleteObject:function(){var e=this.getList().getSelectedObject();if(e){var t=this.getCustomersStore();t.remove(e),t.sync(),this.getList().query("pagingtoolbar")[0].doRefresh()}},selectionChange:function(e,t){var i=this.getList();t.length>0?i.enableRecordButtons():i.disableRecordButtons()}}),Ext.define("AM.controller.DepositDocuments",{extend:"Ext.app.Controller",stores:["DepositDocuments"],models:["DepositDocument"],views:["operation.depositdocument.List","operation.depositdocument.Form"],refs:[{ref:"list",selector:"depositdocumentlist"}],init:function(){this.control({depositdocumentlist:{itemdblclick:this.editObject,selectionchange:this.selectionChange,afterrender:this.loadObjectList},"depositdocumentform button[action=save]":{click:this.updateObject},"depositdocumentlist button[action=addObject]":{click:this.addObject},"depositdocumentlist button[action=editObject]":{click:this.editObject},"depositdocumentlist button[action=deleteObject]":{click:this.deleteObject},"depositdocumentlist button[action=confirmObject]":{click:this.confirmObject},"confirmdepositdocumentform button[action=confirm]":{click:this.executeConfirm},"depositdocumentlist button[action=unconfirmObject]":{click:this.unconfirmObject},"unconfirmdepositdocumentform button[action=unconfirm]":{click:this.executeUnconfirm},"depositdocumentlist button[action=finishObject]":{click:this.finishObject},"finishdepositdocumentform button[action=finish]":{click:this.executeFinish},"depositdocumentlist button[action=unfinishObject]":{click:this.unfinishObject},"unfinishdepositdocumentform button[action=unfinish]":{click:this.executeUnfinish},"depositdocumentlist textfield[name=searchField]":{change:this.liveSearch}})},liveSearch:function(e,t){var i=this;i.getDepositDocumentsStore().getProxy().extraParams={livesearch:t},i.getDepositDocumentsStore().load()},loadObjectList:function(e){e.getStore().load()},addObject:function(){var e=Ext.widget("depositdocumentform");e.show()},editObject:function(){var e=this.getList().getSelectedObject(),t=Ext.widget("depositdocumentform");t.down("form").loadRecord(e),t.setComboBoxData(e)},updateObject:function(e){var t=e.up("window"),i=t.down("form"),a=this.getDepositDocumentsStore(),n=i.getRecord(),o=i.getValues();if(n)n.set(o),i.setLoading(!0),n.save({success:function(){i.setLoading(!1),a.load(),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),this.reject()}});else{var s=new AM.model.DepositDocument(o);i.setLoading(!0),s.save({success:function(){a.load(),i.setLoading(!1),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),this.reject()}})}},deleteObject:function(){var e=this.getList().getSelectedObject();if(e){var t=this.getDepositDocumentsStore();t.remove(e),t.sync(),this.getList().query("pagingtoolbar")[0].doRefresh()}},confirmObject:function(){var e=Ext.widget("confirmdepositdocumentform"),t=this.getList().getSelectedObject();e.setParentData(t),e.show()},unconfirmObject:function(){var e=Ext.widget("unconfirmdepositdocumentform"),t=this.getList().getSelectedObject();e.setParentData(t),e.show()},finishObject:function(){var e=Ext.widget("finishdepositdocumentform"),t=this.getList().getSelectedObject();e.setParentData(t),e.show()},unfinishObject:function(){var e=Ext.widget("unfinishdepositdocumentform"),t=this.getList().getSelectedObject();e.setParentData(t),e.show()},executeConfirm:function(e){var t=e.up("window"),i=t.down("form"),a=(this.getList(),this.getDepositDocumentsStore()),n=this.getList().getSelectedObject(),o=i.getValues();if(n){{n.get("id")}n.set("confirmed_at",o.confirmed_at),i.setLoading(!0),n.save({params:{confirm:!0},success:function(){i.setLoading(!1),a.load(),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),e.reject()}})}},executeUnconfirm:function(e){{var t=e.up("window"),i=t.down("form"),a=(this.getList(),this.getDepositDocumentsStore()),n=this.getList().getSelectedObject();i.getValues()}if(n){{n.get("id")}i.setLoading(!0),n.save({params:{unconfirm:!0},success:function(){i.setLoading(!1),a.load(),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),e.reject()}})}},executeFinish:function(e){var t=e.up("window"),i=t.down("form"),a=(this.getList(),this.getDepositDocumentsStore()),n=this.getList().getSelectedObject(),o=i.getValues();if(n){{n.get("id")}n.set("finished_at",o.finished_at),n.set("amount_charge",o.amount_charge),i.setLoading(!0),n.save({params:{finish:!0},success:function(){i.setLoading(!1),a.load(),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),e.reject()}})}},executeUnfinish:function(e){{var t=e.up("window"),i=t.down("form"),a=(this.getList(),this.getDepositDocumentsStore()),n=this.getList().getSelectedObject();i.getValues()}if(n){{n.get("id")}i.setLoading(!0),n.save({params:{unfinish:!0},success:function(){i.setLoading(!1),a.load(),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),e.reject()}})}},selectionChange:function(e,t){var i=this.getList();t.length>0?i.enableRecordButtons():i.disableRecordButtons()}}),Ext.define("AM.controller.HomeAssignments",{extend:"Ext.app.Controller",stores:["Homes","HomeAssignments"],models:["HomeAssignment"],views:["master.homeassignment.List","master.homeassignment.Form","master.HomeAssignment","master.HomeList"],refs:[{ref:"wrapper",selector:"homeassignmentProcess"},{ref:"parentList",selector:"homeassignmentProcess masterhomeList"},{ref:"list",selector:"homeassignmentlist"},{ref:"searchField",selector:"masterhomeList textfield[name=searchField]"}],init:function(){this.control({"homeassignmentProcess masterhomeList":{afterrender:this.loadParentObjectList,selectionchange:this.parentSelectionChange}," masterhomeList":{destroy:this.onDestroy}," homeassignmentlist":{itemdblclick:this.editObject,selectionchange:this.selectionChange},"homeassignmentform button[action=save]":{click:this.updateObject},"homeassignmentlist button[action=addObject]":{click:this.addObject},"homeassignmentlist button[action=editObject]":{click:this.editObject},"homeassignmentlist button[action=deleteObject]":{click:this.deleteObject},"homeassignmentProcess masterhomeList textfield[name=searchField]":{change:this.liveSearch},"homelist button[action=deactivateObject]":{click:this.deactivateObject},"deactivateitemform button[action=confirmDeactivate]":{click:this.executeDeactivate}})},onDestroy:function(){this.getHomeAssignmentsStore().loadData([],!1)},liveSearch:function(e,t){var i=this;i.getHomesStore().getProxy().extraParams={livesearch:t},i.getHomesStore().load()},loadObjectList:function(e){e.getStore().load()},loadParentObjectList:function(e){console.log("after render from item"),e.getStore().getProxy().extraParams={},e.getStore().load()},addObject:function(){var e=this.getParentList().getSelectedObject();if(e){var t=Ext.widget("homeassignmentform");t.show(),t.setParentData(e)}},editObject:function(){var e=this.getList().getSelectedObject(),t=Ext.widget("homeassignmentform");t.setComboBoxData(e),t.down("form").loadRecord(e)},updateObject:function(e){var t=e.up("window"),i=t.down("form"),a=(this.getParentList(),this.getWrapper()),n=this.getHomeAssignmentsStore(),o=i.getRecord(),s=i.getValues();if(o)o.set(s),i.setLoading(!0),o.save({success:function(){i.setLoading(!1),n.load({params:{parent_id:a.selectedParentId}}),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),this.reject()}});else{var r=new AM.model.HomeAssignment(s);i.setLoading(!0),r.save({success:function(){n.load({params:{parent_id:a.selectedParentId}}),i.setLoading(!1),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),this.reject()}})}},deleteObject:function(){var e=this.getList().getSelectedObject();if(e){var t=this.getUsersStore();t.remove(e),t.sync(),this.getList().query("pagingtoolbar")[0].doRefresh()}},selectionChange:function(e,t){var i=this.getList();t.length>0?i.enableRecordButtons():i.disableRecordButtons()},deactivateObject:function(){var e=Ext.widget("deactivateitemform"),t=this.getList().getSelectedObject();e.setParentData(t),e.show()},executeDeactivate:function(e){var t=e.up("window"),i=t.down("form"),a=(this.getList(),this.getUsersStore()),n=this.getList().getSelectedObject(),o=i.getValues();if(n){{n.get("id")}n.set("deactivation_case",o.deactivation_case),i.setLoading(!0),n.save({params:{deactivate:!0},success:function(){i.setLoading(!1),a.load(),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),e.reject()}})}},parentSelectionChange:function(e,t){var i=this,a=i.getList(),n=i.getParentList(),o=i.getWrapper();if(t.length>0?a.enableAddButton():a.disableAddButton(),n.getSelectionModel().hasSelection()){var s=n.getSelectionModel().getSelection()[0],r=s.get("id");o.selectedParentId=r}a.getStore().getProxy().extraParams.parent_id=o.selectedParentId,a.getStore().load()}}),Ext.define("AM.controller.HomeTypes",{extend:"Ext.app.Controller",stores:["HomeTypes"],models:["HomeType"],views:["master.hometype.List","master.hometype.Form"],refs:[{ref:"list",selector:"hometypelist"}],init:function(){this.control({hometypelist:{itemdblclick:this.editObject,selectionchange:this.selectionChange,afterrender:this.loadObjectList},"hometypeform button[action=save]":{click:this.updateObject},"hometypelist button[action=addObject]":{click:this.addObject},"hometypelist button[action=editObject]":{click:this.editObject},"hometypelist button[action=deleteObject]":{click:this.deleteObject},"hometypelist textfield[name=searchField]":{change:this.liveSearch}})},liveSearch:function(e,t){var i=this;i.getHomeTypesStore().getProxy().extraParams={livesearch:t},i.getHomeTypesStore().load()},loadObjectList:function(e){e.getStore().load()},addObject:function(){var e=Ext.widget("hometypeform");e.show()},editObject:function(){var e=this.getList().getSelectedObject(),t=Ext.widget("hometypeform");t.down("form").loadRecord(e),t.setComboBoxData(e)},updateObject:function(e){var t=e.up("window"),i=t.down("form"),a=this.getHomeTypesStore(),n=i.getRecord(),o=i.getValues();if(n)n.set(o),i.setLoading(!0),n.save({success:function(){i.setLoading(!1),a.load(),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),this.reject()}});else{var s=new AM.model.HomeType(o);i.setLoading(!0),s.save({success:function(){a.load(),i.setLoading(!1),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),this.reject()}})}},deleteObject:function(){var e=this.getList().getSelectedObject();if(e){var t=this.getHomeTypesStore();t.remove(e),t.sync(),this.getList().query("pagingtoolbar")[0].doRefresh()}},selectionChange:function(e,t){var i=this.getList();t.length>0?i.enableRecordButtons():i.disableRecordButtons()}}),Ext.define("AM.controller.Homes",{extend:"Ext.app.Controller",stores:["Homes"],models:["Home"],views:["master.home.List","master.home.Form"],refs:[{ref:"list",selector:"homelist"}],init:function(){this.control({homelist:{itemdblclick:this.editObject,selectionchange:this.selectionChange,afterrender:this.loadObjectList},"homeform button[action=save]":{click:this.updateObject},"homelist button[action=addObject]":{click:this.addObject},"homelist button[action=editObject]":{click:this.editObject},"homelist button[action=deleteObject]":{click:this.deleteObject},"homelist textfield[name=searchField]":{change:this.liveSearch}})},liveSearch:function(e,t){var i=this;i.getHomesStore().getProxy().extraParams={livesearch:t},i.getHomesStore().load()},loadObjectList:function(e){e.getStore().load()},addObject:function(){var e=Ext.widget("homeform");e.show()},editObject:function(){var e=this.getList().getSelectedObject(),t=Ext.widget("homeform");t.down("form").loadRecord(e),t.setComboBoxData(e)},updateObject:function(e){var t=e.up("window"),i=t.down("form"),a=this.getHomesStore(),n=i.getRecord(),o=i.getValues();if(n)n.set(o),i.setLoading(!0),n.save({success:function(){i.setLoading(!1),a.load(),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),this.reject()}});else{var s=new AM.model.Home(o);i.setLoading(!0),s.save({success:function(){a.load(),i.setLoading(!1),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),this.reject()}})}},deleteObject:function(){var e=this.getList().getSelectedObject();if(e){var t=this.getHomesStore();t.remove(e),t.sync(),this.getList().query("pagingtoolbar")[0].doRefresh()}},selectionChange:function(e,t){var i=this.getList();t.length>0?i.enableRecordButtons():i.disableRecordButtons()}}),Ext.define("AM.controller.Invoices",{extend:"Ext.app.Controller",stores:["Invoices"],models:["Invoice"],views:["operation.invoice.List"],refs:[{ref:"list",selector:"invoicelist"}],init:function(){this.control({invoicelist:{selectionchange:this.selectionChange,afterrender:this.loadObjectList},"invoicelist textfield[name=searchField]":{change:this.liveSearch}})},liveSearch:function(e,t){var i=this;i.getInvoicesStore().getProxy().extraParams={livesearch:t},i.getInvoicesStore().load()},loadObjectList:function(e){e.getStore().load()},selectionChange:function(e,t){var i=this.getList();t.length>0?i.enableRecordButtons():i.disableRecordButtons()}}),Ext.define("AM.controller.ItemTypes",{extend:"Ext.app.Controller",stores:["ItemTypes"],models:["ItemType"],views:["master.itemtype.List","master.itemtype.Form"],refs:[{ref:"list",selector:"itemtypelist"}],init:function(){this.control({itemtypelist:{itemdblclick:this.editObject,selectionchange:this.selectionChange,afterrender:this.loadObjectList},"itemtypeform button[action=save]":{click:this.updateObject},"itemtypelist button[action=addObject]":{click:this.addObject},"itemtypelist button[action=editObject]":{click:this.editObject},"itemtypelist button[action=deleteObject]":{click:this.deleteObject},"itemtypelist textfield[name=searchField]":{change:this.liveSearch}})},liveSearch:function(e,t){var i=this;i.getItemTypesStore().getProxy().extraParams={livesearch:t},i.getItemTypesStore().load()},loadObjectList:function(e){e.getStore().load()},addObject:function(){var e=Ext.widget("itemtypeform");e.show()},editObject:function(){var e=this.getList().getSelectedObject(),t=Ext.widget("itemtypeform");t.down("form").loadRecord(e),t.setComboBoxData(e)},updateObject:function(e){var t=e.up("window"),i=t.down("form"),a=this.getItemTypesStore(),n=i.getRecord(),o=i.getValues();if(n)n.set(o),i.setLoading(!0),n.save({success:function(){i.setLoading(!1),a.load(),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),this.reject()}});else{var s=new AM.model.ItemType(o);i.setLoading(!0),s.save({success:function(){a.load(),i.setLoading(!1),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),this.reject()}})}},deleteObject:function(){var e=this.getList().getSelectedObject();if(e){var t=this.getItemTypesStore();t.remove(e),t.sync(),this.getList().query("pagingtoolbar")[0].doRefresh()}},selectionChange:function(e,t){var i=this.getList();t.length>0?i.enableRecordButtons():i.disableRecordButtons()}}),Ext.define("AM.controller.Items",{extend:"Ext.app.Controller",stores:["Customers","Items"],models:["Item"],views:["master.item.List","master.item.Form","master.Item","master.CustomerList"],refs:[{ref:"wrapper",selector:"itemProcess"},{ref:"parentList",selector:"itemProcess mastercustomerList"},{ref:"list",selector:"itemlist"},{ref:"searchField",selector:"itemlist textfield[name=searchField]"}],init:function(){this.control({"itemProcess mastercustomerList":{afterrender:this.loadParentObjectList,selectionchange:this.parentSelectionChange},itemlist:{itemdblclick:this.editObject,selectionchange:this.selectionChange,destroy:this.onDestroy},"itemform button[action=save]":{click:this.updateObject},"itemlist button[action=addObject]":{click:this.addObject},"itemlist button[action=editObject]":{click:this.editObject},"itemlist button[action=deleteObject]":{click:this.deleteObject},"itemProcess mastercustomerList textfield[name=searchField]":{change:this.liveSearch},"itemlist button[action=deactivateObject]":{click:this.deactivateObject},"deactivateitemform button[action=confirmDeactivate]":{click:this.executeDeactivate}})},onDestroy:function(){this.getItemsStore().loadData([],!1)},liveSearch:function(e,t){var i=this;i.getCustomersStore().getProxy().extraParams={livesearch:t},i.getCustomersStore().load()},loadObjectList:function(e){e.getStore().load()},loadParentObjectList:function(e){console.log("after render from item"),e.getStore().getProxy().extraParams={},e.getStore().load()},addObject:function(){var e=this.getParentList().getSelectedObject();if(e){var t=Ext.widget("itemform");t.show(),t.setParentData(e)}},editObject:function(){var e=this.getList().getSelectedObject(),t=Ext.widget("itemform");t.setComboBoxData(e),t.down("form").loadRecord(e)},updateObject:function(e){var t=e.up("window"),i=t.down("form"),a=(this.getParentList(),this.getWrapper()),n=this.getItemsStore(),o=i.getRecord(),s=i.getValues();if(o)o.set(s),i.setLoading(!0),o.save({success:function(){i.setLoading(!1),n.load({params:{parent_id:a.selectedParentId}}),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),this.reject()}});else{var r=new AM.model.Item(s);i.setLoading(!0),r.save({success:function(){n.load({params:{parent_id:a.selectedParentId}}),i.setLoading(!1),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),this.reject()}})}},deleteObject:function(){var e=this.getList().getSelectedObject();if(e){var t=this.getItemsStore();t.remove(e),t.sync(),this.getList().query("pagingtoolbar")[0].doRefresh()}},selectionChange:function(e,t){var i=this.getList();t.length>0?i.enableRecordButtons():i.disableRecordButtons()},deactivateObject:function(){var e=Ext.widget("deactivateitemform"),t=this.getList().getSelectedObject();e.setParentData(t),e.show()},executeDeactivate:function(e){var t=e.up("window"),i=t.down("form"),a=(this.getList(),this.getItemsStore()),n=this.getList().getSelectedObject(),o=i.getValues();if(n){{n.get("id")}n.set("deactivation_case",o.deactivation_case),i.setLoading(!0),n.save({params:{deactivate:!0},success:function(){i.setLoading(!1),a.load(),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),e.reject()}})}},parentSelectionChange:function(e,t){var i=this,a=i.getList(),n=i.getParentList(),o=i.getWrapper();if(t.length>0?a.enableAddButton():a.disableAddButton(),n.getSelectionModel().hasSelection()){var s=n.getSelectionModel().getSelection()[0],r=s.get("id");o.selectedParentId=r}a.getStore().getProxy().extraParams.parent_id=o.selectedParentId,a.getStore().load()}}),Ext.define("AM.controller.Maintenances",{extend:"Ext.app.Controller",stores:["Customers","Maintenances"],models:["Maintenance"],views:["operation.maintenance.List","operation.maintenance.Form","operation.Maintenance","master.CustomerList"],refs:[{ref:"wrapper",selector:"maintenanceProcess"},{ref:"parentList",selector:"maintenanceProcess mastercustomerList"},{ref:"list",selector:"maintenancelist"},{ref:"searchField",selector:"maintenancelist textfield[name=searchField]"}],init:function(){this.control({"maintenanceProcess mastercustomerList":{afterrender:this.loadParentObjectList,selectionchange:this.parentSelectionChange},maintenancelist:{itemdblclick:this.editObject,selectionchange:this.selectionChange,destroy:this.onDestroy},"maintenanceform button[action=save]":{click:this.updateObject},"maintenancelist button[action=addObject]":{click:this.addObject},"maintenancelist button[action=editObject]":{click:this.editObject},"maintenancelist button[action=deleteObject]":{click:this.deleteObject},"maintenanceProcess mastercustomerList textfield[name=searchField]":{change:this.liveSearch},"maintenancelist button[action=diagnoseObject]":{click:this.diagnoseObject},"diagnosemaintenanceform button[action=confirmDiagnose]":{click:this.executeDiagnose},"maintenancelist button[action=solveObject]":{click:this.solveObject},"solvemaintenanceform button[action=confirmSolve]":{click:this.executeSolve}})},onDestroy:function(){this.getMaintenancesStore().loadData([],!1)},liveSearch:function(e,t){var i=this;i.getCustomersStore().getProxy().extraParams={livesearch:t},i.getCustomersStore().load()},loadObjectList:function(e){e.getStore().load()},loadParentObjectList:function(e){this.getMaintenancesStore().loadData([],!1),e.getStore().getProxy().extraParams={},e.getStore().load(),this.getList().disableAddButton()},addObject:function(){var e=this.getParentList().getSelectedObject();if(e){var t=Ext.widget("maintenanceform");t.setParentData(e),t.show()}},editObject:function(){var e=this.getList().getSelectedObject();if(e){var t=this.getParentList().getSelectedObject(),i=Ext.widget("maintenanceform");i.setParentData(t),i.setComboBoxData(e),i.down("form").loadRecord(e)}},updateObject:function(e){var t=e.up("window"),i=t.down("form"),a=(this.getParentList(),this.getWrapper()),n=this.getMaintenancesStore(),o=i.getRecord(),s=i.getValues();if(o)o.set(s),i.setLoading(!0),o.save({success:function(){i.setLoading(!1),n.load({params:{parent_id:a.selectedParentId}}),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),this.reject()}});else{var r=new AM.model.Maintenance(s);i.setLoading(!0),r.save({success:function(){n.load({params:{parent_id:a.selectedParentId}}),i.setLoading(!1),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),this.reject()}})}},deleteObject:function(){var e=this.getList().getSelectedObject();if(e){var t=this.getMaintenancesStore();t.remove(e),t.sync(),this.getList().query("pagingtoolbar")[0].doRefresh()}},selectionChange:function(e,t){var i=this.getList();t.length>0?i.enableRecordButtons():i.disableRecordButtons()},diagnoseObject:function(){var e=Ext.widget("diagnosemaintenanceform"),t=this.getList().getSelectedObject();e.setParentData(t),e.show()},executeDiagnose:function(e){var t=e.up("window"),i=t.down("form"),a=(this.getList(),this.getMaintenancesStore()),n=this.getList().getSelectedObject(),o=i.getValues();if(n){{n.get("id")}n.set("diagnosis_case",o.diagnosis_case),n.set("diagnosis",o.diagnosis),n.set("diagnosis_date",o.diagnosis_date),i.setLoading(!0),n.save({params:{diagnosis:!0},success:function(){i.setLoading(!1),a.load(),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),e.reject()}})}},solveObject:function(){var e=Ext.widget("solvemaintenanceform"),t=this.getList().getSelectedObject();e.setParentData(t),e.show()},executeSolve:function(e){var t=e.up("window"),i=t.down("form"),a=(this.getList(),this.getMaintenancesStore()),n=this.getList().getSelectedObject(),o=i.getValues();if(n){{n.get("id")}n.set("solution_case",o.solution_case),n.set("solution",o.solution),n.set("solution_date",o.solution_date),i.query("checkbox").forEach(function(e){n.set(e.name,e.checked)}),i.setLoading(!0),n.save({params:{solve:!0},success:function(){i.setLoading(!1),a.load(),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),e.reject()}})}},parentSelectionChange:function(e,t){var i=this,a=i.getList(),n=i.getParentList(),o=i.getWrapper();if(t.length>0?a.enableAddButton():a.disableAddButton(),n.getSelectionModel().hasSelection()){var s=n.getSelectionModel().getSelection()[0],r=s.get("id");o.selectedParentId=r}a.getStore().getProxy().extraParams.parent_id=o.selectedParentId,a.getStore().load()}}),Ext.define("AM.controller.Master",{extend:"AM.controller.BaseTreeBuilder",views:["master.MasterProcessList","MasterProcessPanel","Viewport"],refs:[{ref:"masterProcessPanel",selector:"masterProcessPanel"},{ref:"masterProcessList",selector:"masterProcessList"}],init:function(){var e=this;e.control({masterProcessPanel:{activate:this.onActiveProtectedContent,deactivate:this.onDeactivated}})},onDeactivated:function(){var e=Ext.ComponentQuery.query("masterProcessPanel #worksheetPanel")[0];e.setTitle(!1),e.removeAll();var t=Ext.create("AM.view.master.Default");e.add(t)},setupFolder:{text:"Setup",viewClass:"",iconCls:"text-folder",expanded:!0,children:[{text:"User",viewClass:"AM.view.master.User",leaf:!0,iconCls:"text",conditions:[{controller:"users",action:"index"}]},{text:"Home",viewClass:"AM.view.master.Home",leaf:!0,iconCls:"text",conditions:[{controller:"homes",action:"index"}]},{text:"Home Type",viewClass:"AM.view.master.HomeType",leaf:!0,iconCls:"text",conditions:[{controller:"home_types",action:"index"}]},{text:"Home Assignment",viewClass:"AM.view.master.HomeAssignment",leaf:!0,iconCls:"text",conditions:[{controller:"home_assignments",action:"index"}]},{text:"Vendor",viewClass:"AM.view.master.Vendor",leaf:!0,iconCls:"text",conditions:[{controller:"vendors",action:"index"}]},{text:"CashBank",viewClass:"AM.view.master.CashBank",leaf:!0,iconCls:"text",conditions:[{controller:"cashbanks",action:"index"}]},{text:"CashBankAdjustment",viewClass:"AM.view.master.CashBankAdjustment",leaf:!0,iconCls:"text",conditions:[{controller:"cashbankadjustments",action:"index"}]},{text:"CashBankMutation",viewClass:"AM.view.master.CashBankMutation",leaf:!0,iconCls:"text",conditions:[{controller:"cashbankmutations",action:"index"}]},{text:"CashMutation",viewClass:"AM.view.master.CashMutation",leaf:!0,iconCls:"text",conditions:[{controller:"cashmutations",action:"index"}]}]},customerSetupFolder:{text:"CustomerSetup",viewClass:"",iconCls:"text-folder",expanded:!0,children:[{text:"Item",viewClass:"AM.view.master.Item",leaf:!0,iconCls:"text",conditions:[{controller:"items",action:"index"}]}]},reportFolder:{text:"Employee Report",viewClass:"",iconCls:"text-folder",expanded:!0,children:[{text:"By Customer",viewClass:"AM.view.master.report.employee.WorkCustomer",leaf:!0,iconCls:"text",conditions:[{controller:"maintenances",action:"report"}]}]},onActiveProtectedContent:function(e){{var t=this,i=Ext.decode(localStorage.getItem("currentUser"));i.email}t.folderList=[this.setupFolder];var a=e.down("masterProcessList");a.setLoading(!0);var n=a.getStore();n.removeAll(),n.setRootNode(this.buildNavigation(i)),a.setLoading(!1)}}),Ext.define("AM.controller.MasterReportEmployeeWorkCustomerReports",{extend:"Ext.app.Controller",views:["master.report.employee.WorkCustomer","report.workcustomer.List","master.report.UserList","Viewport"],refs:[{ref:"list",selector:"workcustomerList"},{ref:"recordList",selector:"masterreportemployeeWorkCustomerReport masterreportuserList"},{ref:"viewport",selector:"vp"},{ref:"report",selector:"masterreportemployeeWorkCustomerReport"}],init:function(){console.log("init controller for master.employee.WorkCustomerReports"),this.control({"masterreportemployeeWorkCustomerReport chartInspect":{chartLoaded:this.clearList,seriesClicked:this.updateList,activate:this.onActivePanel,afterrender:this.onAfterRender,destroy:this.onDestroy,beforedestroy:this.onBeforeDestroy,beforerender:this.onBeforeRender},"masterreportemployeeWorkCustomerReport masterreportuserList":{selectionchange:this.recordSelectionChange,afterrender:this.loadRecordList}})},loadRecordList:function(){var e=this.getRecordList();e.store.load()},recordSelectionChange:function(){console.log("WorkCustomerReports#recordSelectionChange");var e=this.getRecordList(),t=this.getReport();if(e.getSelectionModel().hasSelection()){var i=e.getSelectionModel().getSelection()[0],a=i.get("id"),n=t.down("chartInspect");console.log("The selected id: "+a),n.selectedParentRecordId=a,n.parentRecordType="user",n.viewer="master",n.loadStore()}},onBeforeRender:function(){var e=this.getList();e.store.loadData([],!1)},clearList:function(){var e=this.getList();e.store.loadData([],!1),e.setTitle("")},updateList:function(e,t,i){var a=this.getList(),n=e.value[0];if(result=i.store1.queryBy(function(e){return e.get("name")===n}),0===result.length)return void Ext.Msg.alert("Error","No series selected");var o=0;"month"===t&&(o=1);var s=null,r=this.getRecordList();if(r.getSelectionModel().hasSelection()){var d=r.getSelectionModel().getSelection()[0],c=d.get("id");s=c}var l=this.getViewport();console.log("currentFocusDate:"),console.log(Ext.Date.format(i.currentFocusDate,"Y-m-d H:i:s")),a.store.getProxy().extraParams={viewValue:o,selectedRecordId:result.items[0].get("id"),perspective:"project",viewer:"master",selectedParentRecordId:s,parentRecordType:"user",companyView:!1,focusDate:Ext.Date.format(i.currentFocusDate,"Y-m-d H:i:s")},l.setLoading(!0),a.store.load({callback:function(){a.setTitle(n),l.setLoading(!1)}})},onActivePanel:function(){},onAfterRender:function(){var e=this.getList();e.store.loadData([],!1);var t=this.getRecordList();t.store.load()},onDestroy:function(){},onBeforeDestroy:function(){var e=this.getList();e.store.getProxy().extraParams={}}}),Ext.define("AM.controller.MasterTreeNavigation",{extend:"Ext.app.Controller",views:["master.MasterProcessList"],refs:[{ref:"masterProcessList",selector:"masterProcessList"},{ref:"worksheetPanel",selector:"#worksheetPanel"}],init:function(){var e=this;e.control({masterProcessList:{select:this.onTreeRecordSelected}})},onTreeRecordSelected:function(e,t){t.isLeaf()&&this.setActiveExample(t.get("viewClass"),t.get("text"))},setActiveExample:function(e,t){var i=this.getWorksheetPanel();i.setTitle(t),worksheet=Ext.create(e),i.removeAll(),i.add(worksheet)
}}),Ext.define("AM.controller.MonthlyGenerators",{extend:"Ext.app.Controller",stores:["MonthlyGeneratorInvoices","MonthlyGenerators"],models:["MonthlyGenerator"],views:["operation.monthlygenerator.List","operation.monthlygenerator.Form","operation.MonthlyGenerator","operation.monthlygeneratorinvoice.List"],refs:[{ref:"wrapper",selector:"monthlygeneratorProcess"},{ref:"parentList",selector:"monthlygeneratorlist"},{ref:"list",selector:"monthlygeneratorinvoiceList"},{ref:"searchField",selector:"monthlygeneratorlist textfield[name=searchField]"}],init:function(){this.control({"monthlygeneratorProcess monthlygeneratorlist":{afterrender:this.loadParentObjectList,selectionchange:this.parentSelectionChange,itemdblclick:this.editObject}," monthlygeneratorlist":{destroy:this.onDestroy}," masterinvoiceList":{itemdblclick:this.editObject,selectionchange:this.selectionChange},"monthlygeneratorform button[action=save]":{click:this.updateObject},"monthlygeneratorlist button[action=addObject]":{click:this.addObject},"monthlygeneratorlist button[action=editObject]":{click:this.editObject},"monthlygeneratorlist button[action=deleteObject]":{click:this.deleteObject},"monthlygeneratorlist button[action=confirmObject]":{click:this.confirmObject},"confirmmonthlygeneratorform button[action=confirm]":{click:this.executeConfirm},"monthlygeneratorlist button[action=unconfirmObject]":{click:this.unconfirmObject},"unconfirmmonthlygeneratorform button[action=unconfirm]":{click:this.executeUnconfirm},"monthlygeneratorlist textfield[name=searchField]":{change:this.liveSearch},"monthlygeneratorProcess masterinvoiceList textfield[name=searchField]":{change:this.liveSearch}})},onDestroy:function(){console.log("calling on destroy"),this.getMonthlyGeneratorInvoicesStore().loadData([],!1),this.getMonthlyGeneratorsStore().loadData([],!1)},liveSearch:function(e,t){var i=this;i.getMonthlyGeneratorsStore().getProxy().extraParams={livesearch:t},i.getMonthlyGeneratorsStore().load()},loadObjectList:function(e){e.getStore().load()},loadParentObjectList:function(e){e.getStore().getProxy().extraParams={},e.getStore().load()},addObject:function(){var e=Ext.widget("monthlygeneratorform");e.show()},editObject:function(){var e=this.getParentList().getSelectedObject(),t=Ext.widget("monthlygeneratorform");t.down("form").loadRecord(e),t.setComboBoxData(e)},updateObject:function(e){var t=e.up("window"),i=t.down("form"),a=this.getMonthlyGeneratorsStore(),n=i.getRecord(),o=i.getValues();if(n)n.set(o),i.setLoading(!0),n.save({success:function(){i.setLoading(!1),a.load(),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),this.reject()}});else{var s=new AM.model.MonthlyGenerator(o);i.setLoading(!0),s.save({success:function(){a.load(),i.setLoading(!1),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),this.reject()}})}},deleteObject:function(){var e=this.getList().getSelectedObject();if(e){var t=this.getMonthlyGeneratorsStore();t.remove(e),t.sync(),this.getList().query("pagingtoolbar")[0].doRefresh()}},confirmObject:function(){var e=Ext.widget("confirmmonthlygeneratorform"),t=this.getParentList().getSelectedObject();e.setParentData(t),e.show()},unconfirmObject:function(){var e=Ext.widget("unconfirmmonthlygeneratorform"),t=this.getParentList().getSelectedObject();e.setParentData(t),e.show()},executeConfirm:function(e){var t=e.up("window"),i=t.down("form"),a=(this.getParentList(),this.getMonthlyGeneratorsStore()),n=this.getParentList().getSelectedObject(),o=i.getValues();if(n){{n.get("id")}n.set("confirmed_at",o.confirmed_at),i.setLoading(!0),n.save({params:{confirm:!0},success:function(){i.setLoading(!1),a.load(),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),e.reject()}})}},executeUnconfirm:function(e){{var t=e.up("window"),i=t.down("form"),a=(this.getParentList(),this.getMonthlyGeneratorsStore()),n=this.getParentList().getSelectedObject();i.getValues()}if(n){{n.get("id")}i.setLoading(!0),n.save({params:{unconfirm:!0},success:function(){i.setLoading(!1),a.load(),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),e.reject()}})}},selectionChange:function(){},parentSelectionChange:function(e,t){var i=this,a=i.getList(),n=i.getParentList(),o=i.getWrapper();if(n.getSelectionModel().hasSelection()){var s=n.getSelectionModel().getSelection()[0],r=s.get("id");o.selectedParentId=r}t.length>0?n.enableRecordButtons():n.disableRecordButtons(),a.getStore().getProxy().extraParams.parent_id=o.selectedParentId,a.getStore().load()}}),Ext.define("AM.controller.Navigation",{extend:"Ext.app.Controller",views:["Content"],refs:[{ref:"viewport",selector:"vp"},{ref:"content",selector:"content"}],init:function(){var e=this;e.control({"navigation	button[action=switchPersonalReport], navigation button[action=switchOperation], navigation button[action=switchMaster]":{click:e.switchScreen}})},switchScreen:function(e){{var t=this;AM.view.Constants[e.action]}t.getContent().layout.setActiveItem(AM.view.Constants[e.action])}}),Ext.define("AM.controller.Operation",{extend:"AM.controller.BaseTreeBuilder",views:["operation.OperationProcessList","OperationProcessPanel","Viewport"],refs:[{ref:"operationProcessPanel",selector:"operationProcessPanel"},{ref:"operationProcessList",selector:"operationProcessList"}],init:function(){var e=this;e.control({operationProcessPanel:{activate:this.onActiveProtectedContent,deactivate:this.onDeactivated}})},onDeactivated:function(){var e=Ext.ComponentQuery.query("operationProcessPanel #operationWorksheetPanel")[0];e.setTitle(!1),e.removeAll();var t=Ext.create("AM.view.operation.Default");e.add(t)},scheduledFolder:{text:"Operation",viewClass:"",iconCls:"text-folder",expanded:!0,children:[{text:"Invoice",viewClass:"AM.view.operation.Invoice",leaf:!0,iconCls:"text",conditions:[{controller:"invoices",action:"index"}]},{text:"Advanced Payment",viewClass:"AM.view.operation.AdvancedPayment",leaf:!0,iconCls:"text",conditions:[{controller:"advanced_payments",action:"index"}]},{text:"Monthly Generator",viewClass:"AM.view.operation.MonthlyGenerator",leaf:!0,iconCls:"text",conditions:[{controller:"monthly_generators",action:"index"}]},{text:"PaymentRequest",viewClass:"AM.view.operation.PaymentRequest",leaf:!0,iconCls:"text",conditions:[{controller:"payment_requests",action:"index"}]},{text:"DepositDocument",viewClass:"AM.view.operation.DepositDocument",leaf:!0,iconCls:"text",conditions:[{controller:"deposit_documents",action:"index"}]}]},financeFolder:{text:"Finance",viewClass:"",iconCls:"text-folder",expanded:!0,children:[{text:"PaymentVoucher",viewClass:"AM.view.operation.PaymentVoucher",leaf:!0,iconCls:"text",conditions:[{controller:"payment_vouchers",action:"index"}]},{text:"ReceiptVoucher",viewClass:"AM.view.operation.ReceiptVoucher",leaf:!0,iconCls:"text",conditions:[{controller:"receipt_vouchers",action:"index"}]}]},emergencyFolder:{text:"Emergency",viewClass:"",iconCls:"text-folder",expanded:!0,children:[{text:"Ticket",viewClass:"AM.view.operation.Item",leaf:!0,iconCls:"text",conditions:[{controller:"items",action:"index"}]},{text:"Result",viewClass:"AM.view.operation.Contract",leaf:!0,iconCls:"text",conditions:[{controller:"contract_maintenances",action:"index"}]}]},onActiveProtectedContent:function(e){{var t=this,i=Ext.decode(localStorage.getItem("currentUser"));i.email}t.folderList=[this.scheduledFolder,this.financeFolder];var a=e.down("operationProcessList");a.setLoading(!0);var n=a.getStore();n.removeAll(),n.setRootNode(this.buildNavigation(i)),a.setLoading(!1)}}),Ext.define("AM.controller.OperationTreeNavigation",{extend:"Ext.app.Controller",views:["operation.OperationProcessList"],refs:[{ref:"operationProcessList",selector:"operationProcessList"},{ref:"worksheetPanel",selector:"#operationWorksheetPanel"}],init:function(){var e=this;e.control({operationProcessList:{select:this.onTreeRecordSelected}})},onTreeRecordSelected:function(e,t){t.isLeaf()&&this.setActiveExample(t.get("viewClass"),t.get("text"))},setActiveExample:function(e,t){var i=this.getWorksheetPanel();i.setTitle(t),worksheet=Ext.create(e),i.removeAll(),i.add(worksheet)}}),Ext.define("AM.controller.PaymentRequests",{extend:"Ext.app.Controller",stores:["PaymentRequests"],models:["PaymentRequest"],views:["operation.paymentrequest.List","operation.paymentrequest.Form"],refs:[{ref:"list",selector:"paymentrequestlist"}],init:function(){this.control({paymentrequestlist:{itemdblclick:this.editObject,selectionchange:this.selectionChange,afterrender:this.loadObjectList},"paymentrequestform button[action=save]":{click:this.updateObject},"paymentrequestlist button[action=addObject]":{click:this.addObject},"paymentrequestlist button[action=editObject]":{click:this.editObject},"paymentrequestlist button[action=deleteObject]":{click:this.deleteObject},"paymentrequestlist button[action=confirmObject]":{click:this.confirmObject},"confirmpaymentrequestform button[action=confirm]":{click:this.executeConfirm},"paymentrequestlist button[action=unconfirmObject]":{click:this.unconfirmObject},"unconfirmpaymentrequestform button[action=unconfirm]":{click:this.executeUnconfirm},"paymentrequestlist textfield[name=searchField]":{change:this.liveSearch}})},liveSearch:function(e,t){var i=this;i.getPaymentRequestsStore().getProxy().extraParams={livesearch:t},i.getPaymentRequestsStore().load()},loadObjectList:function(e){e.getStore().load()},addObject:function(){var e=Ext.widget("paymentrequestform");e.show()},editObject:function(){var e=this.getList().getSelectedObject(),t=Ext.widget("paymentrequestform");t.down("form").loadRecord(e),t.setComboBoxData(e)},updateObject:function(e){var t=e.up("window"),i=t.down("form"),a=this.getPaymentRequestsStore(),n=i.getRecord(),o=i.getValues();if(n)n.set(o),i.setLoading(!0),n.save({success:function(){i.setLoading(!1),a.load(),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),this.reject()}});else{var s=new AM.model.PaymentRequest(o);i.setLoading(!0),s.save({success:function(){a.load(),i.setLoading(!1),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),this.reject()}})}},deleteObject:function(){var e=this.getList().getSelectedObject();if(e){var t=this.getPaymentRequestsStore();t.remove(e),t.sync(),this.getList().query("pagingtoolbar")[0].doRefresh()}},confirmObject:function(){var e=Ext.widget("confirmpaymentrequestform"),t=this.getList().getSelectedObject();e.setParentData(t),e.show()},unconfirmObject:function(){var e=Ext.widget("unconfirmpaymentrequestform"),t=this.getList().getSelectedObject();e.setParentData(t),e.show()},executeConfirm:function(e){var t=e.up("window"),i=t.down("form"),a=(this.getList(),this.getPaymentRequestsStore()),n=this.getList().getSelectedObject(),o=i.getValues();if(n){{n.get("id")}n.set("confirmed_at",o.confirmed_at),i.setLoading(!0),n.save({params:{confirm:!0},success:function(){i.setLoading(!1),a.load(),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),e.reject()}})}},executeUnconfirm:function(e){{var t=e.up("window"),i=t.down("form"),a=(this.getList(),this.getPaymentRequestsStore()),n=this.getList().getSelectedObject();i.getValues()}if(n){{n.get("id")}i.setLoading(!0),n.save({params:{unconfirm:!0},success:function(){i.setLoading(!1),a.load(),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),e.reject()}})}},selectionChange:function(e,t){var i=this.getList();t.length>0?i.enableRecordButtons():i.disableRecordButtons()}}),Ext.define("AM.controller.PaymentVoucherDetails",{extend:"Ext.app.Controller",stores:["PaymentVoucherDetails","PaymentVouchers"],models:["PaymentVoucherDetail"],views:["operation.paymentvoucherdetail.List","operation.paymentvoucherdetail.Form","operation.paymentvoucher.List"],refs:[{ref:"list",selector:"paymentvoucherdetaillist"},{ref:"parentList",selector:"paymentvoucherlist"}],init:function(){this.control({paymentvoucherdetaillist:{itemdblclick:this.editObject,selectionchange:this.selectionChange,afterrender:this.loadObjectList},"paymentvoucherdetailform button[action=save]":{click:this.updateObject},"paymentvoucherdetaillist button[action=addObject]":{click:this.addObject},"paymentvoucherdetaillist button[action=repeatObject]":{click:this.addObject},"paymentvoucherdetaillist button[action=editObject]":{click:this.editObject},"paymentvoucherdetaillist button[action=deleteObject]":{click:this.deleteObject},paymentvoucherlist:{updated:this.reloadStore,confirmed:this.reloadStore,deleted:this.cleanList}})},loadObjectList:function(e){e.getStore().loadData([],!1)},reloadStore:function(e){var t=this.getList(),i=this.getPaymentVoucherDetailsStore();i.load({params:{payment_voucher_id:e.get("id")}}),t.setObjectTitle(e)},cleanList:function(){var e=this.getList(),t=this.getPaymentVoucherDetailsStore();e.setTitle(""),t.loadRecords([],{addRecords:!1})},addObject:function(){var e=this.getParentList().getSelectedObject();if(e){var t="paymentvoucherdetailform",i=Ext.widget(t,{parentRecord:e});i.setParentData(e),i.show()}},editObject:function(){var e=this.getParentList().getSelectedObject(),t=this.getList().getSelectedObject();if(t&&e){var i="paymentvoucherdetailform",a=Ext.widget(i,{parentRecord:e});a.down("form").loadRecord(t),a.setParentData(e),a.setComboBoxData(t)}},updateObject:function(e){var t=e.up("window"),i=t.down("form"),a=this.getParentList().getSelectedObject(),n=this.getPaymentVoucherDetailsStore(),o=i.getRecord(),s=i.getValues();if(console.log("The values: "),console.log(s),o)o.set(s),i.query("checkbox").forEach(function(e){o.set(e.name,e.checked)}),i.setLoading(!0),o.save({params:{payment_voucher_id:a.get("id")},success:function(){i.setLoading(!1),n.load({params:{payment_voucher_id:a.get("id")}}),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),this.reject()}});else{var r=new AM.model.PaymentVoucherDetail(s);i.query("checkbox").forEach(function(e){r.set(e.name,e.checked)}),i.setLoading(!0),r.save({params:{payment_voucher_id:a.get("id")},success:function(){n.load({params:{payment_voucher_id:a.get("id")}}),i.setLoading(!1),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),this.reject()}})}},deleteObject:function(){var e=this.getList().getSelectedObject();if(e){var t=e.get("payment_voucher_id"),i=this.getList();i.setLoading(!0),e&&e.destroy({success:function(){i.setLoading(!1),i.fireEvent("deleted"),i.getStore().load({params:{payment_voucher_id:t}})},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;n.generic_errors&&Ext.MessageBox.show({title:"DELETE FAIL",msg:n.generic_errors,buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR})}})}},selectionChange:function(e,t){var i=this.getList();t.length>0?i.enableRecordButtons():i.disableRecordButtons()}}),Ext.define("AM.controller.PaymentVouchers",{extend:"Ext.app.Controller",stores:["PaymentVouchers"],models:["PaymentVoucher"],views:["operation.paymentvoucher.List","operation.paymentvoucher.Form","operation.paymentvoucherdetail.List"],refs:[{ref:"list",selector:"paymentvoucherlist"},{ref:"paymentvoucherDetailList",selector:"paymentvoucherdetaillist"},{ref:"form",selector:"paymentvoucherform"},{ref:"viewport",selector:"vp"}],init:function(){this.control({"paymentvoucherProcess paymentvoucherlist":{itemdblclick:this.editObject,selectionchange:this.selectionChange,afterrender:this.loadObjectList},"paymentvoucherProcess paymentvoucherform button[action=save]":{click:this.updateObject},"paymentvoucherProcess paymentvoucherform customcolorpicker":{colorSelected:this.onColorPickerSelect},"paymentvoucherProcess paymentvoucherlist button[action=addObject]":{click:this.addObject},"paymentvoucherProcess paymentvoucherlist button[action=editObject]":{click:this.editObject},"paymentvoucherProcess paymentvoucherlist button[action=deleteObject]":{click:this.deleteObject},"paymentvoucherProcess paymentvoucherlist button[action=confirmObject]":{click:this.confirmObject},"paymentvoucherProcess paymentvoucherlist button[action=unconfirmObject]":{click:this.unconfirmObject},"confirmpaymentvoucherform button[action=confirm]":{click:this.executeConfirm},"unconfirmpaymentvoucherform button[action=unconfirm]":{click:this.executeUnconfirm},"paymentvoucherProcess paymentvoucherlist textfield[name=searchField]":{change:this.liveSearch},"paymentvoucherform button[action=save]":{click:this.updateObject}})},onColorPickerSelect:function(e,t){var i=t.up("window"),a=i.down("form"),n=a.getForm().findField("color");n.setValue(e)},liveSearch:function(e,t){var i=this;i.getPaymentVouchersStore().getProxy().extraParams={livesearch:t},i.getPaymentVouchersStore().load()},loadObjectList:function(e){e.getStore().load()},addObject:function(){var e=Ext.widget("paymentvoucherform");e.show()},editObject:function(){var e=this.getList().getSelectedObject(),t=Ext.widget("paymentvoucherform");t.down("form").loadRecord(e),t.setComboBoxData(e)},confirmObject:function(){var e=this.getList().getSelectedObject();if(e){var t=Ext.widget("confirmpaymentvoucherform");t.setParentData(e),t.show()}},updateObject:function(e){var t=e.up("window"),i=t.down("form"),a=this,n=this.getPaymentVouchersStore(),o=i.getRecord(),s=i.getValues();if(o)o.set(s),i.setLoading(!0),o.save({success:function(){i.setLoading(!1),n.load(),t.close()},failure:function(e,t){i.setLoading(!1);var n=t.request.scope.reader.jsonData.message,o=n.errors;i.getForm().markInvalid(o),a.reject()}});else{console.log("This is the new record");var a=this,r=new AM.model.PaymentVoucher(s);i.setLoading(!0),r.save({success:function(e){n.load(),i.setLoading(!1),t.close(),a.updateChildGrid(e)},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),this.reject()}})}},unconfirmObject:function(){var e=Ext.widget("unconfirmpaymentvoucherform"),t=this.getList().getSelectedObject();e.setParentData(t),e.show()},executeConfirm:function(e){var t=this,i=e.up("window"),a=i.down("form"),n=this.getList(),o=(this.getPaymentVouchersStore(),this.getList().getSelectedObject()),s=a.getValues();if(o){{o.get("id")}o.set("confirmed_at",s.confirmed_at),a.setLoading(!0),o.save({params:{confirm:!0},success:function(e){a.setLoading(!1),t.reloadRecord(e),n.enableRecordButtons(),i.close()},failure:function(e,t){a.setLoading(!1);var i=t.request.scope.reader.jsonData.message,n=i.errors;a.getForm().markInvalid(n),e.reject()}})}},executeUnconfirm:function(e){var t=this,i=e.up("window"),a=i.down("form"),n=this.getList(),o=(this.getPaymentVouchersStore(),this.getList().getSelectedObject()),s=a.getValues();if(o){{o.get("id")}o.set("confirmed_at",s.confirmed_at),a.setLoading(!0),o.save({params:{unconfirm:!0},success:function(e){a.setLoading(!1),t.reloadRecord(e),n.enableRecordButtons(),i.close()},failure:function(e,t){a.setLoading(!1);var i=t.request.scope.reader.jsonData.message,n=i.errors;a.getForm().markInvalid(n),e.reject()}})}},deleteObject:function(){var e=this.getList().getSelectedObject();if(e){var t=this.getPaymentVouchersStore();t.remove(e),t.sync(),this.getList().query("pagingtoolbar")[0].doRefresh()}},selectionChange:function(e,t){var i=this.getList(),a=this,n=this.getList().getSelectedObject();n&&(a.updateChildGrid(n),t.length>0?i.enableRecordButtons():i.disableRecordButtons())},updateChildGrid:function(e){var t=this.getPaymentvoucherDetailList();t.setObjectTitle(e),t.getStore().getProxy().extraParams.payment_voucher_id=e.get("id"),t.getStore().load({params:{payment_voucher_id:e.get("id")},callback:function(){t.enableAddButton()}})},reloadRecord:function(e){var t=this.getList(),i=this.getList().getStore(),a=e.get("id");AM.model.PaymentVoucher.load(a,{scope:t,failure:function(){},success:function(e){recToUpdate=i.getById(a),recToUpdate.set(e.getData()),recToUpdate.commit(),t.getView().refreshNode(i.indexOfId(a))},callback:function(){}})}}),Ext.define("AM.controller.ReceiptVouchers",{extend:"Ext.app.Controller",stores:["ReceiptVouchers"],models:["ReceiptVoucher"],views:["operation.receiptvoucher.List","operation.receiptvoucher.Form"],refs:[{ref:"list",selector:"receiptvoucherlist"}],init:function(){this.control({receiptvoucherlist:{itemdblclick:this.editObject,selectionchange:this.selectionChange,afterrender:this.loadObjectList},"receiptvoucherform button[action=save]":{click:this.updateObject},"receiptvoucherlist button[action=addObject]":{click:this.addObject},"receiptvoucherlist button[action=editObject]":{click:this.editObject},"receiptvoucherlist button[action=deleteObject]":{click:this.deleteObject},"receiptvoucherlist button[action=confirmObject]":{click:this.confirmObject},"confirmreceiptvoucherform button[action=confirm]":{click:this.executeConfirm},"receiptvoucherlist button[action=unconfirmObject]":{click:this.unconfirmObject},"unconfirmreceiptvoucherform button[action=unconfirm]":{click:this.executeUnconfirm},"receiptvoucherlist textfield[name=searchField]":{change:this.liveSearch}})},liveSearch:function(e,t){var i=this;i.getReceiptVouchersStore().getProxy().extraParams={livesearch:t},i.getReceiptVouchersStore().load()},loadObjectList:function(e){e.getStore().load()},addObject:function(){var e=Ext.widget("receiptvoucherform");e.show()},editObject:function(){var e=this.getList().getSelectedObject(),t=Ext.widget("receiptvoucherform");t.down("form").loadRecord(e),t.setComboBoxData(e)},updateObject:function(e){var t=e.up("window"),i=t.down("form"),a=this.getReceiptVouchersStore(),n=i.getRecord(),o=i.getValues();if(n)n.set(o),i.setLoading(!0),n.save({success:function(){i.setLoading(!1),a.load(),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),this.reject()}});else{var s=new AM.model.ReceiptVoucher(o);i.setLoading(!0),s.save({success:function(){a.load(),i.setLoading(!1),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),this.reject()}})}},deleteObject:function(){var e=this.getList().getSelectedObject();if(e){var t=this.getReceiptVouchersStore();t.remove(e),t.sync(),this.getList().query("pagingtoolbar")[0].doRefresh()}},confirmObject:function(){var e=Ext.widget("confirmreceiptvoucherform"),t=this.getList().getSelectedObject();e.setParentData(t),e.show()},unconfirmObject:function(){var e=Ext.widget("unconfirmreceiptvoucherform"),t=this.getList().getSelectedObject();e.setParentData(t),e.show()},executeConfirm:function(e){var t=e.up("window"),i=t.down("form"),a=(this.getList(),this.getReceiptVouchersStore()),n=this.getList().getSelectedObject(),o=i.getValues();if(n){{n.get("id")}n.set("confirmed_at",o.confirmed_at),i.setLoading(!0),n.save({params:{confirm:!0},success:function(){i.setLoading(!1),a.load(),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),e.reject()}})}},executeUnconfirm:function(e){{var t=e.up("window"),i=t.down("form"),a=(this.getList(),this.getReceiptVouchersStore()),n=this.getList().getSelectedObject();i.getValues()}if(n){{n.get("id")}i.setLoading(!0),n.save({params:{unconfirm:!0},success:function(){i.setLoading(!1),a.load(),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),e.reject()}})}},selectionChange:function(e,t){var i=this.getList();t.length>0?i.enableRecordButtons():i.disableRecordButtons()}}),Ext.define("AM.controller.Users",{extend:"Ext.app.Controller",stores:["Users"],models:["User"],views:["master.user.List","master.user.Form"],refs:[{ref:"list",selector:"userlist"}],init:function(){this.control({userlist:{itemdblclick:this.editObject,selectionchange:this.selectionChange,afterrender:this.loadObjectList},"userform button[action=save]":{click:this.updateObject},"userlist button[action=addObject]":{click:this.addObject},"userlist button[action=editObject]":{click:this.editObject},"userlist button[action=deleteObject]":{click:this.deleteObject},"userlist textfield[name=searchField]":{change:this.liveSearch}})},liveSearch:function(e,t){var i=this;i.getUsersStore().getProxy().extraParams={livesearch:t},i.getUsersStore().load()},loadObjectList:function(e){e.getStore().load()},addObject:function(){var e=Ext.widget("userform");e.show()},editObject:function(){var e=this.getList().getSelectedObject(),t=Ext.widget("userform");t.down("form").loadRecord(e),t.setComboBoxData(e)},updateObject:function(e){var t=e.up("window"),i=t.down("form"),a=this.getUsersStore(),n=i.getRecord(),o=i.getValues();if(n)n.set(o),i.setLoading(!0),n.save({success:function(){i.setLoading(!1),a.load(),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),this.reject()}});else{var s=new AM.model.User(o);i.setLoading(!0),s.save({success:function(){a.load(),i.setLoading(!1),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),this.reject()}})}},deleteObject:function(){var e=this.getList().getSelectedObject();if(e){var t=this.getUsersStore();t.remove(e),t.sync(),this.getList().query("pagingtoolbar")[0].doRefresh()}},selectionChange:function(e,t){var i=this.getList();t.length>0?i.enableRecordButtons():i.disableRecordButtons()}}),Ext.define("AM.controller.Vendors",{extend:"Ext.app.Controller",stores:["Vendors"],models:["Vendor"],views:["master.vendor.List","master.vendor.Form"],refs:[{ref:"list",selector:"vendorlist"}],init:function(){this.control({vendorlist:{itemdblclick:this.editObject,selectionchange:this.selectionChange,afterrender:this.loadObjectList},"vendorform button[action=save]":{click:this.updateObject},"vendorlist button[action=addObject]":{click:this.addObject},"vendorlist button[action=editObject]":{click:this.editObject},"vendorlist button[action=deleteObject]":{click:this.deleteObject},"vendorlist textfield[name=searchField]":{change:this.liveSearch}})},liveSearch:function(e,t){var i=this;i.getVendorsStore().getProxy().extraParams={livesearch:t},i.getVendorsStore().load()},loadObjectList:function(e){e.getStore().load()},addObject:function(){var e=Ext.widget("vendorform");e.show()},editObject:function(){var e=this.getList().getSelectedObject(),t=Ext.widget("vendorform");t.down("form").loadRecord(e),t.setComboBoxData(e)},updateObject:function(e){var t=e.up("window"),i=t.down("form"),a=this.getVendorsStore(),n=i.getRecord(),o=i.getValues();if(n)n.set(o),i.setLoading(!0),n.save({success:function(){i.setLoading(!1),a.load(),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),this.reject()}});else{var s=new AM.model.Vendor(o);i.setLoading(!0),s.save({success:function(){a.load(),i.setLoading(!1),t.close()},failure:function(e,t){i.setLoading(!1);var a=t.request.scope.reader.jsonData.message,n=a.errors;i.getForm().markInvalid(n),this.reject()}})}},deleteObject:function(){var e=this.getList().getSelectedObject();if(e){var t=this.getVendorsStore();t.remove(e),t.sync(),this.getList().query("pagingtoolbar")[0].doRefresh()}},selectionChange:function(e,t){var i=this.getList();t.length>0?i.enableRecordButtons():i.disableRecordButtons()}}),Ext.Loader.setConfig({enabled:!1}),Ext.application({models:["PaymentVoucher","MonthlyGeneratorInvoice","CashBankMutation","Invoice","Item","Contract","Home","Maintenance","HomeAssignment","Vendor","CashBank","CashBankAdjustment","CashMutation","ReceiptVoucher","Customer","PaymentVoucherDetail","User","HomeType","ItemType","ContractItem","DepositDocument","MonthlyGenerator","PaymentRequest","AdvancedPayment","NavigationProcess"],stores:["Items","CashBankMutations","HomeAssignments","AdvancedPayments","Invoices","Vendors","Customers","MonthlyGeneratorInvoices","Contracts","DepositDocuments","Navigations","MonthlyGenerators","Maintenances","CashBankAdjustments","HomeTypes","CashBanks","ReceiptVouchers","Users","ItemTypes","PaymentVouchers","Homes","PaymentRequests","CashMutations","PaymentVoucherDetails","ContractItems"],controllers:["Items","BaseTreeBuilder","CashBankMutations","HomeAssignments","MasterReportEmployeeWorkCustomerReports","Authorization","AdvancedPayments","Invoices","Vendors","Navigation","Operation","Customers","Contracts","DepositDocuments","MasterTreeNavigation","MonthlyGenerators","OperationTreeNavigation","Maintenances","CashBankAdjustments","HomeTypes","CashBanks","ReceiptVouchers","Users","ItemTypes","PaymentVouchers","Master","Homes","PaymentRequests","Authentication","CashMutations","PaymentVoucherDetails"],views:["OperationProcessPanel","Navigation","Content","MasterProcessPanel","Worksheet","ChartInspect","ProtectedContent","CustomDateTimeField","Viewport","AuthenticationForm"],name:"AM",appFolder:"/assets/app",autoCreateViewport:!0}),Ext.override(Ext.Container,{removeAll:function(){this.items.each(function(e){this.remove(e)},this)}}),Ext.define("AM.view.Constants",{singleton:!0,LOGIN_URL:"/login.do",LOGOUT_URL:"/logout.do",GET_USERS_URL:"/users/all",GET_USER_URL:"/users/get",switchPersonalReport:0,switchOperation:1,switchMaster:2}),Ext.define("AM.currentUser",{singleton:!0,LOGIN_URL:"/login.do",LOGOUT_URL:"/logout.do",GET_USERS_URL:"/users/all",GET_USER_URL:"/users/get",hasRole:function(e,t){var i=Ext.decode(localStorage.getItem("currentUser"));return i&&i.role&&(i.role.system&&i.role.system.administrator||i.role[e]&&i.role[e][t])?!0:!1}}),Ext.onReady(function(){AM.view.Constants.moron="Awesome",Ext.Ajax.on("beforerequest",function(e,t){var i=Ext.decode(localStorage.getItem("currentUser"));if(null!==i){var a=i.auth_token;Ext.Ajax.extraParams={auth_token:a}}var n,o;return o=Ext.select('meta[name="csrf-token"]'),null!=o.first()?(n=o.first().dom.content,t.headers||(t.headers={}),t.headers["X-CSRF-Token"]=n):void 0},this),Ext.Ajax.on("requestcomplete",function(e,t){var i=t.responseText,a=Ext.decode(i);void 0!==a.auth_token_invalid&&a.auth_token_invalid===!0&&Ext.Msg.alert("Login Error","The authentication token is expired. Please retry login"),a.access_denied&&Ext.Msg.alert("Tidak Berizin",a.access_denied),a.message&&a.message.errors&&a.message.errors.generic_errors&&Ext.Msg.alert("Gagal",a.message.errors.generic_errors)})});